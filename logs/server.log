2026-01-16 00:03:10.609 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:56298 (ID: 1)
2026-01-16 00:03:20.927 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:56307 (ID: 2)
2026-01-16 00:03:23.971 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:56308 (ID: 3)
2026-01-16 00:03:25.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 00:03:25.538 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 00:03:25.601 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:03:25.607 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 00:03:25.607 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:03:25.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 00:03:25.958 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 00:03:25.960 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:03:25.960 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:03:25.960 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:25.960 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 00:03:25.960 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 00:03:25.966 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:68)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:03:25.966 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:68)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:03:25.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 00:03:25.967 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:03:25.968 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 0 quests for user 2 on date 2026-01-16
2026-01-16 00:03:25.969 [Server] INFO  com.mygame.server.database.QuestDAO - Found 5 quests in daily_quest_config
2026-01-16 00:03:25.970 [Server] INFO  com.mygame.server.database.QuestDAO - Assigned 5 daily quests to user 2 (expected: 5)
2026-01-16 00:03:25.970 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:03:25.974 [Server] INFO  com.mygame.server.database.QuestDAO - Auto-completed login quest for user 2
2026-01-16 00:03:25.974 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:03:26.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:26.867 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:27.372 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:27.870 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:28.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:28.597 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 00:03:28.597 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 00:03:28.648 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:03:28.649 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 00:03:28.649 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:03:28.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:28.991 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 00:03:28.991 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 00:03:28.991 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:03:28.996 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:03:28.996 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:28.996 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 00:03:28.996 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 00:03:28.997 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:68)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:03:28.997 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:68)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:03:28.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 00:03:28.997 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:03:28.997 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 0 quests for user 3 on date 2026-01-16
2026-01-16 00:03:28.997 [Server] INFO  com.mygame.server.database.QuestDAO - Found 5 quests in daily_quest_config
2026-01-16 00:03:28.997 [Server] INFO  com.mygame.server.database.QuestDAO - Assigned 5 daily quests to user 3 (expected: 5)
2026-01-16 00:03:28.997 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:03:28.997 [Server] INFO  com.mygame.server.database.QuestDAO - Auto-completed login quest for user 3
2026-01-16 00:03:28.997 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:03:29.378 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:29.407 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:29.880 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:29.908 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:30.380 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:30.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:30.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:30.919 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:31.387 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:31.419 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:31.888 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:31.919 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:32.390 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:32.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:32.482 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 00:03:32.482 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 00:03:32.528 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:03:32.528 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 00:03:32.528 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:03:32.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 00:03:32.880 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 00:03:32.880 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:03:32.880 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:03:32.880 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:32.880 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 00:03:32.880 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 00:03:32.881 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:68)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:03:32.881 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:68)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:03:32.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 00:03:32.881 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:03:32.881 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 0 quests for user 4 on date 2026-01-16
2026-01-16 00:03:32.881 [Server] INFO  com.mygame.server.database.QuestDAO - Found 5 quests in daily_quest_config
2026-01-16 00:03:32.887 [Server] INFO  com.mygame.server.database.QuestDAO - Assigned 5 daily quests to user 4 (expected: 5)
2026-01-16 00:03:32.887 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:03:32.887 [Server] INFO  com.mygame.server.database.QuestDAO - Auto-completed login quest for user 4
2026-01-16 00:03:32.887 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:03:32.887 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:32.919 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:33.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:33.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:33.428 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:33.791 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:33.897 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:33.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:34.287 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:34.398 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:34.428 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:34.794 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:34.900 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:34.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:35.297 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:35.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:35.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:35.798 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:35.897 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:35.937 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:36.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:36.406 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:36.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:36.800 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:36.906 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:36.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:37.303 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:37.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:03:37.447 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:37.554 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 00:03:37.561 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 54
2026-01-16 00:03:37.561 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 54)
2026-01-16 00:03:37.565 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 54 (position: 0)
2026-01-16 00:03:37.565 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 54)
2026-01-16 00:03:37.808 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:37.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:38.307 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:38.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:38.810 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:38.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:39.309 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:39.453 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:39.813 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:39.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:03:40.070 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 00:03:40.071 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 54
2026-01-16 00:03:40.071 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 54 (position: 1)
2026-01-16 00:03:40.071 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 54
2026-01-16 00:03:40.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:40.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:41.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:41.828 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:42.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:42.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:43.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:43.787 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 00:03:43.789 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 54
2026-01-16 00:03:43.789 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 54 (position: 2)
2026-01-16 00:03:43.789 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 54
2026-01-16 00:03:43.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:03:45.616 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 00:03:45.617 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 54 by host 2
2026-01-16 00:04:01.057 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 00:04:01.058 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 54
2026-01-16 00:04:01.058 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 54
2026-01-16 00:04:01.058 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 54 thành user 3
2026-01-16 00:04:01.058 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 54 từ 2 sang 3
2026-01-16 00:04:01.058 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 54 (còn lại 2 players)
2026-01-16 00:04:02.063 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 00:04:02.066 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 54
2026-01-16 00:04:02.066 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 54
2026-01-16 00:04:02.066 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 54 thành user 4
2026-01-16 00:04:02.066 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 54 từ 3 sang 4
2026-01-16 00:04:02.066 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 54 (còn lại 1 players)
2026-01-16 00:04:03.188 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 00:04:03.189 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 54
2026-01-16 00:04:03.189 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 54
2026-01-16 00:04:03.190 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 54
2026-01-16 00:04:03.190 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 54
2026-01-16 00:04:03.190 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 54 (còn lại 0 players)
2026-01-16 00:23:10.044 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 00:23:10.248 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 00:23:10.279 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 00:23:10.279 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 00:23:10.279 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 00:23:10.279 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 00:23:10.287 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 00:23:10.287 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 00:23:10.287 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 00:23:10.287 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 00:23:10.287 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 00:23:10.289 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 00:23:10.293 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 00:23:10.300 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 00:23:10.300 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 00:23:10.300 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 00:23:10.300 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 00:23:10.300 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 00:23:10.369 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 00:23:10.373 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 00:23:10.384 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 00:23:10.384 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 00:23:10.384 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 00:23:21.410 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57104 (ID: 1)
2026-01-16 00:23:23.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 00:23:23.943 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 00:23:24.001 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:23:24.003 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 00:23:24.003 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:23:24.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 00:23:24.358 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 00:23:24.358 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:23:24.360 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:23:24.360 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:24.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 00:23:24.363 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 00:23:24.363 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:23:24.363 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 00:23:24.363 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:23:24.368 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:23:24.369 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:23:24.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:25.263 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:25.764 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:26.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:26.769 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:27.271 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:27.773 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:28.273 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:28.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:29.279 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:29.780 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:30.282 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:30.784 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:31.289 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:31.789 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:32.291 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:32.794 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:33.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:33.801 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:34.300 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:34.775 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57113 (ID: 2)
2026-01-16 00:23:34.804 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:35.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:35.810 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:36.311 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:36.811 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:37.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:37.814 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:38.317 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:38.820 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:39.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:39.823 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:40.305 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57115 (ID: 3)
2026-01-16 00:23:40.323 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:40.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:41.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:41.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:42.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:42.835 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:43.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:43.841 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:44.348 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:44.851 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:45.350 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:45.854 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:46.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:46.857 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:47.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:47.860 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:48.363 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:48.866 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:49.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:49.869 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:50.373 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:50.876 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:51.378 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:51.879 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:52.382 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:52.882 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:53.385 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:53.894 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:54.397 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:54.901 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:55.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:55.903 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:56.407 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:56.910 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:57.410 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:57.913 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:58.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:58.919 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:59.422 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:23:59.922 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:00.425 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:00.926 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:01.429 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:01.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:02.435 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:02.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 00:24:02.847 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 00:24:02.897 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:24:02.898 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 00:24:02.898 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:24:02.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:03.247 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 00:24:03.247 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 00:24:03.248 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:24:03.248 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:24:03.248 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:03.248 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 00:24:03.248 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 00:24:03.249 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:24:03.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 00:24:03.249 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:24:03.249 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:24:03.249 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:24:03.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:03.656 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:03.938 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:04.157 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:04.441 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:04.660 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:04.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:05.160 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:05.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:05.663 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:05.944 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:06.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:06.447 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:06.669 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:06.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:07.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:07.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:07.675 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:07.953 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:08.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:08.453 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:08.678 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:08.957 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:09.178 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:09.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:09.685 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:09.963 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:10.188 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:10.466 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:10.691 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:10.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:11.191 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:11.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:11.629 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 00:24:11.629 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 00:24:11.678 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:24:11.679 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 00:24:11.679 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:24:11.694 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:11.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:12.026 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 00:24:12.026 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 00:24:12.027 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:24:12.027 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:24:12.027 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:12.027 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 00:24:12.027 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 00:24:12.027 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:24:12.027 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 00:24:12.027 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:24:12.027 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:24:12.028 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:24:12.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:12.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:12.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:12.697 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:12.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:12.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:13.201 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:13.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:13.475 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:13.704 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:13.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:13.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:14.204 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:14.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:14.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:14.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:14.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 00:24:14.884 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 55
2026-01-16 00:24:14.884 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 55)
2026-01-16 00:24:14.887 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 55 (position: 0)
2026-01-16 00:24:14.888 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 55)
2026-01-16 00:24:14.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:14.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:24:15.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:15.453 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:15.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:15.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:16.210 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:16.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:16.712 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:16.963 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:17.213 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:17.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:17.714 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:17.963 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:18.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:18.466 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:18.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:18.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:19.222 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:19.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:19.722 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:19.972 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:20.225 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:20.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:20.725 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:20.801 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 00:24:20.802 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 55
2026-01-16 00:24:20.802 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 55 (position: 1)
2026-01-16 00:24:20.802 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 55
2026-01-16 00:24:20.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:24:21.228 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:21.729 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:22.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:22.732 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:24:22.909 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 00:24:22.911 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 55
2026-01-16 00:24:22.911 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 55 (position: 2)
2026-01-16 00:24:22.911 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 55
2026-01-16 00:24:25.626 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 00:24:25.628 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 55...
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [QD, AC]
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [4P, QC]
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [QH, 8P]
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - New Round. Turn starts with Player 2
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [4C, JP]
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [9H, 2H]
2026-01-16 00:24:25.630 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [QD, 7H]
2026-01-16 00:24:25.631 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 00:24:25.633 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 55
2026-01-16 00:24:25.633 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 55
2026-01-16 00:24:25.634 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 55 thành user 4
2026-01-16 00:24:25.634 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 55 từ 2 sang 4
2026-01-16 00:24:25.634 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 55 (còn lại 2 players)
2026-01-16 00:24:25.634 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 00:24:25.635 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 55
2026-01-16 00:24:25.635 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 55
2026-01-16 00:24:25.636 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 55 thành user 3
2026-01-16 00:24:25.636 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 55 từ 4 sang 3
2026-01-16 00:24:25.636 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 55 (còn lại 1 players)
2026-01-16 00:24:25.636 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 00:24:25.637 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 55
2026-01-16 00:24:25.637 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 55
2026-01-16 00:24:25.637 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 55
2026-01-16 00:24:25.637 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 55
2026-01-16 00:24:25.637 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 55 (còn lại 0 players)
2026-01-16 00:24:25.637 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 55 (POKER)
2026-01-16 00:24:25.637 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 00:24:25.639 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 55 by host 2
2026-01-16 00:24:28.640 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57123 (ID: 4)
2026-01-16 00:24:28.640 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57124 (ID: 5)
2026-01-16 00:24:28.640 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57125 (ID: 6)
2026-01-16 00:24:28.640 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:28.640 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:28.640 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:28.641 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:28.641 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:28.641 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:28.641 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:52.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: StartGameRequest
2026-01-16 00:24:54.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaveRoomRequest
2026-01-16 00:24:54.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:24:55.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:24:55.837 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 00:27:39.821 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 00:27:39.999 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 00:27:40.031 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 00:27:40.031 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 00:27:40.031 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 00:27:40.031 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 00:27:40.036 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 00:27:40.046 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 00:27:40.046 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 00:27:40.046 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 00:27:40.046 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 00:27:40.046 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 00:27:40.110 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 00:27:40.119 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 00:27:40.126 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 00:27:40.126 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 00:27:40.126 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 00:27:51.289 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51989 (ID: 1)
2026-01-16 00:27:53.645 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51990 (ID: 2)
2026-01-16 00:27:54.569 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51991 (ID: 3)
2026-01-16 00:27:56.891 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 00:27:56.891 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 00:27:56.978 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:27:56.980 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 00:27:56.980 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:27:57.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 00:27:57.331 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 00:27:57.332 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:27:57.332 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:27:57.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:27:57.335 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 00:27:57.335 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 00:27:57.339 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:27:57.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 00:27:57.339 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:27:57.341 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:27:57.341 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:27:57.739 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:27:58.244 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:27:58.742 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:27:59.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:27:59.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:00.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:00.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:00.899 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 00:28:00.899 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 00:28:00.969 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:28:00.969 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 00:28:00.969 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:28:01.252 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:01.314 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 00:28:01.314 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 00:28:01.314 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:28:01.314 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:28:01.314 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:01.314 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 00:28:01.314 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 00:28:01.318 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:28:01.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 00:28:01.318 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:28:01.319 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:28:01.319 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:28:01.728 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:01.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:02.227 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:02.253 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:02.729 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:02.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:03.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:03.259 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:03.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:03.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:04.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:04.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:04.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:04.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:05.213 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 00:28:05.213 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 00:28:05.286 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:28:05.286 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 00:28:05.286 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:28:05.286 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:05.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:05.634 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 00:28:05.634 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 00:28:05.635 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:28:05.635 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:28:05.635 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:05.635 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 00:28:05.635 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 00:28:05.637 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:28:05.637 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 00:28:05.637 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:28:05.638 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:28:05.638 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:28:05.741 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:05.768 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:06.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:06.247 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:06.268 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:06.545 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:06.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:06.770 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:07.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:07.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:07.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:07.549 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:07.752 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:07.774 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:08.052 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:08.250 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:08.277 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:28:08.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 00:28:08.331 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 56
2026-01-16 00:28:08.331 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 56)
2026-01-16 00:28:08.339 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 56 (position: 0)
2026-01-16 00:28:08.339 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 56)
2026-01-16 00:28:08.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:08.753 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:09.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:09.259 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:09.554 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:09.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:10.059 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:10.259 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:10.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 00:28:10.505 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 56
2026-01-16 00:28:10.505 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 56 (position: 1)
2026-01-16 00:28:10.505 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 56
2026-01-16 00:28:10.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:10.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:28:11.060 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:11.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:12.068 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:12.395 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 00:28:12.398 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 56
2026-01-16 00:28:12.398 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 56 (position: 2)
2026-01-16 00:28:12.398 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 56
2026-01-16 00:28:12.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:28:14.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 00:28:14.460 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 56...
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [5H, 10C]
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [5C, AH]
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [10P, 8P]
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - New Round. Turn starts with Player 2
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [6D, KH]
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [QC, KC]
2026-01-16 00:28:14.460 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [9D, 5H]
2026-01-16 00:28:14.464 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 56 (POKER)
2026-01-16 00:28:14.464 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 00:28:14.464 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 56 by host 2
2026-01-16 00:28:14.464 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 00:28:14.464 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 56
2026-01-16 00:28:14.464 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 56
2026-01-16 00:28:14.464 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 56 thành user 3
2026-01-16 00:28:14.468 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 56 từ 2 sang 3
2026-01-16 00:28:14.468 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 56 (còn lại 2 players)
2026-01-16 00:28:14.468 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 00:28:14.469 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 56
2026-01-16 00:28:14.469 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 56
2026-01-16 00:28:14.469 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 56 thành user 4
2026-01-16 00:28:14.469 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 56 từ 3 sang 4
2026-01-16 00:28:14.469 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 56 (còn lại 1 players)
2026-01-16 00:28:14.469 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 00:28:14.469 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 56
2026-01-16 00:28:14.469 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 56
2026-01-16 00:28:14.469 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 56
2026-01-16 00:28:14.469 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 56
2026-01-16 00:28:14.469 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 56 (còn lại 0 players)
2026-01-16 00:28:22.558 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 00:28:22.578 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 00:28:22.579 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 00:28:30.668 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 00:28:30.669 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 9)
2026-01-16 00:28:30.669 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 00:28:38.744 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 11)
2026-01-16 00:28:38.744 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 12)
2026-01-16 00:28:38.744 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 10)
2026-01-16 00:28:46.798 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 13)
2026-01-16 00:28:46.798 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 14)
2026-01-16 00:28:46.798 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 15)
2026-01-16 00:28:54.894 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 18)
2026-01-16 00:28:54.895 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 16)
2026-01-16 00:28:54.895 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 17)
2026-01-16 00:33:33.893 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 00:33:34.064 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 00:33:34.191 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 00:33:34.191 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 00:33:34.191 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 00:33:34.191 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 00:33:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 00:33:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 00:33:34.206 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 00:33:34.211 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 00:33:34.211 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 00:33:34.211 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 00:33:34.211 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 00:33:34.211 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 00:33:34.271 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 00:33:34.273 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 00:33:34.283 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 00:33:34.283 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 00:33:34.283 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 00:33:46.559 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50809 (ID: 1)
2026-01-16 00:33:46.664 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50810 (ID: 2)
2026-01-16 00:33:49.463 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50812 (ID: 3)
2026-01-16 00:33:49.885 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 00:33:49.885 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 00:33:49.963 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:33:49.963 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 00:33:49.963 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:33:50.312 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 00:33:50.312 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 00:33:50.312 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:33:50.312 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:33:50.312 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:50.317 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 00:33:50.317 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 00:33:50.319 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:33:50.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 00:33:50.319 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:33:50.322 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:33:50.322 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:33:50.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:51.228 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:51.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:52.234 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:52.737 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:53.238 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:53.707 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 00:33:53.710 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123
2026-01-16 00:33:53.778 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:33:53.778 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 3
2026-01-16 00:33:53.778 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:33:53.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:54.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 00:33:54.132 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 00:33:54.132 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:33:54.132 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:33:54.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:54.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 00:33:54.132 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=3, limit=5
2026-01-16 00:33:54.135 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:33:54.135 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 00:33:54.135 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:33:54.135 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:33:54.136 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:33:54.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:54.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:54.746 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:55.038 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:55.246 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:55.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:55.746 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:56.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:56.250 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:56.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:56.748 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:57.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:57.248 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:57.547 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:57.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:58.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:58.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:58.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:58.757 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:59.058 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:59.258 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:59.558 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:33:59.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:33:59.869 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 00:33:59.869 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123123
2026-01-16 00:33:59.947 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:33:59.948 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 2
2026-01-16 00:33:59.948 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:34:00.058 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:00.262 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:00.296 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 00:34:00.297 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 00:34:00.298 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:34:00.298 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:34:00.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:00.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 00:34:00.298 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=4, limit=5
2026-01-16 00:34:00.298 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:34:00.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 00:34:00.298 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:34:00.298 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:34:00.298 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:34:00.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:00.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:00.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:01.063 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:01.207 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:01.258 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:01.567 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:01.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:01.768 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:02.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:02.213 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:02.269 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:02.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:02.715 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:02.775 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:03.049 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 00:34:03.054 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 57
2026-01-16 00:34:03.054 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 57)
2026-01-16 00:34:03.057 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 57 (position: 0)
2026-01-16 00:34:03.057 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 57)
2026-01-16 00:34:03.074 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:03.218 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:03.278 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:34:03.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:03.719 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:04.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:04.222 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:04.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:04.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:05.083 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:05.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:05.584 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:05.659 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 00:34:05.659 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 57
2026-01-16 00:34:05.659 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 57 (position: 1)
2026-01-16 00:34:05.659 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 57
2026-01-16 00:34:05.727 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:34:06.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:06.587 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:07.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:07.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 00:34:07.361 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 57
2026-01-16 00:34:07.361 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 57 (position: 2)
2026-01-16 00:34:07.361 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 57
2026-01-16 00:34:07.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:34:09.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 00:34:09.366 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 57...
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [AH, 6D]
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [10H, KD]
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [2C, JP]
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - New Round. Turn starts with Player 2
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [6D, AH]
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [10C, AP]
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [5H, QD]
2026-01-16 00:34:09.369 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 57 (POKER)
2026-01-16 00:34:09.369 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 00:34:09.369 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 57 by host 2
2026-01-16 00:34:09.724 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 00:34:09.724 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 57
2026-01-16 00:34:09.724 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 57
2026-01-16 00:34:09.724 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 57 (còn lại 2 players)
2026-01-16 00:34:09.724 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 00:34:09.724 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 57
2026-01-16 00:34:09.724 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 57
2026-01-16 00:34:09.724 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 57 thành user 3
2026-01-16 00:34:09.724 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 57 từ 2 sang 3
2026-01-16 00:34:09.724 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 57 (còn lại 1 players)
2026-01-16 00:34:09.724 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 00:34:09.724 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 57
2026-01-16 00:34:09.724 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 57
2026-01-16 00:34:09.724 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 57
2026-01-16 00:34:09.724 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 57
2026-01-16 00:34:09.724 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 57 (còn lại 0 players)
2026-01-16 00:37:00.168 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58921 (ID: 4)
2026-01-16 00:37:05.515 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58922 (ID: 5)
2026-01-16 00:37:05.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 00:37:05.716 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=123
2026-01-16 00:37:05.769 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:37:05.769 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 4
2026-01-16 00:37:05.769 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:37:06.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 00:37:06.126 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 00:37:06.126 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:37:06.126 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:37:06.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:06.127 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 00:37:06.127 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=2, limit=5
2026-01-16 00:37:06.127 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:37:06.127 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 00:37:06.127 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:37:06.129 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:37:06.129 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:37:06.530 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:06.986 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58923 (ID: 6)
2026-01-16 00:37:07.033 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:07.531 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:08.030 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:08.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:09.040 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:09.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:10.040 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:10.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:11.040 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:11.544 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:11.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LoginRequest
2026-01-16 00:37:11.930 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 5: username=123123
2026-01-16 00:37:11.980 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:37:11.980 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 5
2026-01-16 00:37:11.980 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:37:12.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:12.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaderboardRequest
2026-01-16 00:37:12.328 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 5: limit=50
2026-01-16 00:37:12.329 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:37:12.329 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:37:12.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:12.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: MatchHistoryRequest
2026-01-16 00:37:12.329 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 5: userId=3, limit=5
2026-01-16 00:37:12.329 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:37:12.330 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: GetQuestsRequest
2026-01-16 00:37:12.330 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:37:12.330 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:37:12.331 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:37:12.549 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:12.743 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:13.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:13.245 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:13.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:13.742 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:14.058 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:14.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:14.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:14.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:15.061 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:15.250 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:15.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:15.751 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:16.066 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:16.252 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:16.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:16.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:17.073 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:17.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:17.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:17.761 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:18.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:18.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:18.322 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LoginRequest
2026-01-16 00:37:18.322 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 6: username=123123123
2026-01-16 00:37:18.375 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:37:18.375 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 6
2026-01-16 00:37:18.375 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:37:18.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:18.722 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaderboardRequest
2026-01-16 00:37:18.722 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 6: limit=50
2026-01-16 00:37:18.722 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:37:18.722 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:37:18.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:18.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: MatchHistoryRequest
2026-01-16 00:37:18.724 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 6: userId=4, limit=5
2026-01-16 00:37:18.724 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:37:18.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: GetQuestsRequest
2026-01-16 00:37:18.724 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:37:18.725 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:37:18.726 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:37:18.768 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:19.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:19.137 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:19.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:19.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:19.640 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:19.774 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:20.090 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:20.141 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:20.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:20.590 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:20.641 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:20.780 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:21.095 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:21.146 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:21.285 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:21.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:37:21.649 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:21.727 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 00:37:21.730 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 58
2026-01-16 00:37:21.730 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 58)
2026-01-16 00:37:21.730 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 58 (position: 0)
2026-01-16 00:37:21.730 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 58)
2026-01-16 00:37:21.786 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:22.150 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:22.283 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:22.650 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:22.789 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:23.150 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:23.290 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:23.656 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:23.792 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:24.162 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:24.290 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:24.661 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:24.791 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:37:24.980 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: JoinRoomRequest
2026-01-16 00:37:24.982 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 58
2026-01-16 00:37:24.982 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 58 (position: 1)
2026-01-16 00:37:24.982 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 58
2026-01-16 00:37:25.164 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:25.663 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:26.163 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:26.660 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:27.090 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: JoinRoomRequest
2026-01-16 00:37:27.091 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 58
2026-01-16 00:37:27.091 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 58 (position: 2)
2026-01-16 00:37:27.091 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 58
2026-01-16 00:37:27.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:37:28.840 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 00:37:28.840 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 58...
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [9H, 8H]
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [AH, 2C]
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [KH, 2P]
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - New Round. Turn starts with Player 2
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [8D, QD]
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [10C, 10H]
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [7D, 3P]
2026-01-16 00:37:28.840 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 58 (POKER)
2026-01-16 00:37:28.840 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 00:37:28.840 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 58 by host 2
2026-01-16 00:37:29.206 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 00:37:29.212 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 58
2026-01-16 00:37:29.212 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 58
2026-01-16 00:37:29.212 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 58 thành user 3
2026-01-16 00:37:29.212 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 58 từ 2 sang 3
2026-01-16 00:37:29.212 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 58 (còn lại 2 players)
2026-01-16 00:37:29.213 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 00:37:29.213 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 58
2026-01-16 00:37:29.213 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 58
2026-01-16 00:37:29.213 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 58 (còn lại 1 players)
2026-01-16 00:37:29.213 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 00:37:29.213 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 58
2026-01-16 00:37:29.213 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 58
2026-01-16 00:37:29.213 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 58
2026-01-16 00:37:29.213 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 58
2026-01-16 00:37:29.213 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 58 (còn lại 0 players)
2026-01-16 00:39:49.560 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58952 (ID: 7)
2026-01-16 00:39:59.403 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LoginRequest
2026-01-16 00:39:59.403 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 7: username=123
2026-01-16 00:39:59.457 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:39:59.458 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 7
2026-01-16 00:39:59.458 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:39:59.817 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LeaderboardRequest
2026-01-16 00:39:59.817 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 7: limit=50
2026-01-16 00:39:59.818 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:39:59.818 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:39:59.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:39:59.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: MatchHistoryRequest
2026-01-16 00:39:59.818 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 7: userId=2, limit=5
2026-01-16 00:39:59.818 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:39:59.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: GetQuestsRequest
2026-01-16 00:39:59.818 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:39:59.819 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:39:59.820 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:40:00.077 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58961 (ID: 8)
2026-01-16 00:40:00.218 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:00.718 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:01.221 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:01.307 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58962 (ID: 9)
2026-01-16 00:40:01.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:02.228 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:02.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:03.125 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LoginRequest
2026-01-16 00:40:03.125 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 8: username=123123
2026-01-16 00:40:03.181 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:40:03.181 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 8
2026-01-16 00:40:03.181 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:40:03.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:03.526 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LeaderboardRequest
2026-01-16 00:40:03.526 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 8: limit=50
2026-01-16 00:40:03.526 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:40:03.528 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:40:03.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:03.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: MatchHistoryRequest
2026-01-16 00:40:03.528 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 8: userId=3, limit=5
2026-01-16 00:40:03.528 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:40:03.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: GetQuestsRequest
2026-01-16 00:40:03.528 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:40:03.529 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:40:03.529 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:40:03.732 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:03.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:04.232 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:04.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:04.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:04.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:05.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:05.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:05.743 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:05.952 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:06.243 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:06.453 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:06.746 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:06.955 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:07.146 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: LoginRequest
2026-01-16 00:40:07.146 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 9: username=123123123
2026-01-16 00:40:07.196 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:40:07.196 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 9
2026-01-16 00:40:07.196 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:40:07.250 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:07.455 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:07.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: LeaderboardRequest
2026-01-16 00:40:07.542 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 9: limit=50
2026-01-16 00:40:07.543 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:40:07.543 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:40:07.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:07.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: MatchHistoryRequest
2026-01-16 00:40:07.543 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 9: userId=4, limit=5
2026-01-16 00:40:07.543 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:40:07.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: GetQuestsRequest
2026-01-16 00:40:07.543 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:40:07.544 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:40:07.544 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:40:07.752 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:07.954 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:07.959 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:08.255 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:08.459 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:08.459 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:08.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:08.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:08.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:09.259 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:09.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:09.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:09.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: CreateRoomRequest
2026-01-16 00:40:09.707 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 59
2026-01-16 00:40:09.707 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 59)
2026-01-16 00:40:09.708 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 59 (position: 0)
2026-01-16 00:40:09.708 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 59)
2026-01-16 00:40:09.762 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 00:40:09.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:09.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:10.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:10.468 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:10.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:10.968 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:11.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:11.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:11.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: JoinRoomRequest
2026-01-16 00:40:11.757 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 59
2026-01-16 00:40:11.757 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 59 (position: 1)
2026-01-16 00:40:11.757 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 59
2026-01-16 00:40:11.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:11.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 00:40:12.468 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:12.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:13.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 00:40:13.572 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: JoinRoomRequest
2026-01-16 00:40:13.573 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 59
2026-01-16 00:40:13.573 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 59 (position: 2)
2026-01-16 00:40:13.573 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 59
2026-01-16 00:40:15.872 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: StartGameRequest
2026-01-16 00:40:15.872 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 59...
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [10H, AC]
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [2P, JH]
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [5P, 5D]
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - New Round. Turn starts with Player 2
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [AP, 7H]
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [QP, 9H]
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [8D, 2H]
2026-01-16 00:40:15.872 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 59 (POKER)
2026-01-16 00:40:15.873 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 00:40:15.873 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 59 by host 2
2026-01-16 00:40:16.241 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 00:40:16.242 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 59
2026-01-16 00:40:16.242 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 59
2026-01-16 00:40:16.243 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 59 thành user 3
2026-01-16 00:40:16.243 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 59 từ 2 sang 3
2026-01-16 00:40:16.243 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 59 (còn lại 2 players)
2026-01-16 00:40:16.243 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 00:40:16.243 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 59
2026-01-16 00:40:16.243 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 59
2026-01-16 00:40:16.243 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 59 thành user 4
2026-01-16 00:40:16.243 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 59 từ 3 sang 4
2026-01-16 00:40:16.243 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 59 (còn lại 1 players)
2026-01-16 00:40:16.247 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 9)
2026-01-16 00:40:16.248 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 59
2026-01-16 00:40:16.248 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 59
2026-01-16 00:40:16.248 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 59
2026-01-16 00:40:16.248 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 59
2026-01-16 00:40:16.248 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 59 (còn lại 0 players)
2026-01-16 00:41:33.301 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53149 (ID: 10)
2026-01-16 00:41:43.761 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:54028 (ID: 11)
2026-01-16 00:41:44.789 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:54030 (ID: 12)
2026-01-16 00:41:52.145 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: LoginRequest
2026-01-16 00:41:52.145 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 12: username=123123123
2026-01-16 00:41:52.201 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:41:52.201 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 12
2026-01-16 00:41:52.201 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:41:52.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: LeaderboardRequest
2026-01-16 00:41:52.586 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 12: limit=50
2026-01-16 00:41:52.587 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:41:52.587 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:41:52.587 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:52.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: MatchHistoryRequest
2026-01-16 00:41:52.588 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 12: userId=4, limit=5
2026-01-16 00:41:52.590 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:41:52.590 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: GetQuestsRequest
2026-01-16 00:41:52.590 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:41:52.591 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:41:52.592 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:41:52.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:53.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:53.870 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: LoginRequest
2026-01-16 00:41:53.870 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 11: username=123123
2026-01-16 00:41:53.924 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:41:53.924 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 11
2026-01-16 00:41:53.924 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:41:53.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:54.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: LeaderboardRequest
2026-01-16 00:41:54.276 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 11: limit=50
2026-01-16 00:41:54.276 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:41:54.276 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:41:54.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:54.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: MatchHistoryRequest
2026-01-16 00:41:54.276 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 11: userId=3, limit=5
2026-01-16 00:41:54.276 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:41:54.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: GetQuestsRequest
2026-01-16 00:41:54.276 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:41:54.276 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:41:54.276 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:41:54.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:54.686 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:54.972 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:55.191 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:55.220 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: LoginRequest
2026-01-16 00:41:55.221 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 10: username=123
2026-01-16 00:41:55.270 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:41:55.271 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 10
2026-01-16 00:41:55.271 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:41:55.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:55.614 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: LeaderboardRequest
2026-01-16 00:41:55.614 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 10: limit=50
2026-01-16 00:41:55.614 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:41:55.614 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:41:55.614 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 00:41:55.614 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: MatchHistoryRequest
2026-01-16 00:41:55.614 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 10: userId=2, limit=5
2026-01-16 00:41:55.614 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 00:41:55.614 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: GetQuestsRequest
2026-01-16 00:41:55.614 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:41:55.614 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:41:55.618 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:41:55.691 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:55.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:56.024 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 00:41:56.191 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:56.482 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:56.530 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 00:41:56.696 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:56.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:57.032 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 00:41:57.198 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:57.485 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:57.532 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 00:41:57.620 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: CreateRoomRequest
2026-01-16 00:41:57.622 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 60
2026-01-16 00:41:57.622 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 60)
2026-01-16 00:41:57.623 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 60 (position: 0)
2026-01-16 00:41:57.623 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 60)
2026-01-16 00:41:57.701 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:57.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:58.201 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:58.487 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:58.704 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:58.982 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:59.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:59.491 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:41:59.710 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:41:59.994 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:42:00.032 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: JoinRoomRequest
2026-01-16 00:42:00.041 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 60
2026-01-16 00:42:00.041 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 60 (position: 1)
2026-01-16 00:42:00.041 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 60
2026-01-16 00:42:00.211 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 00:42:00.494 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:42:00.994 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:42:01.497 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:42:01.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:42:02.382 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: JoinRoomRequest
2026-01-16 00:42:02.384 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 60
2026-01-16 00:42:02.384 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 60 (position: 2)
2026-01-16 00:42:02.384 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 60
2026-01-16 00:42:02.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 00:42:04.121 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: StartGameRequest
2026-01-16 00:42:04.121 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 60...
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [5P, AP]
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [3H, 6D]
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [6C, 8C]
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - New Round. Turn starts with Player 2
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 2: [3D, 6C]
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 3: [9D, 5P]
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.PokerGameSession - Dealing to 4: [4P, QD]
2026-01-16 00:42:04.121 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 60 (POKER)
2026-01-16 00:42:04.121 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 00:42:04.121 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 60 by host 2
2026-01-16 00:42:04.483 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 12)
2026-01-16 00:42:04.485 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 60
2026-01-16 00:42:04.485 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 60
2026-01-16 00:42:04.485 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 60 (còn lại 2 players)
2026-01-16 00:42:04.485 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 11)
2026-01-16 00:42:04.485 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 60
2026-01-16 00:42:04.485 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 60
2026-01-16 00:42:04.485 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 60 (còn lại 1 players)
2026-01-16 00:42:04.485 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 10)
2026-01-16 00:42:04.486 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 60
2026-01-16 00:42:04.486 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 60
2026-01-16 00:42:04.486 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 60
2026-01-16 00:42:04.486 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 60
2026-01-16 00:42:04.486 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 60 (còn lại 0 players)
2026-01-16 00:46:57.402 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64574 (ID: 13)
2026-01-16 00:47:02.389 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64575 (ID: 14)
2026-01-16 00:47:03.875 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64576 (ID: 15)
2026-01-16 00:47:06.240 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 13)
2026-01-16 00:47:09.168 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64577 (ID: 16)
2026-01-16 00:47:09.169 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 16)
2026-01-16 00:47:09.252 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64578 (ID: 17)
2026-01-16 00:47:21.817 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 14)
2026-01-16 00:47:22.622 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64580 (ID: 18)
2026-01-16 00:47:22.623 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 18)
2026-01-16 00:47:24.827 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64581 (ID: 19)
2026-01-16 00:47:25.055 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 17)
2026-01-16 00:47:26.185 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 19)
2026-01-16 00:47:27.090 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 15)
2026-01-16 00:47:34.828 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 00:47:35.011 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 00:47:35.042 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 00:47:35.042 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 00:47:35.042 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 00:47:35.042 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 00:47:35.051 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 00:47:35.051 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 00:47:35.052 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 00:47:35.056 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 00:47:35.056 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 00:47:35.063 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 00:47:35.063 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 00:47:35.063 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 00:47:35.063 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 00:47:35.124 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 00:47:35.135 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 00:47:35.135 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 00:47:35.135 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 00:47:35.135 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 00:47:42.299 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64595 (ID: 1)
2026-01-16 00:47:43.500 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64599 (ID: 2)
2026-01-16 00:47:49.584 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64601 (ID: 3)
2026-01-16 00:47:49.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 00:47:49.978 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 00:47:50.059 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:47:50.060 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 00:47:50.062 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:47:50.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 00:47:50.409 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 00:47:50.416 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:47:50.416 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:47:50.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:50.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 00:47:50.420 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 00:47:50.423 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:47:50.423 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:47:50.423 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 00:47:50.423 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:47:50.423 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:47:50.428 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:47:50.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:51.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:51.826 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:52.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:52.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:53.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:53.833 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:54.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:54.840 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:55.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:55.844 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:56.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:56.848 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:57.351 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:57.857 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:58.120 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 00:47:58.121 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 00:47:58.188 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:47:58.189 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 00:47:58.189 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:47:58.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:58.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 00:47:58.534 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 00:47:58.534 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:47:58.534 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:47:58.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:47:58.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 00:47:58.536 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 00:47:58.536 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:47:58.536 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:47:58.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 00:47:58.536 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:47:58.536 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:47:58.538 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:47:58.862 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:58.944 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:47:59.364 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:59.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:47:59.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:47:59.948 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:00.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:00.451 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:00.869 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:00.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:01.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:01.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:01.872 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:01.960 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:02.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 00:48:02.236 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 00:48:02.300 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:48:02.300 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 00:48:02.300 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:48:02.373 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:02.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:02.648 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 00:48:02.648 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 00:48:02.648 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:48:02.648 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:48:02.648 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:02.651 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 00:48:02.651 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 00:48:02.651 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:48:02.651 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:48:02.651 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 00:48:02.651 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:48:02.653 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:48:02.653 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:48:02.874 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:02.959 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:03.060 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:03.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:03.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:03.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:03.879 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:03.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:04.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:04.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:04.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:04.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:04.880 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:04.971 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:05.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:05.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:05.475 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:05.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:05.761 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 00:48:05.765 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 61
2026-01-16 00:48:05.765 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 61)
2026-01-16 00:48:05.768 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 61 (position: 0)
2026-01-16 00:48:05.769 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 61)
2026-01-16 00:48:05.885 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 00:48:05.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:06.079 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:06.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:06.579 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:06.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:07.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:07.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:07.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:07.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:08.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:08.483 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 00:48:08.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 00:48:08.582 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 61
2026-01-16 00:48:08.582 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 61 (position: 1)
2026-01-16 00:48:08.582 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 61
2026-01-16 00:48:08.584 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:09.088 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:09.589 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:10.089 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:10.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 00:48:10.474 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 61
2026-01-16 00:48:10.474 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 61 (position: 2)
2026-01-16 00:48:10.474 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 61
2026-01-16 00:48:10.594 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 00:48:14.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 00:48:14.409 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 61 by host 2
2026-01-16 00:48:35.006 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 00:48:35.008 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 61
2026-01-16 00:48:35.009 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 61
2026-01-16 00:48:35.009 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 61 thành user 3
2026-01-16 00:48:35.009 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 61 từ 2 sang 3
2026-01-16 00:48:35.009 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 61 (còn lại 2 players)
2026-01-16 00:48:36.546 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 00:48:36.548 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 61
2026-01-16 00:48:36.548 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 61
2026-01-16 00:48:36.548 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 61 thành user 4
2026-01-16 00:48:36.548 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 61 từ 3 sang 4
2026-01-16 00:48:36.548 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 61 (còn lại 1 players)
2026-01-16 00:48:38.565 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 00:48:38.566 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 61
2026-01-16 00:48:38.566 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 61
2026-01-16 00:48:38.566 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 61
2026-01-16 00:48:38.566 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 61
2026-01-16 00:48:38.566 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 61 (còn lại 0 players)
2026-01-16 00:59:34.054 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57541 (ID: 4)
2026-01-16 00:59:43.164 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 00:59:43.165 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=123
2026-01-16 00:59:43.219 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 00:59:43.221 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 4
2026-01-16 00:59:43.221 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 00:59:43.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 00:59:43.569 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 00:59:43.569 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:59:43.569 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:59:43.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:43.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 00:59:43.570 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=2, limit=5
2026-01-16 00:59:43.570 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:59:43.570 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:59:43.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 00:59:43.570 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 00:59:43.571 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 00:59:43.571 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 00:59:43.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:44.065 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57550 (ID: 5)
2026-01-16 00:59:44.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:44.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:45.482 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:45.985 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:46.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:46.998 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:47.158 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57552 (ID: 6)
2026-01-16 00:59:47.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:48.006 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:48.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:49.007 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:49.511 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:50.016 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:50.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:51.020 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:51.522 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:51.816 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LoginRequest
2026-01-16 00:59:51.816 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 5: username=123123
2026-01-16 00:59:51.869 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 00:59:51.872 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 5
2026-01-16 00:59:51.872 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 00:59:52.019 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:52.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaderboardRequest
2026-01-16 00:59:52.215 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 5: limit=50
2026-01-16 00:59:52.215 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:59:52.215 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:59:52.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:52.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: MatchHistoryRequest
2026-01-16 00:59:52.215 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 5: userId=3, limit=5
2026-01-16 00:59:52.219 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:59:52.219 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:59:52.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: GetQuestsRequest
2026-01-16 00:59:52.219 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 00:59:52.220 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 00:59:52.221 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 00:59:52.525 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:52.630 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:53.026 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:53.135 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:53.529 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:53.638 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:54.035 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:54.135 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:54.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:54.645 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:55.035 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:55.148 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:55.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:55.650 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:56.039 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:56.149 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:56.195 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LoginRequest
2026-01-16 00:59:56.195 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 6: username=123123123
2026-01-16 00:59:56.246 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 00:59:56.246 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 6
2026-01-16 00:59:56.246 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 00:59:56.541 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:56.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaderboardRequest
2026-01-16 00:59:56.592 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 6: limit=50
2026-01-16 00:59:56.592 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 00:59:56.592 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 00:59:56.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:56.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: MatchHistoryRequest
2026-01-16 00:59:56.592 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 6: userId=4, limit=5
2026-01-16 00:59:56.594 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:59:56.594 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 00:59:56.594 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: GetQuestsRequest
2026-01-16 00:59:56.594 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 00:59:56.595 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 00:59:56.595 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 00:59:56.645 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:57.006 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:57.044 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:57.154 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:57.510 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:57.544 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:57.654 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:58.009 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:58.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:58.156 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:58.513 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:58.544 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:58.656 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:59.015 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:59.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:59.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 00:59:59.519 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 00:59:59.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 00:59:59.665 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:00.022 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:00.054 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:00.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:00.525 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:00.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:00.669 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:01.026 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:01.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:01.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:01.532 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:01.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:01.669 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:02.035 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:02.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:02.171 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:02.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:02.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:02.675 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:02.954 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 01:00:02.956 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 62
2026-01-16 01:00:02.956 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 62)
2026-01-16 01:00:02.956 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 62 (position: 0)
2026-01-16 01:00:02.956 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 62)
2026-01-16 01:00:03.036 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:03.072 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:00:03.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:03.544 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:03.677 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:04.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:04.181 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:04.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:04.682 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:05.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:05.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:05.554 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:05.625 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: JoinRoomRequest
2026-01-16 01:00:05.627 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 62
2026-01-16 01:00:05.627 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 62 (position: 1)
2026-01-16 01:00:05.627 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 62
2026-01-16 01:00:05.685 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:00:06.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:06.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:07.057 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:07.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: JoinRoomRequest
2026-01-16 01:00:07.540 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 62
2026-01-16 01:00:07.540 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 62 (position: 2)
2026-01-16 01:00:07.540 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 62
2026-01-16 01:00:07.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:00:10.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 01:00:10.056 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 62 by host 2
2026-01-16 01:00:33.155 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 01:00:33.155 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 62
2026-01-16 01:00:33.155 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 62
2026-01-16 01:00:33.156 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 62 thành user 3
2026-01-16 01:00:33.156 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 62 từ 2 sang 3
2026-01-16 01:00:33.156 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 62 (còn lại 2 players)
2026-01-16 01:00:34.142 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 01:00:34.144 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 62
2026-01-16 01:00:34.144 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 62
2026-01-16 01:00:34.145 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 62 thành user 4
2026-01-16 01:00:34.145 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 62 từ 3 sang 4
2026-01-16 01:00:34.145 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 62 (còn lại 1 players)
2026-01-16 01:00:35.261 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 01:00:35.263 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 62
2026-01-16 01:00:35.263 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 62
2026-01-16 01:00:35.263 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 62
2026-01-16 01:00:35.263 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 62
2026-01-16 01:00:35.263 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 62 (còn lại 0 players)
2026-01-16 01:25:59.890 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 01:26:00.070 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 01:26:00.106 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 01:26:00.106 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 01:26:00.106 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 01:26:00.106 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 01:26:00.106 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 01:26:00.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 01:26:00.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 01:26:00.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 01:26:00.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 01:26:00.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 01:26:00.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 01:26:00.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 01:26:00.119 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 01:26:00.119 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 01:26:00.119 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 01:26:00.119 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 01:26:00.119 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 01:26:00.188 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 01:26:00.198 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 01:26:00.210 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 01:26:00.210 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 01:26:00.210 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 01:26:12.449 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:59856 (ID: 1)
2026-01-16 01:26:13.670 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:59858 (ID: 2)
2026-01-16 01:26:15.313 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49973 (ID: 3)
2026-01-16 01:26:16.908 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 01:26:16.908 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 01:26:16.986 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 01:26:16.989 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 01:26:16.989 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 01:26:17.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 01:26:17.339 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 01:26:17.342 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:26:17.342 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:26:17.342 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:17.345 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 01:26:17.345 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 01:26:17.348 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:26:17.348 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:26:17.348 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 01:26:17.348 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 01:26:17.350 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 01:26:17.350 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 01:26:17.750 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:18.247 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:18.748 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:19.257 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:19.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:20.102 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 01:26:20.102 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 01:26:20.169 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 01:26:20.171 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 01:26:20.171 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 01:26:20.262 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:20.518 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 01:26:20.519 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 01:26:20.519 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:26:20.519 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:26:20.519 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:20.519 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 01:26:20.519 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 01:26:20.521 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:26:20.521 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:26:20.521 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 01:26:20.521 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 01:26:20.521 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 01:26:20.521 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 01:26:20.766 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:20.928 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:21.267 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:21.442 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:21.769 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:21.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:22.269 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:22.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:22.769 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:22.948 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:23.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:23.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:23.776 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:23.957 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:23.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 01:26:23.977 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 01:26:24.047 [Server] WARN  com.mygame.server.database.UserDAO - Incorrect password for user: 123123123
2026-01-16 01:26:24.047 [Server] WARN  c.m.server.handlers.LoginHandler - Login thất bại: Incorrect username or password
2026-01-16 01:26:24.277 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:24.458 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:24.782 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:24.960 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:25.285 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:25.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:25.788 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:25.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:26.291 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:26.464 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:26.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:26.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:27.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:27.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:27.800 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:27.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:28.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 01:26:28.249 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 01:26:28.318 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 01:26:28.319 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 01:26:28.319 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 01:26:28.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:28.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:28.665 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 01:26:28.665 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 01:26:28.666 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:26:28.666 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:26:28.666 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:28.667 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 01:26:28.667 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 01:26:28.667 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:26:28.667 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:26:28.667 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 01:26:28.668 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 01:26:28.669 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 01:26:28.669 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 01:26:28.797 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:28.973 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:29.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:29.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:29.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:29.578 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:29.798 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:29.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:30.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:30.298 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:30.482 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:30.582 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:30.807 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 01:26:30.879 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 01:26:30.884 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 63
2026-01-16 01:26:30.884 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 63)
2026-01-16 01:26:30.888 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 63 (position: 0)
2026-01-16 01:26:30.888 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 63)
2026-01-16 01:26:30.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:31.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:31.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:31.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:31.988 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:32.084 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:32.487 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:32.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:32.987 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 01:26:33.092 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:33.151 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 01:26:33.151 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 63
2026-01-16 01:26:33.151 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 63 (position: 1)
2026-01-16 01:26:33.151 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 63
2026-01-16 01:26:33.591 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:34.095 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:34.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:35.100 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:35.501 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 01:26:35.503 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 63
2026-01-16 01:26:35.503 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 63 (position: 2)
2026-01-16 01:26:35.503 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 63
2026-01-16 01:26:35.601 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 01:26:37.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 01:26:37.362 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 63 by host 2
2026-01-16 01:27:04.847 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 01:27:04.848 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 63
2026-01-16 01:27:04.848 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 63
2026-01-16 01:27:04.848 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 63 thành user 3
2026-01-16 01:27:04.848 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 63 từ 2 sang 3
2026-01-16 01:27:04.848 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 63 (còn lại 2 players)
2026-01-16 01:27:05.847 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 01:27:05.848 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 63
2026-01-16 01:27:05.848 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 63
2026-01-16 01:27:05.848 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 63 (còn lại 1 players)
2026-01-16 01:27:06.865 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 01:27:06.868 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 63
2026-01-16 01:27:06.868 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 63
2026-01-16 01:27:06.868 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 63
2026-01-16 01:27:06.868 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 63
2026-01-16 01:27:06.868 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 63 (còn lại 0 players)
2026-01-16 01:28:24.624 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49998 (ID: 4)
2026-01-16 01:28:30.985 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49999 (ID: 5)
2026-01-16 01:28:31.797 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50000 (ID: 6)
2026-01-16 01:28:32.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 01:28:32.420 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=123
2026-01-16 01:28:32.472 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 01:28:32.472 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 4
2026-01-16 01:28:32.472 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 01:28:32.820 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 01:28:32.820 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 01:28:32.823 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:28:32.823 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:28:32.823 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:32.823 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 01:28:32.823 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=2, limit=5
2026-01-16 01:28:32.823 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:28:32.823 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:28:32.823 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 01:28:32.823 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 01:28:32.823 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 01:28:32.823 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 01:28:33.234 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:33.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:34.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:34.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:35.241 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:35.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:36.012 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LoginRequest
2026-01-16 01:28:36.012 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 5: username=123123
2026-01-16 01:28:36.060 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 01:28:36.060 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 5
2026-01-16 01:28:36.060 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 01:28:36.250 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:36.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaderboardRequest
2026-01-16 01:28:36.409 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 5: limit=50
2026-01-16 01:28:36.409 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:28:36.409 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:28:36.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:36.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: MatchHistoryRequest
2026-01-16 01:28:36.409 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 5: userId=3, limit=5
2026-01-16 01:28:36.411 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:28:36.411 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:28:36.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: GetQuestsRequest
2026-01-16 01:28:36.411 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 01:28:36.411 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 01:28:36.412 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 01:28:36.753 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:36.820 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:37.251 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:37.321 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:37.757 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:37.830 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:38.259 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:38.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:38.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:38.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:39.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:39.335 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:39.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LoginRequest
2026-01-16 01:28:39.415 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 6: username=123123123
2026-01-16 01:28:39.465 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 01:28:39.465 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 6
2026-01-16 01:28:39.465 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 01:28:39.761 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:39.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaderboardRequest
2026-01-16 01:28:39.819 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 6: limit=50
2026-01-16 01:28:39.819 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:28:39.819 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:28:39.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:39.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: MatchHistoryRequest
2026-01-16 01:28:39.821 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 6: userId=4, limit=5
2026-01-16 01:28:39.821 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:28:39.821 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:28:39.821 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: GetQuestsRequest
2026-01-16 01:28:39.821 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 01:28:39.821 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 01:28:39.823 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 01:28:39.836 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:40.220 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:40.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:40.340 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:40.721 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:40.772 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:40.841 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:41.230 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:41.275 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:41.344 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:41.733 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:41.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 01:28:41.848 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:41.968 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 01:28:41.971 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 64
2026-01-16 01:28:41.971 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 64)
2026-01-16 01:28:41.972 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 64 (position: 0)
2026-01-16 01:28:41.972 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 64)
2026-01-16 01:28:42.232 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:42.349 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:42.736 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:42.850 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:43.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:43.353 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:43.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:43.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:44.244 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:44.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:44.744 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:44.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:45.248 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:45.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:45.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:45.860 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:46.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:46.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:46.615 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: JoinRoomRequest
2026-01-16 01:28:46.617 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 64
2026-01-16 01:28:46.617 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 64 (position: 1)
2026-01-16 01:28:46.617 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 64
2026-01-16 01:28:46.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:46.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 01:28:47.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:47.750 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:48.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: JoinRoomRequest
2026-01-16 01:28:48.231 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 64
2026-01-16 01:28:48.231 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 64 (position: 2)
2026-01-16 01:28:48.231 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 64
2026-01-16 01:28:48.252 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 01:28:50.590 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 01:28:50.590 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 64 by host 2
2026-01-16 01:29:02.308 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 01:29:02.309 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 64
2026-01-16 01:29:02.309 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 64
2026-01-16 01:29:02.310 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 64 thành user 3
2026-01-16 01:29:02.310 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 64 từ 2 sang 3
2026-01-16 01:29:02.310 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 64 (còn lại 2 players)
2026-01-16 01:29:04.465 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 01:29:04.469 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 64
2026-01-16 01:29:04.470 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 64
2026-01-16 01:29:04.470 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 64 thành user 4
2026-01-16 01:29:04.470 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 64 từ 3 sang 4
2026-01-16 01:29:04.470 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 64 (còn lại 1 players)
2026-01-16 01:29:06.262 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 01:29:06.262 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 64
2026-01-16 01:29:06.262 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 64
2026-01-16 01:29:06.262 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 64
2026-01-16 01:29:06.262 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 64
2026-01-16 01:29:06.262 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 64 (còn lại 0 players)
2026-01-16 01:40:05.492 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:61324 (ID: 7)
2026-01-16 01:40:14.154 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LoginRequest
2026-01-16 01:40:14.154 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 7: username=123
2026-01-16 01:40:14.209 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 01:40:14.209 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 7
2026-01-16 01:40:14.209 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 01:40:14.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LeaderboardRequest
2026-01-16 01:40:14.565 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 7: limit=50
2026-01-16 01:40:14.565 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:40:14.565 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:40:14.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:14.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: MatchHistoryRequest
2026-01-16 01:40:14.565 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 7: userId=2, limit=5
2026-01-16 01:40:14.566 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:40:14.567 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:40:14.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: GetQuestsRequest
2026-01-16 01:40:14.568 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 01:40:14.568 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 01:40:14.568 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 01:40:14.968 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:15.468 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:15.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:16.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:16.974 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:17.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:17.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:18.041 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:61335 (ID: 8)
2026-01-16 01:40:18.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:18.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:19.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:19.504 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:61336 (ID: 9)
2026-01-16 01:40:19.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:20.486 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:20.987 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:21.337 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LoginRequest
2026-01-16 01:40:21.338 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 8: username=123123
2026-01-16 01:40:21.386 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 01:40:21.387 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 8
2026-01-16 01:40:21.387 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 01:40:21.488 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:21.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LeaderboardRequest
2026-01-16 01:40:21.731 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 8: limit=50
2026-01-16 01:40:21.731 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:40:21.731 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:40:21.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:21.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: MatchHistoryRequest
2026-01-16 01:40:21.731 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 8: userId=3, limit=5
2026-01-16 01:40:21.731 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:40:21.731 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:40:21.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: GetQuestsRequest
2026-01-16 01:40:21.731 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 01:40:21.736 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 01:40:21.736 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 01:40:21.987 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:22.146 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:22.496 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:22.648 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:22.996 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:23.148 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:23.497 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:23.648 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:23.998 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:24.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:24.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:24.668 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:25.005 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:25.167 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:25.507 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:25.669 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:26.008 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:26.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:26.507 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:26.677 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:26.987 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: LoginRequest
2026-01-16 01:40:26.987 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 9: username=123123123
2026-01-16 01:40:27.037 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 01:40:27.037 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 9
2026-01-16 01:40:27.037 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 01:40:27.037 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:27.177 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:27.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: LeaderboardRequest
2026-01-16 01:40:27.379 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 9: limit=50
2026-01-16 01:40:27.379 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:40:27.379 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:40:27.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:27.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: MatchHistoryRequest
2026-01-16 01:40:27.379 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 9: userId=4, limit=5
2026-01-16 01:40:27.379 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:40:27.379 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:40:27.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: GetQuestsRequest
2026-01-16 01:40:27.379 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 01:40:27.379 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 01:40:27.379 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 01:40:27.510 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:27.680 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:27.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:28.011 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:28.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:28.299 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:28.515 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:28.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:28.802 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:29.015 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:29.186 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:29.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:29.518 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:29.690 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:29.805 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:30.018 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:30.193 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:30.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:30.522 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:30.692 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:30.811 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:31.023 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:31.193 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:31.311 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:31.524 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:31.695 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:31.813 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:32.027 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:32.199 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:32.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:32.530 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:32.699 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:32.814 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:33.029 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:33.198 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:33.317 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:33.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:33.697 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:33.817 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:34.032 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:34.198 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:34.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:34.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:34.708 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:34.824 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:35.037 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:35.211 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:35.323 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:35.539 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:35.715 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:35.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:35.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: CreateRoomRequest
2026-01-16 01:40:35.879 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 65
2026-01-16 01:40:35.879 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 65)
2026-01-16 01:40:35.879 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 65 (position: 0)
2026-01-16 01:40:35.879 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 65)
2026-01-16 01:40:36.043 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 01:40:36.217 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:36.327 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:36.719 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:36.828 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:37.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:37.336 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:37.722 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:37.836 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:38.071 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: JoinRoomRequest
2026-01-16 01:40:38.072 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 65
2026-01-16 01:40:38.072 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 65 (position: 1)
2026-01-16 01:40:38.072 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 65
2026-01-16 01:40:38.226 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 01:40:38.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:38.837 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:39.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:39.845 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:40.342 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:40.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:41.348 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 01:40:41.492 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: JoinRoomRequest
2026-01-16 01:40:41.494 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 65
2026-01-16 01:40:41.494 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 65 (position: 2)
2026-01-16 01:40:41.494 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 65
2026-01-16 01:40:42.988 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: StartGameRequest
2026-01-16 01:40:42.988 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 65 by host 2
2026-01-16 01:40:54.402 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 01:40:54.404 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 65
2026-01-16 01:40:54.404 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 65
2026-01-16 01:40:54.404 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 65 thành user 3
2026-01-16 01:40:54.404 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 65 từ 2 sang 3
2026-01-16 01:40:54.404 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 65 (còn lại 2 players)
2026-01-16 01:40:55.845 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 01:40:55.846 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 65
2026-01-16 01:40:55.847 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 65
2026-01-16 01:40:55.847 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 65 thành user 4
2026-01-16 01:40:55.847 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 65 từ 3 sang 4
2026-01-16 01:40:55.847 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 65 (còn lại 1 players)
2026-01-16 01:40:58.133 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 9)
2026-01-16 01:40:58.133 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 65
2026-01-16 01:40:58.133 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 65
2026-01-16 01:40:58.136 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 65
2026-01-16 01:40:58.136 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 65
2026-01-16 01:40:58.136 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 65 (còn lại 0 players)
2026-01-16 01:45:49.913 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53758 (ID: 10)
2026-01-16 01:45:56.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: LoginRequest
2026-01-16 01:45:56.997 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 10: username=123
2026-01-16 01:45:57.048 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 01:45:57.049 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 10
2026-01-16 01:45:57.049 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 01:45:57.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: LeaderboardRequest
2026-01-16 01:45:57.413 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 10: limit=50
2026-01-16 01:45:57.413 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:45:57.413 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:45:57.413 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:45:57.413 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: MatchHistoryRequest
2026-01-16 01:45:57.413 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 10: userId=2, limit=5
2026-01-16 01:45:57.414 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:45:57.414 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:45:57.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: GetQuestsRequest
2026-01-16 01:45:57.414 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 01:45:57.415 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 01:45:57.415 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 01:45:57.810 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:45:58.312 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:45:58.816 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:45:59.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:45:59.758 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53768 (ID: 11)
2026-01-16 01:45:59.820 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:00.324 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:00.828 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:01.108 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53769 (ID: 12)
2026-01-16 01:46:01.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:01.834 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:02.337 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:02.840 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:03.342 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:03.447 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: LoginRequest
2026-01-16 01:46:03.447 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 11: username=123123
2026-01-16 01:46:03.497 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 01:46:03.497 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 11
2026-01-16 01:46:03.497 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 01:46:03.844 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: LeaderboardRequest
2026-01-16 01:46:03.844 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 11: limit=50
2026-01-16 01:46:03.844 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:46:03.844 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:46:03.844 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:03.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: MatchHistoryRequest
2026-01-16 01:46:03.846 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 11: userId=3, limit=5
2026-01-16 01:46:03.846 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:46:03.846 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:46:03.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: GetQuestsRequest
2026-01-16 01:46:03.846 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 01:46:03.847 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 01:46:03.847 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 01:46:03.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:04.255 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:04.349 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:04.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:04.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:05.259 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:05.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:05.762 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:05.859 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:06.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:06.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:06.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:06.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:07.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: LoginRequest
2026-01-16 01:46:07.126 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 12: username=123123123
2026-01-16 01:46:07.174 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 01:46:07.174 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 12
2026-01-16 01:46:07.174 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 01:46:07.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:07.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:07.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: LeaderboardRequest
2026-01-16 01:46:07.520 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 12: limit=50
2026-01-16 01:46:07.520 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:46:07.520 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:46:07.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:07.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: MatchHistoryRequest
2026-01-16 01:46:07.520 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 12: userId=4, limit=5
2026-01-16 01:46:07.521 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:46:07.521 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:46:07.521 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: GetQuestsRequest
2026-01-16 01:46:07.521 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 01:46:07.521 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 01:46:07.522 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 01:46:07.767 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:07.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:07.934 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:08.271 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:08.377 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:08.434 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:08.771 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:08.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:08.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:09.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:09.383 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:09.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:09.774 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:09.884 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 01:46:09.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:09.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: CreateRoomRequest
2026-01-16 01:46:09.977 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 66
2026-01-16 01:46:09.977 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 66)
2026-01-16 01:46:09.978 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 66 (position: 0)
2026-01-16 01:46:09.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 66)
2026-01-16 01:46:10.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:10.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:10.777 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:10.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:11.277 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:11.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:11.780 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:11.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:12.115 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: JoinRoomRequest
2026-01-16 01:46:12.116 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 66
2026-01-16 01:46:12.116 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 66 (position: 1)
2026-01-16 01:46:12.116 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 66
2026-01-16 01:46:12.280 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 01:46:12.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:12.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:13.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:13.803 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: JoinRoomRequest
2026-01-16 01:46:13.804 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 66
2026-01-16 01:46:13.804 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 66 (position: 2)
2026-01-16 01:46:13.804 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 66
2026-01-16 01:46:13.959 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 01:46:15.330 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: StartGameRequest
2026-01-16 01:46:15.331 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 66 by host 2
2026-01-16 01:46:36.443 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 10)
2026-01-16 01:46:36.444 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 66
2026-01-16 01:46:36.444 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 66
2026-01-16 01:46:36.444 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 66 thành user 3
2026-01-16 01:46:36.444 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 66 từ 2 sang 3
2026-01-16 01:46:36.444 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 66 (còn lại 2 players)
2026-01-16 01:46:38.773 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 11)
2026-01-16 01:46:38.774 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 66
2026-01-16 01:46:38.774 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 66
2026-01-16 01:46:38.774 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 66 thành user 4
2026-01-16 01:46:38.774 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 66 từ 3 sang 4
2026-01-16 01:46:38.774 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 66 (còn lại 1 players)
2026-01-16 01:46:39.834 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 12)
2026-01-16 01:46:39.835 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 66
2026-01-16 01:46:39.835 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 66
2026-01-16 01:46:39.835 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 66
2026-01-16 01:46:39.835 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 66
2026-01-16 01:46:39.835 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 66 (còn lại 0 players)
2026-01-16 01:56:17.225 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64396 (ID: 13)
2026-01-16 01:56:20.392 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: LoginRequest
2026-01-16 01:56:20.392 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 13: username=123
2026-01-16 01:56:20.441 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 01:56:20.441 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 13
2026-01-16 01:56:20.441 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 01:56:20.788 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: LeaderboardRequest
2026-01-16 01:56:20.788 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 13: limit=50
2026-01-16 01:56:20.789 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:56:20.789 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:56:20.789 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:20.789 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: MatchHistoryRequest
2026-01-16 01:56:20.789 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 13: userId=2, limit=5
2026-01-16 01:56:20.790 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:56:20.790 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:56:20.790 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: GetQuestsRequest
2026-01-16 01:56:20.790 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 01:56:20.790 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 01:56:20.790 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 01:56:21.202 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:21.702 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:22.207 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:22.711 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:23.211 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:23.713 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:24.216 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:24.715 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:25.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:25.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:26.220 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:26.722 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:27.223 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:27.722 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:28.227 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:28.725 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:29.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:29.732 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:30.232 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:30.734 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:31.234 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:31.741 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:32.241 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:32.528 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64406 (ID: 14)
2026-01-16 01:56:32.742 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:33.242 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:33.284 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64407 (ID: 15)
2026-01-16 01:56:33.745 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:34.248 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:34.748 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:35.251 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:35.751 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:36.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: LoginRequest
2026-01-16 01:56:36.165 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 14: username=123123
2026-01-16 01:56:36.215 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 01:56:36.215 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 14
2026-01-16 01:56:36.215 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 01:56:36.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:36.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: LeaderboardRequest
2026-01-16 01:56:36.562 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 14: limit=50
2026-01-16 01:56:36.562 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:56:36.562 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:56:36.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:36.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: MatchHistoryRequest
2026-01-16 01:56:36.562 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 14: userId=3, limit=5
2026-01-16 01:56:36.562 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:56:36.562 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:56:36.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: GetQuestsRequest
2026-01-16 01:56:36.562 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 01:56:36.562 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 01:56:36.565 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 01:56:36.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:36.972 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:37.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:37.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:37.761 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:37.982 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:38.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:38.485 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:38.770 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:38.987 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:39.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:39.491 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:39.777 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:39.995 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:40.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: LoginRequest
2026-01-16 01:56:40.065 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 15: username=123123123
2026-01-16 01:56:40.116 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 01:56:40.116 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 15
2026-01-16 01:56:40.116 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 01:56:40.281 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:40.461 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: LeaderboardRequest
2026-01-16 01:56:40.461 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 15: limit=50
2026-01-16 01:56:40.462 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 01:56:40.462 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 01:56:40.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:40.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: MatchHistoryRequest
2026-01-16 01:56:40.462 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 15: userId=4, limit=5
2026-01-16 01:56:40.462 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:56:40.462 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 01:56:40.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: GetQuestsRequest
2026-01-16 01:56:40.462 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 01:56:40.462 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 01:56:40.462 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 01:56:40.491 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:40.782 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:40.871 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:40.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:41.281 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:41.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:41.501 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:41.787 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:41.874 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:42.001 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:42.282 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:42.382 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:42.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:42.791 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:42.885 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:43.007 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:43.099 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: CreateRoomRequest
2026-01-16 01:56:43.099 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 67
2026-01-16 01:56:43.099 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 67)
2026-01-16 01:56:43.100 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 67 (position: 0)
2026-01-16 01:56:43.100 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 67)
2026-01-16 01:56:43.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: ListRoomsRequest
2026-01-16 01:56:43.382 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:43.510 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:43.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:44.011 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:44.384 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:44.512 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:44.891 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:45.016 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: JoinRoomRequest
2026-01-16 01:56:45.018 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 67
2026-01-16 01:56:45.018 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 67 (position: 1)
2026-01-16 01:56:45.018 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 67
2026-01-16 01:56:45.018 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 14: ListRoomsRequest
2026-01-16 01:56:45.391 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:45.891 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:46.392 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: ListRoomsRequest
2026-01-16 01:56:46.498 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 15: JoinRoomRequest
2026-01-16 01:56:46.499 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 67
2026-01-16 01:56:46.499 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 67 (position: 2)
2026-01-16 01:56:46.499 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 67
2026-01-16 01:56:48.001 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 13: StartGameRequest
2026-01-16 01:56:48.001 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 67 by host 2
2026-01-16 01:57:29.338 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 13)
2026-01-16 01:57:29.339 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 67
2026-01-16 01:57:29.339 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 67
2026-01-16 01:57:29.339 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 67 thành user 3
2026-01-16 01:57:29.339 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 67 từ 2 sang 3
2026-01-16 01:57:29.339 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 67 (còn lại 2 players)
2026-01-16 01:57:30.412 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 14)
2026-01-16 01:57:30.413 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 67
2026-01-16 01:57:30.413 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 67
2026-01-16 01:57:30.413 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 67 thành user 4
2026-01-16 01:57:30.413 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 67 từ 3 sang 4
2026-01-16 01:57:30.413 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 67 (còn lại 1 players)
2026-01-16 01:57:31.601 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 15)
2026-01-16 01:57:31.601 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 67
2026-01-16 01:57:31.601 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 67
2026-01-16 01:57:31.602 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 67
2026-01-16 01:57:31.602 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 67
2026-01-16 01:57:31.602 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 67 (còn lại 0 players)
2026-01-16 02:08:07.773 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49710 (ID: 16)
2026-01-16 02:08:15.771 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: LoginRequest
2026-01-16 02:08:15.771 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 16: username=123
2026-01-16 02:08:15.828 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:08:15.828 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 16
2026-01-16 02:08:15.828 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:08:16.190 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: LeaderboardRequest
2026-01-16 02:08:16.190 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 16: limit=50
2026-01-16 02:08:16.196 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:08:16.196 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:08:16.196 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:16.196 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: MatchHistoryRequest
2026-01-16 02:08:16.196 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 16: userId=2, limit=5
2026-01-16 02:08:16.196 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:08:16.196 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:08:16.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: GetQuestsRequest
2026-01-16 02:08:16.197 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:08:16.197 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:08:16.197 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:08:16.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:17.088 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:17.591 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:18.093 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:18.499 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49724 (ID: 17)
2026-01-16 02:08:18.589 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:19.097 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:19.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:19.765 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49725 (ID: 18)
2026-01-16 02:08:20.098 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:20.602 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:20.852 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: CreateRoomRequest
2026-01-16 02:08:20.854 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 68
2026-01-16 02:08:20.854 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 68)
2026-01-16 02:08:20.854 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 68 (position: 0)
2026-01-16 02:08:20.854 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 68)
2026-01-16 02:08:21.098 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: ListRoomsRequest
2026-01-16 02:08:24.780 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: LoginRequest
2026-01-16 02:08:24.780 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 17: username=123123
2026-01-16 02:08:24.827 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:08:24.827 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 17
2026-01-16 02:08:24.827 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:08:25.180 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: LeaderboardRequest
2026-01-16 02:08:25.180 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 17: limit=50
2026-01-16 02:08:25.180 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:08:25.180 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:08:25.180 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:25.180 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: MatchHistoryRequest
2026-01-16 02:08:25.180 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 17: userId=3, limit=5
2026-01-16 02:08:25.180 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:08:25.180 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:08:25.180 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: GetQuestsRequest
2026-01-16 02:08:25.180 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:08:25.180 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:08:25.182 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:08:25.602 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:26.101 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:26.607 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:27.108 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:27.610 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:28.112 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:28.617 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:28.777 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: LoginRequest
2026-01-16 02:08:28.777 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 18: username=123123123
2026-01-16 02:08:28.827 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:08:28.827 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 18
2026-01-16 02:08:28.827 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:08:29.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:29.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: LeaderboardRequest
2026-01-16 02:08:29.172 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 18: limit=50
2026-01-16 02:08:29.172 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:08:29.172 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:08:29.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:29.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: MatchHistoryRequest
2026-01-16 02:08:29.172 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 18: userId=4, limit=5
2026-01-16 02:08:29.173 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:08:29.173 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:87)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:08:29.173 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: GetQuestsRequest
2026-01-16 02:08:29.173 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:08:29.173 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:08:29.173 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:08:29.583 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:29.619 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:30.089 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:30.121 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:30.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:30.623 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:31.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:31.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:31.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:31.626 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:32.093 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:32.127 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:32.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:32.628 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:33.098 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:33.131 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: ListRoomsRequest
2026-01-16 02:08:33.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 17: JoinRoomRequest
2026-01-16 02:08:33.262 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 68
2026-01-16 02:08:33.262 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 68 (position: 1)
2026-01-16 02:08:33.262 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 68
2026-01-16 02:08:33.597 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:34.098 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:34.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:35.104 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:35.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: JoinRoomRequest
2026-01-16 02:08:35.580 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 68
2026-01-16 02:08:35.580 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 68 (position: 2)
2026-01-16 02:08:35.580 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 68
2026-01-16 02:08:35.607 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 18: ListRoomsRequest
2026-01-16 02:08:38.676 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 16: StartGameRequest
2026-01-16 02:08:38.677 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 68 by host 2
2026-01-16 02:12:43.644 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 02:12:43.819 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 02:12:43.846 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 02:12:43.846 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 02:12:43.846 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 02:12:43.846 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 02:12:43.856 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 02:12:43.856 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 02:12:43.857 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 02:12:43.858 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 02:12:43.858 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 02:12:43.858 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 02:12:43.858 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 02:12:43.859 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 02:12:43.859 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 02:12:43.860 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 02:12:43.860 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 02:12:43.860 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 02:12:43.860 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 02:12:43.861 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 02:12:43.863 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 02:12:43.865 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 02:12:43.869 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 02:12:43.869 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 02:12:43.869 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 02:12:43.869 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 02:12:43.937 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 02:12:43.946 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 02:12:43.949 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 02:12:43.949 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 02:12:43.949 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 02:12:53.807 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49348 (ID: 1)
2026-01-16 02:12:55.127 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49349 (ID: 2)
2026-01-16 02:12:57.108 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49350 (ID: 3)
2026-01-16 02:13:00.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 02:13:00.179 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 02:13:00.239 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:13:00.241 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 02:13:00.242 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:13:00.585 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 02:13:00.585 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 02:13:00.587 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:13:00.588 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:13:00.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:00.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 02:13:00.593 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 02:13:00.595 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:13:00.595 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:13:00.596 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 02:13:00.596 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:13:00.598 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:13:00.598 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:13:01.000 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:01.503 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:02.003 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:02.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:03.009 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:03.508 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:04.012 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:04.515 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:04.626 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 02:13:04.626 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 02:13:04.675 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:13:04.675 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 02:13:04.675 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:13:05.015 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:05.020 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 02:13:05.020 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 02:13:05.021 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:13:05.021 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:13:05.021 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:05.022 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 02:13:05.022 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 02:13:05.022 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:13:05.022 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:13:05.023 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 02:13:05.023 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:13:05.023 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:13:05.024 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:13:05.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:05.518 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:05.929 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:06.021 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:06.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:06.524 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:06.938 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:07.019 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:07.441 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:07.524 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:07.944 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:08.028 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:08.447 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:08.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:08.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:09.028 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:09.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:09.531 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:09.949 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:10.029 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:10.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:10.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:10.733 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 02:13:10.733 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 02:13:10.787 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:13:10.788 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 02:13:10.788 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:13:10.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:11.040 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:11.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 02:13:11.132 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 02:13:11.132 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:13:11.132 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:13:11.134 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:11.134 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 02:13:11.134 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 02:13:11.135 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:13:11.135 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:13:11.135 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 02:13:11.135 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:13:11.137 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:13:11.137 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:13:11.458 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:11.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:11.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:11.961 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:12.041 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:12.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:12.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:12.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:12.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:12.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:13.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:13.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:13.468 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:13.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:13.563 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:13.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:14.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:14.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:14.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:14.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:14.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:14.971 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:15.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:15.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:15.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:15.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:15.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:15.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:16.068 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:16.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:16.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:16.567 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:16.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:16.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:17.071 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:17.073 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:17.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:17.571 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:17.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:13:17.685 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 02:13:17.689 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 69
2026-01-16 02:13:17.689 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 69)
2026-01-16 02:13:17.691 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 69 (position: 0)
2026-01-16 02:13:17.692 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 69)
2026-01-16 02:13:17.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:18.070 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:18.487 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:18.578 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:18.989 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:19.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:19.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:19.582 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:19.988 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:20.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:20.488 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:20.587 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:20.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:13:21.090 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:21.178 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 02:13:21.182 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 69
2026-01-16 02:13:21.182 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 69 (position: 1)
2026-01-16 02:13:21.182 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 69
2026-01-16 02:13:21.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:22.089 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:22.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:23.097 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:23.497 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 02:13:23.498 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 69
2026-01-16 02:13:23.498 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 69 (position: 2)
2026-01-16 02:13:23.498 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 69
2026-01-16 02:13:23.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:13:25.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 02:13:25.970 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 69...
2026-01-16 02:13:25.970 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:13:25.970 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:13:25.970 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [10P, JH]
2026-01-16 02:13:25.970 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [QP, 7D]
2026-01-16 02:13:25.970 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [KP, 8P]
2026-01-16 02:13:25.970 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:13:25.970 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 02:13:25.978 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 69
2026-01-16 02:13:25.978 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 69
2026-01-16 02:13:25.978 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 69 thành user 3
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 69 từ 2 sang 3
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 69 (còn lại 2 players)
2026-01-16 02:13:25.978 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 02:13:25.978 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 69
2026-01-16 02:13:25.978 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 69
2026-01-16 02:13:25.978 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 69 thành user 4
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 69 từ 3 sang 4
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 69 (còn lại 1 players)
2026-01-16 02:13:25.978 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 02:13:25.978 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 69
2026-01-16 02:13:25.978 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 69
2026-01-16 02:13:25.978 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 69
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 69
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 69 (còn lại 0 players)
2026-01-16 02:13:25.978 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 69 (POKER)
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:13:25.978 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 69 by host 2
2026-01-16 02:13:28.981 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49354 (ID: 4)
2026-01-16 02:13:28.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:13:28.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:13:28.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:13:28.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:13:28.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:13:28.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:13:28.983 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49355 (ID: 5)
2026-01-16 02:13:28.986 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49356 (ID: 6)
2026-01-16 02:13:36.647 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaveRoomRequest
2026-01-16 02:13:37.019 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:37.527 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:38.030 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:38.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:38.899 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 02:13:39.028 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:39.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 02:13:39.533 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:40.030 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:40.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:40.902 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 02:13:41.037 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:41.171 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 02:13:41.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:42.038 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:42.399 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 02:13:42.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:43.039 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:43.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:44.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:44.548 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:45.001 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaveRoomRequest
2026-01-16 02:13:45.052 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:45.309 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:45.554 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:45.811 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:46.058 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:46.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:46.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaveRoomRequest
2026-01-16 02:13:46.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:46.815 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:47.032 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:47.058 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:47.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:47.539 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:47.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:47.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:48.039 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:48.059 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:48.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:48.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:48.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:48.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:49.038 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:49.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:49.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:49.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:49.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:49.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:50.049 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:50.071 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:50.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:50.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:50.578 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:50.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:51.055 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:51.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:51.326 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:51.557 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:51.583 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:51.830 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:52.061 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:52.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:52.330 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:52.561 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:52.590 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:52.833 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:52.974 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 02:13:53.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:53.089 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:53.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:53.564 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:53.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:53.837 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:54.068 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:54.094 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:54.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:54.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:54.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:54.838 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:55.071 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:55.098 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:55.346 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:55.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:55.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:55.849 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:56.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:56.105 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:56.352 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:56.579 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:56.605 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:56.851 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:56.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 02:13:57.083 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:57.108 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:57.355 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:57.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:57.608 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:57.858 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:58.088 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:58.108 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:58.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:58.587 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:58.611 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:13:58.859 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:58.965 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 02:13:59.092 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:59.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:13:59.595 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:13:59.867 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:14:00.099 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:14:00.368 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:14:00.602 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:14:00.869 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:14:01.103 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:14:01.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:14:01.608 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:14:01.957 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 02:14:02.107 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:14:02.610 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:14:03.226 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 02:17:33.734 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 02:17:33.908 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 02:17:34.059 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 02:17:34.059 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 02:17:34.059 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 02:17:34.059 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 02:17:34.059 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 02:17:34.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 02:17:34.068 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 02:17:34.068 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 02:17:34.069 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 02:17:34.069 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 02:17:34.073 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 02:17:34.073 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 02:17:34.073 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 02:17:34.073 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 02:17:34.073 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 02:17:34.137 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 02:17:34.140 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 02:17:34.151 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 02:17:34.151 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 02:17:34.151 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 02:17:44.383 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50010 (ID: 1)
2026-01-16 02:17:47.951 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 02:17:47.951 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 02:17:48.013 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:17:48.015 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 02:17:48.015 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:17:48.376 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 02:17:48.376 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 02:17:48.376 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:17:48.376 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:17:48.376 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:48.384 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 02:17:48.384 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 02:17:48.385 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:17:48.385 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:17:48.388 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 02:17:48.388 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:17:48.391 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:17:48.392 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:17:48.776 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:49.277 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:49.779 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:50.282 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:50.473 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50012 (ID: 2)
2026-01-16 02:17:50.782 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:51.285 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:51.689 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50013 (ID: 3)
2026-01-16 02:17:51.784 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:52.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:52.788 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:53.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:53.792 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:54.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:54.787 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 02:17:54.787 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 02:17:54.838 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:17:54.838 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 02:17:54.838 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:17:54.838 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:55.183 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 02:17:55.183 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 02:17:55.183 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:17:55.187 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:17:55.187 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:55.187 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 02:17:55.187 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 02:17:55.187 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:17:55.187 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:17:55.187 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 02:17:55.189 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:17:55.189 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:17:55.189 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:17:55.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:55.601 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:55.801 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:56.102 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:56.304 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:56.606 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:56.804 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:57.106 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:57.306 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:57.608 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:57.806 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:58.112 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:58.307 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:58.493 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 02:17:58.493 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 02:17:58.543 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:17:58.543 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 02:17:58.543 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:17:58.613 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:58.806 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:58.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 02:17:58.893 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 02:17:58.893 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:17:58.893 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:17:58.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:17:58.894 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 02:17:58.894 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 02:17:58.894 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:17:58.894 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:17:58.894 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 02:17:58.894 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:17:58.894 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:17:58.894 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:17:59.115 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:59.307 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:17:59.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:17:59.619 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:17:59.806 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:17:59.814 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:18:00.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:00.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:00.316 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:18:00.622 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:00.813 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:00.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:18:01.123 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:01.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:01.322 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:18:01.617 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 02:18:01.622 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 70
2026-01-16 02:18:01.623 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 70)
2026-01-16 02:18:01.627 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 70 (position: 0)
2026-01-16 02:18:01.627 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 70)
2026-01-16 02:18:01.627 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:01.816 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:01.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:18:02.122 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:02.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:02.622 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:02.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:03.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:03.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:03.633 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:03.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:04.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:18:04.326 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:04.355 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 02:18:04.356 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 70
2026-01-16 02:18:04.356 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 70 (position: 1)
2026-01-16 02:18:04.356 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 70
2026-01-16 02:18:04.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:05.324 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:05.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:06.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:06.832 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:07.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:18:07.457 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 02:18:07.459 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 70
2026-01-16 02:18:07.459 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 70 (position: 2)
2026-01-16 02:18:07.459 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 70
2026-01-16 02:18:09.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 02:18:09.239 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 70...
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [4H, 6H]
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [5P, 5D]
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [AP, QD]
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:18:09.242 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 70 (POKER)
2026-01-16 02:18:09.242 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:18:09.242 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 70 by host 2
2026-01-16 02:18:09.242 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 02:18:09.246 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 70
2026-01-16 02:18:09.246 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 70
2026-01-16 02:18:09.246 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 70 (còn lại 2 players)
2026-01-16 02:18:09.246 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 02:18:09.247 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 70
2026-01-16 02:18:09.247 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 70
2026-01-16 02:18:09.247 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 70 thành user 4
2026-01-16 02:18:09.247 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 70 từ 2 sang 4
2026-01-16 02:18:09.247 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 70 (còn lại 1 players)
2026-01-16 02:18:09.247 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 02:18:09.249 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 70
2026-01-16 02:18:09.249 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 70
2026-01-16 02:18:09.249 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 70
2026-01-16 02:18:09.249 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 70
2026-01-16 02:18:09.249 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 70 (còn lại 0 players)
2026-01-16 02:18:17.286 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 02:18:17.286 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 02:18:17.286 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 02:18:25.292 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 9)
2026-01-16 02:18:25.292 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 02:18:25.302 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 02:18:33.350 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 11)
2026-01-16 02:18:33.351 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 10)
2026-01-16 02:18:33.411 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 12)
2026-01-16 02:18:41.384 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 13)
2026-01-16 02:18:41.384 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 14)
2026-01-16 02:18:41.450 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 15)
2026-01-16 02:18:49.051 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 18)
2026-01-16 02:18:49.415 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 17)
2026-01-16 02:18:49.415 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 16)
2026-01-16 02:21:40.700 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 02:21:40.987 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 02:21:41.015 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 02:21:41.015 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 02:21:41.015 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 02:21:41.015 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 02:21:41.020 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 02:21:41.025 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 02:21:41.025 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 02:21:41.025 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 02:21:41.028 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 02:21:41.030 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 02:21:41.030 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 02:21:41.030 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 02:21:41.030 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 02:21:41.030 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 02:21:41.099 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 02:21:41.106 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 02:21:41.106 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 02:21:41.106 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 02:21:41.106 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 02:21:52.165 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58367 (ID: 1)
2026-01-16 02:21:55.999 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:59979 (ID: 2)
2026-01-16 02:21:56.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 02:21:56.078 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 02:21:56.160 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:21:56.160 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 02:21:56.160 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:21:56.514 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 02:21:56.514 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 02:21:56.515 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:21:56.515 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:21:56.515 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:56.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 02:21:56.520 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 02:21:56.520 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:21:56.524 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:21:56.525 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 02:21:56.525 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:21:56.525 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:21:56.525 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:21:56.746 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:59980 (ID: 3)
2026-01-16 02:21:56.920 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:57.425 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:57.925 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:58.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:58.927 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:59.426 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:21:59.848 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 02:21:59.848 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 02:21:59.917 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:21:59.919 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 02:21:59.919 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:21:59.927 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:00.267 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 02:22:00.267 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 02:22:00.267 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:22:00.268 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:22:00.268 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:00.269 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 02:22:00.269 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 02:22:00.269 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:22:00.270 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:22:00.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 02:22:00.270 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:22:00.271 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:22:00.271 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:22:00.434 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:00.678 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:00.936 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:01.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:01.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:01.677 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:01.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:02.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:02.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:02.687 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:02.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:03.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:03.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:03.685 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:03.757 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 02:22:03.757 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 02:22:03.836 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:22:03.836 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 02:22:03.836 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:22:03.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:04.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 02:22:04.179 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 02:22:04.179 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:22:04.179 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:22:04.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:04.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 02:22:04.184 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 02:22:04.185 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:22:04.185 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:22:04.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 02:22:04.185 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:22:04.186 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:22:04.186 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:22:04.190 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:04.445 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:04.595 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:04.685 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:04.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:05.095 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:05.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:05.451 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:05.595 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:05.695 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:05.954 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:06.094 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:06.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:06.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:06.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:06.703 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:06.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:22:07.103 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:07.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 02:22:07.180 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 71
2026-01-16 02:22:07.181 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 71)
2026-01-16 02:22:07.184 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 71 (position: 0)
2026-01-16 02:22:07.184 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 71)
2026-01-16 02:22:07.203 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:07.602 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:07.695 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:08.106 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:08.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:08.607 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:08.705 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:09.109 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:09.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:09.615 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:09.707 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:10.118 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:10.143 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 02:22:10.146 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 71
2026-01-16 02:22:10.146 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 71 (position: 1)
2026-01-16 02:22:10.146 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 71
2026-01-16 02:22:10.212 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:22:10.619 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:11.122 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:11.619 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:12.125 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:12.625 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:13.022 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 02:22:13.024 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 71
2026-01-16 02:22:13.024 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 71 (position: 2)
2026-01-16 02:22:13.024 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 71
2026-01-16 02:22:13.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:22:14.545 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 02:22:14.545 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 71...
2026-01-16 02:22:14.545 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:22:14.545 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:22:14.545 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [AC, 7P]
2026-01-16 02:22:14.545 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [4P, QD]
2026-01-16 02:22:14.545 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [6P, 5P]
2026-01-16 02:22:14.545 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:22:14.554 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 71 (POKER)
2026-01-16 02:22:14.554 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:22:14.554 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 71 by host 2
2026-01-16 02:23:43.704 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 02:23:43.706 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 71
2026-01-16 02:23:43.706 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 71
2026-01-16 02:23:43.706 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 71 thành user 3
2026-01-16 02:23:43.706 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 71 từ 2 sang 3
2026-01-16 02:23:43.706 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 71 (còn lại 2 players)
2026-01-16 02:23:44.829 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 02:23:44.830 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 71
2026-01-16 02:23:44.830 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 71
2026-01-16 02:23:44.831 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 71 thành user 4
2026-01-16 02:23:44.831 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 71 từ 3 sang 4
2026-01-16 02:23:44.831 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 71 (còn lại 1 players)
2026-01-16 02:23:46.367 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 02:23:46.368 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 71
2026-01-16 02:23:46.368 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 71
2026-01-16 02:23:46.369 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 71
2026-01-16 02:23:46.369 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 71
2026-01-16 02:23:46.369 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 71 (còn lại 0 players)
2026-01-16 02:30:50.894 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50175 (ID: 4)
2026-01-16 02:30:55.842 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 02:30:55.842 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=123
2026-01-16 02:30:55.898 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:30:55.898 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 4
2026-01-16 02:30:55.898 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:30:56.263 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 02:30:56.263 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 02:30:56.263 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:30:56.263 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:30:56.263 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:56.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 02:30:56.265 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=2, limit=5
2026-01-16 02:30:56.265 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:30:56.265 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:30:56.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 02:30:56.265 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:30:56.265 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:30:56.265 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:30:56.663 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:57.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:57.666 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:57.939 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50178 (ID: 5)
2026-01-16 02:30:58.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:58.671 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:58.845 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50179 (ID: 6)
2026-01-16 02:30:59.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:30:59.673 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:00.174 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:00.676 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:00.860 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LoginRequest
2026-01-16 02:31:00.860 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 5: username=123123
2026-01-16 02:31:00.906 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:31:00.906 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 5
2026-01-16 02:31:00.906 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:31:01.178 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:01.253 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaderboardRequest
2026-01-16 02:31:01.253 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 5: limit=50
2026-01-16 02:31:01.253 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:31:01.253 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:31:01.253 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:01.253 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: MatchHistoryRequest
2026-01-16 02:31:01.253 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 5: userId=3, limit=5
2026-01-16 02:31:01.253 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:31:01.253 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:31:01.253 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: GetQuestsRequest
2026-01-16 02:31:01.253 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:31:01.256 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:31:01.256 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:31:01.665 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:01.681 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:02.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:02.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:02.667 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:02.683 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:03.171 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:03.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:03.674 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:03.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:04.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:04.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:04.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LoginRequest
2026-01-16 02:31:04.393 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 6: username=123123123
2026-01-16 02:31:04.444 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:31:04.444 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 6
2026-01-16 02:31:04.444 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:31:04.673 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:04.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:04.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaderboardRequest
2026-01-16 02:31:04.798 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 6: limit=50
2026-01-16 02:31:04.798 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:31:04.798 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:31:04.798 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:04.798 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: MatchHistoryRequest
2026-01-16 02:31:04.798 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 6: userId=4, limit=5
2026-01-16 02:31:04.799 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:31:04.799 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:31:04.799 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: GetQuestsRequest
2026-01-16 02:31:04.799 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:31:04.799 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:31:04.799 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:31:05.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:05.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:05.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:05.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:05.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:05.712 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:06.183 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:06.189 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:06.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:06.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:06.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:06.715 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:07.190 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:07.191 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 02:31:07.218 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:07.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 02:31:07.349 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 72
2026-01-16 02:31:07.349 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 72)
2026-01-16 02:31:07.350 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 72 (position: 0)
2026-01-16 02:31:07.350 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 72)
2026-01-16 02:31:07.689 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:07.715 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:08.193 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:08.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:08.694 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:08.719 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:09.196 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 02:31:09.224 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:09.340 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: JoinRoomRequest
2026-01-16 02:31:09.342 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 72
2026-01-16 02:31:09.342 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 72 (position: 1)
2026-01-16 02:31:09.342 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 72
2026-01-16 02:31:09.723 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:10.224 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:10.728 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:10.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: JoinRoomRequest
2026-01-16 02:31:11.000 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 72
2026-01-16 02:31:11.000 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 72 (position: 2)
2026-01-16 02:31:11.000 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 72
2026-01-16 02:31:11.230 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 02:31:12.735 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: StartGameRequest
2026-01-16 02:31:12.735 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 72...
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [6H, 10C]
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [10D, 9C]
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [6C, 3P]
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:31:12.735 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 72 (POKER)
2026-01-16 02:31:12.735 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:31:12.735 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 72 by host 2
2026-01-16 02:31:18.382 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: PlayerActionPacket
2026-01-16 02:31:18.383 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 calls 500
2026-01-16 02:31:24.024 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: PlayerActionPacket
2026-01-16 02:31:24.024 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 1000
2026-01-16 02:31:35.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 02:31:35.317 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:31:35.317 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [QD, JH, 3D]
2026-01-16 02:31:38.753 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: PlayerActionPacket
2026-01-16 02:31:38.753 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:31:40.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: PlayerActionPacket
2026-01-16 02:31:40.484 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:31:43.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 02:31:43.249 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:31:43.249 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: 5D
2026-01-16 02:31:49.936 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: PlayerActionPacket
2026-01-16 02:31:49.936 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:31:51.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: PlayerActionPacket
2026-01-16 02:31:51.562 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:31:55.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 02:31:55.556 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:31:55.556 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 4C
2026-01-16 02:31:57.721 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: PlayerActionPacket
2026-01-16 02:31:57.722 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:31:59.825 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: PlayerActionPacket
2026-01-16 02:31:59.825 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:32:02.203 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 02:32:02.203 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:32:02.209 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has HIGH_CARD: [QD, JH, 10C, 6H, 5D]
2026-01-16 02:32:02.209 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has HIGH_CARD: [QD, JH, 10D, 9C, 5D]
2026-01-16 02:32:02.212 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has ONE_PAIR: [QD, JH, 6C, 3P, 3D]
2026-01-16 02:32:02.212 [Server] INFO  c.m.server.game.PokerGameSession - Winner: Player 4 with ONE_PAIR
2026-01-16 02:32:02.215 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: -500
2026-01-16 02:32:02.215 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: -500
2026-01-16 02:32:02.216 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: 1000
2026-01-16 02:32:02.216 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 72, winner: 4
2026-01-16 02:32:02.578 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 02:32:02.581 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 72
2026-01-16 02:32:02.581 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 72
2026-01-16 02:32:02.581 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 72 thành user 3
2026-01-16 02:32:02.581 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 72 từ 2 sang 3
2026-01-16 02:32:02.581 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 72 (còn lại 2 players)
2026-01-16 02:32:02.583 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 02:32:02.584 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 72
2026-01-16 02:32:02.584 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 72
2026-01-16 02:32:02.584 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 72 thành user 4
2026-01-16 02:32:02.584 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 72 từ 3 sang 4
2026-01-16 02:32:02.584 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 72 (còn lại 1 players)
2026-01-16 02:32:02.588 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 02:32:02.589 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 72
2026-01-16 02:32:02.589 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 72
2026-01-16 02:32:02.590 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 72
2026-01-16 02:32:02.590 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 72
2026-01-16 02:32:02.590 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 72 (còn lại 0 players)
2026-01-16 02:43:24.476 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:54040 (ID: 7)
2026-01-16 02:43:27.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LoginRequest
2026-01-16 02:43:27.716 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 7: username=123
2026-01-16 02:43:27.769 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:43:27.769 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 7
2026-01-16 02:43:27.769 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:43:28.143 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LeaderboardRequest
2026-01-16 02:43:28.143 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 7: limit=50
2026-01-16 02:43:28.143 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:43:28.143 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:43:28.143 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:28.144 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: MatchHistoryRequest
2026-01-16 02:43:28.144 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 7: userId=2, limit=5
2026-01-16 02:43:28.144 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:43:28.144 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:43:28.144 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: GetQuestsRequest
2026-01-16 02:43:28.144 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:43:28.144 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:43:28.146 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:43:28.526 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:29.031 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:29.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:30.037 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:30.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:30.899 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:54043 (ID: 8)
2026-01-16 02:43:31.043 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:31.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:32.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:32.547 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:33.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:33.212 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:54045 (ID: 9)
2026-01-16 02:43:33.548 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:34.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:34.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:35.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:35.557 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:36.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:36.558 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:37.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:37.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LoginRequest
2026-01-16 02:43:37.231 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 8: username=123123
2026-01-16 02:43:37.277 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:43:37.277 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 8
2026-01-16 02:43:37.277 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:43:37.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:37.634 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LeaderboardRequest
2026-01-16 02:43:37.634 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 8: limit=50
2026-01-16 02:43:37.635 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:43:37.635 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:43:37.635 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:37.636 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: MatchHistoryRequest
2026-01-16 02:43:37.636 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 8: userId=3, limit=5
2026-01-16 02:43:37.636 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:43:37.636 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:43:37.637 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: GetQuestsRequest
2026-01-16 02:43:37.637 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:43:37.637 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:43:37.638 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:43:38.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:38.066 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:38.545 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:38.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:39.049 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:39.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:39.551 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:39.572 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:40.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:40.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:40.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:40.574 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:41.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:41.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:41.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: LoginRequest
2026-01-16 02:43:41.200 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 9: username=123123123
2026-01-16 02:43:41.250 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:43:41.250 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 9
2026-01-16 02:43:41.250 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:43:41.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:41.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:41.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: LeaderboardRequest
2026-01-16 02:43:41.599 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 9: limit=50
2026-01-16 02:43:41.599 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:43:41.599 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:43:41.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:41.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: MatchHistoryRequest
2026-01-16 02:43:41.599 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 9: userId=4, limit=5
2026-01-16 02:43:41.599 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:43:41.599 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:43:41.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: GetQuestsRequest
2026-01-16 02:43:41.599 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:43:41.599 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:43:41.599 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:43:42.015 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:42.068 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:42.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:42.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:42.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:42.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:43.018 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:43.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:43.079 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:43.519 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:43.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:43.578 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 02:43:43.815 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: CreateRoomRequest
2026-01-16 02:43:43.817 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 73
2026-01-16 02:43:43.817 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 73)
2026-01-16 02:43:43.817 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 73 (position: 0)
2026-01-16 02:43:43.817 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 73)
2026-01-16 02:43:44.020 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:44.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:44.522 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:44.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:45.023 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:45.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:45.527 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:45.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 02:43:45.796 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: JoinRoomRequest
2026-01-16 02:43:45.797 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 73
2026-01-16 02:43:45.797 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 73 (position: 1)
2026-01-16 02:43:45.797 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 73
2026-01-16 02:43:46.029 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:46.527 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:47.030 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:47.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: JoinRoomRequest
2026-01-16 02:43:47.310 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 73
2026-01-16 02:43:47.310 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 73 (position: 2)
2026-01-16 02:43:47.310 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 73
2026-01-16 02:43:47.533 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: ListRoomsRequest
2026-01-16 02:43:49.015 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: StartGameRequest
2026-01-16 02:43:49.015 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 73...
2026-01-16 02:43:49.015 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:43:49.015 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:43:49.015 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [3D, 2P]
2026-01-16 02:43:49.015 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [8D, 10D]
2026-01-16 02:43:49.015 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [7H, KH]
2026-01-16 02:43:49.015 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:43:49.016 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 73 (POKER)
2026-01-16 02:43:49.016 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:43:49.016 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 73 by host 2
2026-01-16 02:44:05.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: PlayerActionPacket
2026-01-16 02:44:05.976 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 calls 500
2026-01-16 02:44:11.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: PlayerActionPacket
2026-01-16 02:44:11.709 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 1000
2026-01-16 02:44:18.788 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: PlayerActionPacket
2026-01-16 02:44:18.788 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:44:18.788 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [10H, AP, JP]
2026-01-16 02:44:31.640 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: PlayerActionPacket
2026-01-16 02:44:31.640 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 raises all-in to 9000
2026-01-16 02:44:39.633 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 9: PlayerActionPacket
2026-01-16 02:44:39.633 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 9000
2026-01-16 02:44:39.633 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: 7C
2026-01-16 02:44:46.142 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: PlayerActionPacket
2026-01-16 02:44:46.142 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:44:46.142 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 7D
2026-01-16 02:44:49.554 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: PlayerActionPacket
2026-01-16 02:44:49.554 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:44:49.555 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has ONE_PAIR: [AP, JP, 10H, 7C, 7D]
2026-01-16 02:44:49.557 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has TWO_PAIR: [AP, 10D, 10H, 7C, 7D]
2026-01-16 02:44:49.558 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has THREE_OF_A_KIND: [AP, KH, 7H, 7C, 7D]
2026-01-16 02:44:49.558 [Server] INFO  c.m.server.game.PokerGameSession - Winner: Player 4 with THREE_OF_A_KIND
2026-01-16 02:44:49.559 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: -500
2026-01-16 02:44:49.559 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: -500
2026-01-16 02:44:49.559 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: 1000
2026-01-16 02:44:49.560 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 73, winner: 4
2026-01-16 02:44:49.925 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 02:44:49.926 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 73
2026-01-16 02:44:49.926 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 73
2026-01-16 02:44:49.926 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 73 thành user 3
2026-01-16 02:44:49.926 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 73 từ 2 sang 3
2026-01-16 02:44:49.926 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 73 (còn lại 2 players)
2026-01-16 02:44:49.930 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 02:44:49.930 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 73
2026-01-16 02:44:49.930 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 73
2026-01-16 02:44:49.931 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 73 thành user 4
2026-01-16 02:44:49.931 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 73 từ 3 sang 4
2026-01-16 02:44:49.931 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 73 (còn lại 1 players)
2026-01-16 02:44:49.931 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 9)
2026-01-16 02:44:49.932 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 73
2026-01-16 02:44:49.932 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 73
2026-01-16 02:44:49.932 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 73
2026-01-16 02:44:49.932 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 73
2026-01-16 02:44:49.932 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 73 (còn lại 0 players)
2026-01-16 02:49:40.563 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:63206 (ID: 10)
2026-01-16 02:49:51.086 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:63216 (ID: 11)
2026-01-16 02:49:51.865 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:63217 (ID: 12)
2026-01-16 02:49:54.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: LoginRequest
2026-01-16 02:49:54.716 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 10: username=123
2026-01-16 02:49:54.766 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:49:54.767 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 10
2026-01-16 02:49:54.767 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:49:55.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: LeaderboardRequest
2026-01-16 02:49:55.119 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 10: limit=50
2026-01-16 02:49:55.119 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:49:55.122 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:49:55.122 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:55.122 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: MatchHistoryRequest
2026-01-16 02:49:55.122 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 10: userId=2, limit=5
2026-01-16 02:49:55.122 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:49:55.122 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:49:55.122 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: GetQuestsRequest
2026-01-16 02:49:55.122 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:49:55.122 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:49:55.122 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:49:55.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:56.030 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:56.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:57.037 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:57.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:58.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:58.548 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:58.747 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: LoginRequest
2026-01-16 02:49:58.747 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 11: username=123123
2026-01-16 02:49:58.796 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:49:58.797 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 11
2026-01-16 02:49:58.797 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:49:59.049 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:59.142 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: LeaderboardRequest
2026-01-16 02:49:59.142 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 11: limit=50
2026-01-16 02:49:59.142 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:49:59.142 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:49:59.142 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:49:59.145 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: MatchHistoryRequest
2026-01-16 02:49:59.145 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 11: userId=3, limit=5
2026-01-16 02:49:59.145 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:49:59.145 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:49:59.145 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: GetQuestsRequest
2026-01-16 02:49:59.145 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:49:59.146 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:49:59.146 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:49:59.551 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:49:59.551 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:00.053 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:00.055 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:00.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:00.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:01.057 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:01.059 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:01.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:01.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:02.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:02.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:02.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:02.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:03.067 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:03.070 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:03.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:03.573 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:04.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:04.076 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:04.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:04.579 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:05.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:05.082 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:05.267 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: LoginRequest
2026-01-16 02:50:05.267 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 12: username=123123123
2026-01-16 02:50:05.316 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:50:05.318 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 12
2026-01-16 02:50:05.318 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:50:05.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:05.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:05.657 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: LeaderboardRequest
2026-01-16 02:50:05.657 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 12: limit=50
2026-01-16 02:50:05.657 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:50:05.657 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:50:05.657 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:05.657 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: MatchHistoryRequest
2026-01-16 02:50:05.657 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 12: userId=4, limit=5
2026-01-16 02:50:05.666 [Server] ERROR c.m.server.database.MatchHistoryDAO - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:50:05.666 [Server] ERROR c.m.s.handlers.MatchHistoryHandler - Lỗi khi lấy match history: ERROR: column "id" does not exist
  Position: 8
org.postgresql.util.PSQLException: ERROR: column "id" does not exist
  Position: 8
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.mygame.server.database.MatchHistoryDAO.getRecentMatches(MatchHistoryDAO.java:69)
	at com.mygame.server.handlers.MatchHistoryHandler.handle(MatchHistoryHandler.java:33)
	at com.mygame.server.ServerListener$1.received(ServerListener.java:89)
	at com.esotericsoftware.kryonet.Server$1.received(Server.java:101)
	at com.esotericsoftware.kryonet.Connection.notifyReceived(Connection.java:368)
	at com.esotericsoftware.kryonet.Server.update(Server.java:318)
	at com.esotericsoftware.kryonet.Server.run(Server.java:538)
	at java.base/java.lang.Thread.run(Thread.java:842)
2026-01-16 02:50:05.666 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: GetQuestsRequest
2026-01-16 02:50:05.666 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:50:05.666 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:50:05.667 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:50:06.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:06.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:06.086 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:06.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:06.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:06.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:07.077 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:07.086 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:07.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:07.583 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:07.588 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:07.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:08.083 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:08.092 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:08.095 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:08.428 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: CreateRoomRequest
2026-01-16 02:50:08.430 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 74
2026-01-16 02:50:08.430 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 74)
2026-01-16 02:50:08.431 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 74 (position: 0)
2026-01-16 02:50:08.431 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 74)
2026-01-16 02:50:08.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:08.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:08.595 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: ListRoomsRequest
2026-01-16 02:50:09.088 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:09.096 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:09.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:09.597 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:10.095 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:10.096 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:10.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:10.599 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:11.097 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:11.101 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:11.597 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:11.603 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:12.100 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:12.105 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:12.596 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:12.607 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:13.107 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:13.109 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:13.608 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:13.613 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:14.114 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:14.117 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:14.617 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:14.619 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:15.117 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:15.120 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:15.619 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:15.623 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:15.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: JoinRoomRequest
2026-01-16 02:50:15.977 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 74
2026-01-16 02:50:15.977 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 74 (position: 1)
2026-01-16 02:50:15.977 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 74
2026-01-16 02:50:16.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:16.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: ListRoomsRequest
2026-01-16 02:50:16.626 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:17.127 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:17.630 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:18.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:18.636 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: ListRoomsRequest
2026-01-16 02:50:18.836 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: JoinRoomRequest
2026-01-16 02:50:18.837 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 74
2026-01-16 02:50:18.838 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 74 (position: 2)
2026-01-16 02:50:18.838 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 74
2026-01-16 02:50:20.236 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: StartGameRequest
2026-01-16 02:50:20.236 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 74...
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [4H, 8H]
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [10C, 2D]
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [AC, 7D]
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:50:20.236 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 74 (POKER)
2026-01-16 02:50:20.236 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:50:20.237 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 74 by host 2
2026-01-16 02:50:34.615 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:50:34.616 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 raises all-in to 9500
2026-01-16 02:50:41.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: PlayerActionPacket
2026-01-16 02:50:41.981 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 9500
2026-01-16 02:50:45.524 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: PlayerActionPacket
2026-01-16 02:50:45.524 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 8500
2026-01-16 02:50:50.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:51:04.070 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: PlayerActionPacket
2026-01-16 02:51:09.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: PlayerActionPacket
2026-01-16 02:51:12.657 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:51:17.108 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: PlayerActionPacket
2026-01-16 02:51:25.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: PlayerActionPacket
2026-01-16 02:51:25.179 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 500
2026-01-16 02:51:30.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:51:33.753 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: PlayerActionPacket
2026-01-16 02:51:37.156 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: PlayerActionPacket
2026-01-16 02:51:37.157 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 8500
2026-01-16 02:51:42.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:51:42.560 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:51:46.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: PlayerActionPacket
2026-01-16 02:51:46.119 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:51:51.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: PlayerActionPacket
2026-01-16 02:51:51.881 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 500
2026-01-16 02:51:55.713 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:51:55.713 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:51:58.631 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 12: PlayerActionPacket
2026-01-16 02:51:58.631 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:52:02.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 10: PlayerActionPacket
2026-01-16 02:52:02.172 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 8500
2026-01-16 02:52:04.514 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 11: PlayerActionPacket
2026-01-16 02:52:04.514 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:52:07.399 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 11)
2026-01-16 02:52:07.401 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 74
2026-01-16 02:52:07.401 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 74
2026-01-16 02:52:07.401 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 74 (còn lại 2 players)
2026-01-16 02:52:08.271 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 12)
2026-01-16 02:52:08.272 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 74
2026-01-16 02:52:08.272 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 74
2026-01-16 02:52:08.272 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 74 (còn lại 1 players)
2026-01-16 02:52:11.385 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 10)
2026-01-16 02:52:11.388 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 74
2026-01-16 02:52:11.388 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 74
2026-01-16 02:52:11.388 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 74
2026-01-16 02:52:11.388 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 74
2026-01-16 02:52:11.388 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 74 (còn lại 0 players)
2026-01-16 02:53:43.784 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 02:53:44.071 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 02:53:44.112 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 02:53:44.112 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 02:53:44.112 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 02:53:44.112 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 02:53:44.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 02:53:44.116 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 02:53:44.119 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 02:53:44.122 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 02:53:44.122 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 02:53:44.122 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 02:53:44.131 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 02:53:44.131 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 02:53:44.131 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 02:53:44.131 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 02:53:44.131 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 02:53:44.196 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 02:53:44.210 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 02:53:44.219 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 02:53:44.219 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 02:53:44.219 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 02:53:50.805 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57878 (ID: 1)
2026-01-16 02:53:55.205 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 02:53:55.205 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 02:53:55.270 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:53:55.273 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 02:53:55.273 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:53:55.623 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 02:53:55.623 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 02:53:55.627 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:53:55.627 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:53:55.627 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:55.631 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 02:53:55.631 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 02:53:55.634 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 02:53:55.634 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 02:53:55.634 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:53:55.636 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:53:55.636 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:53:56.029 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:56.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:57.036 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:57.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:58.038 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:58.190 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57882 (ID: 2)
2026-01-16 02:53:58.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:59.037 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:59.547 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:53:59.663 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57883 (ID: 3)
2026-01-16 02:54:00.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:00.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:01.049 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:01.552 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:02.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:02.548 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:03.057 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:03.557 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:04.059 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:04.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:05.057 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:05.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:06.058 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:06.327 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 02:54:06.327 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 02:54:06.377 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:54:06.377 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 02:54:06.377 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:54:06.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:06.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 02:54:06.720 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 02:54:06.720 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:54:06.720 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:54:06.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:06.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 02:54:06.720 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 02:54:06.720 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 02:54:06.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 02:54:06.720 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:54:06.724 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:54:06.724 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:54:07.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:07.135 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:07.572 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:07.636 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:08.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:08.136 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:08.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:08.641 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:09.076 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:09.144 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:09.579 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:09.646 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:10.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:10.146 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:10.385 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 02:54:10.386 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 02:54:10.436 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:54:10.436 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 02:54:10.436 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:54:10.583 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:10.647 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:10.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 02:54:10.778 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 02:54:10.778 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:54:10.778 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:54:10.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:10.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 02:54:10.778 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 02:54:10.785 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 02:54:10.785 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 02:54:10.785 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:54:10.785 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:54:10.786 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:54:11.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:11.151 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:11.195 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:11.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:11.652 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:11.698 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:12.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:12.154 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:12.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:12.587 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:12.657 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:12.698 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:13.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:13.157 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:13.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:13.595 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:13.656 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:13.697 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:14.098 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:14.164 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:14.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:14.598 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:14.664 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:14.704 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:15.100 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:54:15.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:15.207 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:15.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 02:54:15.296 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 75
2026-01-16 02:54:15.296 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 75)
2026-01-16 02:54:15.300 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 75 (position: 0)
2026-01-16 02:54:15.300 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 75)
2026-01-16 02:54:15.666 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:15.707 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:16.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:16.209 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:16.669 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:16.707 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:17.176 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:17.211 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:17.679 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:17.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:18.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:18.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:18.658 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 02:54:18.660 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 75
2026-01-16 02:54:18.660 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 75 (position: 1)
2026-01-16 02:54:18.660 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 75
2026-01-16 02:54:18.682 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:54:18.719 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:19.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:19.726 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:20.225 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:20.635 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 02:54:20.637 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 75
2026-01-16 02:54:20.637 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 75 (position: 2)
2026-01-16 02:54:20.637 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 75
2026-01-16 02:54:20.727 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:54:23.982 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 02:54:23.982 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 75...
2026-01-16 02:54:23.985 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 109000
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 69000
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 72000
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [10D, 2D]
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [5C, 8H]
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [3D, 8C]
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:54:23.986 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 75 (POKER)
2026-01-16 02:54:23.986 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:54:23.986 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 75 by host 2
2026-01-16 02:54:36.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:54:36.506 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 calls 500
2026-01-16 02:54:39.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:54:39.827 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 1000
2026-01-16 02:54:42.192 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:54:42.192 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:54:42.195 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [2P, 7C, JH]
2026-01-16 02:54:44.251 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:54:44.251 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:54:45.548 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:54:45.548 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:54:46.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:54:46.976 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:54:46.977 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: 9H
2026-01-16 02:54:50.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:54:50.047 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:54:51.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:54:51.476 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:54:53.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:54:53.260 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:54:53.260 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: JD
2026-01-16 02:54:54.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:54:54.713 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:54:55.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:54:55.977 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:54:57.897 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:54:57.897 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:54:57.902 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has TWO_PAIR: [JH, JD, 10D, 2D, 2P]
2026-01-16 02:54:57.902 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has ONE_PAIR: [JH, JD, 9H, 8H, 7C]
2026-01-16 02:54:57.902 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has ONE_PAIR: [JH, JD, 9H, 8C, 7C]
2026-01-16 02:54:57.902 [Server] INFO  c.m.server.game.PokerGameSession - Winner: Player 2 with TWO_PAIR
2026-01-16 02:54:57.904 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: 1000
2026-01-16 02:54:57.905 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: -500
2026-01-16 02:54:57.906 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: -500
2026-01-16 02:54:57.906 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 75, winner: 2
2026-01-16 02:54:58.274 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 02:54:58.276 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 75
2026-01-16 02:54:58.276 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 75
2026-01-16 02:54:58.277 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 75 thành user 3
2026-01-16 02:54:58.277 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 75 từ 2 sang 3
2026-01-16 02:54:58.277 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 75 (còn lại 2 players)
2026-01-16 02:54:58.277 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 02:54:58.278 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 75
2026-01-16 02:54:58.278 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 75
2026-01-16 02:54:58.278 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 75 (còn lại 1 players)
2026-01-16 02:54:58.278 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 02:54:58.278 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 75
2026-01-16 02:54:58.278 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 75
2026-01-16 02:54:58.279 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 75
2026-01-16 02:54:58.279 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 75
2026-01-16 02:54:58.279 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 75 (còn lại 0 players)
2026-01-16 02:57:55.856 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 02:57:56.026 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 02:57:56.056 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 02:57:56.057 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 02:57:56.057 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 02:57:56.057 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 02:57:56.057 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 02:57:56.057 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 02:57:56.057 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 02:57:56.057 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 02:57:56.057 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 02:57:56.057 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 02:57:56.064 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 02:57:56.064 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 02:57:56.064 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 02:57:56.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 02:57:56.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 02:57:56.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 02:57:56.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 02:57:56.065 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 02:57:56.067 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 02:57:56.070 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 02:57:56.070 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 02:57:56.070 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 02:57:56.070 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 02:57:56.070 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 02:57:56.141 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 02:57:56.150 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 02:57:56.157 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 02:57:56.157 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 02:57:56.157 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 02:58:04.115 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:60483 (ID: 1)
2026-01-16 02:58:09.441 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 02:58:09.441 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 02:58:09.508 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 02:58:09.511 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 02:58:09.511 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 02:58:09.872 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 02:58:09.873 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 02:58:09.874 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:58:09.874 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:58:09.874 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:09.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 02:58:09.878 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 02:58:09.880 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 02:58:09.880 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 02:58:09.880 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 02:58:09.884 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 02:58:09.884 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 02:58:10.272 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:10.346 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:60486 (ID: 2)
2026-01-16 02:58:10.772 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:11.278 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:11.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:12.279 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:12.486 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:60487 (ID: 3)
2026-01-16 02:58:12.781 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:13.287 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:13.790 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:14.289 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:14.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:15.294 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:15.790 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:16.299 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:16.800 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:17.300 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:17.610 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 02:58:17.610 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 02:58:17.659 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 02:58:17.659 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 02:58:17.659 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 02:58:17.802 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:17.999 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 02:58:17.999 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 02:58:17.999 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:58:17.999 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:58:17.999 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:17.999 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 02:58:17.999 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 02:58:17.999 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 02:58:17.999 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 02:58:17.999 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 02:58:18.006 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 02:58:18.007 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 02:58:18.306 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:18.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:18.808 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:18.919 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:19.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:19.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:19.815 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:19.920 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:20.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:20.423 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:20.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:20.928 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:21.090 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 02:58:21.090 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 02:58:21.142 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 02:58:21.142 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 02:58:21.142 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 02:58:21.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:21.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:21.498 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 02:58:21.498 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 02:58:21.498 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 02:58:21.499 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 02:58:21.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:21.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 02:58:21.499 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 02:58:21.499 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 02:58:21.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 02:58:21.499 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 02:58:21.499 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 02:58:21.501 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 02:58:21.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:21.906 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:21.934 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:22.325 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:22.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:22.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:22.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:22.910 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:22.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:23.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:23.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:23.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:23.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:23.918 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:23.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:24.334 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:24.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:24.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:24.838 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 02:58:24.843 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 76
2026-01-16 02:58:24.843 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 76)
2026-01-16 02:58:24.846 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 76 (position: 0)
2026-01-16 02:58:24.846 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 76)
2026-01-16 02:58:24.848 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 02:58:24.921 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:24.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:25.428 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:25.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:25.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:25.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:26.429 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:26.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:26.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:26.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:27.431 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:27.451 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:27.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:27.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 02:58:27.942 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 76
2026-01-16 02:58:27.942 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 76 (position: 1)
2026-01-16 02:58:27.942 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 76
2026-01-16 02:58:27.955 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 02:58:28.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:28.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:29.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:29.949 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:30.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 02:58:30.552 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 02:58:30.555 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 76
2026-01-16 02:58:30.555 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 76 (position: 2)
2026-01-16 02:58:30.555 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 76
2026-01-16 02:58:33.178 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 02:58:33.178 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 76...
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 110000
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 68500
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 71500
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [3C, 7C]
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [9P, 4P]
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [10H, 10P]
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 02:58:33.182 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 76 (POKER)
2026-01-16 02:58:33.182 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 02:58:33.182 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 76 by host 2
2026-01-16 02:58:40.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:58:40.379 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 raises to 10000
2026-01-16 02:59:38.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:59:38.975 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 10000
2026-01-16 02:59:40.861 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:59:40.861 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 9000
2026-01-16 02:59:40.865 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [5D, 3H, KC]
2026-01-16 02:59:45.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:59:45.571 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:59:47.489 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:59:47.489 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:59:49.699 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:59:49.699 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:59:49.699 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: 6P
2026-01-16 02:59:52.764 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:59:52.764 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:59:54.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:59:54.208 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 02:59:56.301 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 02:59:56.301 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 02:59:56.301 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: AH
2026-01-16 02:59:58.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 02:59:58.257 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 02:59:59.370 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 02:59:59.370 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:00:01.033 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:00:01.033 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:00:01.038 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has ONE_PAIR: [AH, KC, 7C, 3C, 3H]
2026-01-16 03:00:01.038 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has HIGH_CARD: [AH, KC, 9P, 6P, 5D]
2026-01-16 03:00:01.039 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has ONE_PAIR: [AH, KC, 10H, 10P, 6P]
2026-01-16 03:00:01.039 [Server] INFO  c.m.server.game.PokerGameSession - Winner: Player 4 with ONE_PAIR
2026-01-16 03:00:01.040 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: -500
2026-01-16 03:00:01.042 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: -500
2026-01-16 03:00:01.042 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: 1000
2026-01-16 03:00:01.042 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 76, winner: 4
2026-01-16 03:00:17.302 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 03:00:17.302 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 76
2026-01-16 03:00:17.302 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 76
2026-01-16 03:00:17.302 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 76 thành user 3
2026-01-16 03:00:17.302 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 76 từ 2 sang 3
2026-01-16 03:00:17.302 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 76 (còn lại 2 players)
2026-01-16 03:00:18.352 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 03:00:18.352 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 76
2026-01-16 03:00:18.352 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 76
2026-01-16 03:00:18.352 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 76 thành user 4
2026-01-16 03:00:18.352 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 76 từ 3 sang 4
2026-01-16 03:00:18.352 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 76 (còn lại 1 players)
2026-01-16 03:00:19.092 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 03:00:19.093 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 76
2026-01-16 03:00:19.093 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 76
2026-01-16 03:00:19.093 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 76
2026-01-16 03:00:19.093 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 76
2026-01-16 03:00:19.093 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 76 (còn lại 0 players)
2026-01-16 03:07:33.989 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 03:07:34.160 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 03:07:34.194 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 03:07:34.195 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 03:07:34.195 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 03:07:34.195 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 03:07:34.196 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 03:07:34.196 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 03:07:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 03:07:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 03:07:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 03:07:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 03:07:34.201 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 03:07:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 03:07:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 03:07:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 03:07:34.203 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 03:07:34.204 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 03:07:34.204 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 03:07:34.204 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 03:07:34.206 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 03:07:34.206 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 03:07:34.212 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 03:07:34.212 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 03:07:34.212 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 03:07:34.212 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 03:07:34.280 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 03:07:34.287 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 03:07:34.295 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 03:07:34.295 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 03:07:34.295 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 03:07:49.097 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53954 (ID: 1)
2026-01-16 03:07:49.935 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53955 (ID: 2)
2026-01-16 03:07:51.413 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53956 (ID: 3)
2026-01-16 03:07:54.076 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 03:07:54.076 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 03:07:54.154 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 03:07:54.155 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 03:07:54.155 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 03:07:54.501 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 03:07:54.501 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 03:07:54.504 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:07:54.504 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:07:54.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:54.507 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 03:07:54.508 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 03:07:54.510 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:07:54.510 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 03:07:54.510 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:07:54.513 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:07:54.514 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:07:54.915 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:55.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:55.512 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 03:07:55.512 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 03:07:55.512 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:07:55.921 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:56.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:56.924 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:57.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:57.927 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:58.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:58.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:59.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:07:59.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:00.434 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:00.558 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 03:08:00.560 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 03:08:00.627 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 03:08:00.628 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 03:08:00.628 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 03:08:00.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:00.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 03:08:00.976 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 03:08:00.976 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:08:00.976 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:08:00.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:00.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 03:08:00.978 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 03:08:00.978 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:08:00.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 03:08:00.978 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 03:08:00.979 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 03:08:00.979 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 03:08:01.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:01.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:01.889 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:01.939 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:02.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:02.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:02.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:02.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:03.396 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:03.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:03.896 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:03.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:04.399 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:04.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:04.902 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:04.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:05.405 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:05.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:05.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 03:08:05.556 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 03:08:05.626 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 03:08:05.626 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 03:08:05.626 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 03:08:05.905 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:05.951 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:05.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 03:08:05.983 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 03:08:05.984 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:08:05.984 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:08:05.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:05.985 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 03:08:05.985 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 03:08:05.986 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:08:05.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 03:08:05.986 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 03:08:05.986 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 03:08:05.987 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 03:08:06.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:06.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:06.455 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:06.892 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:06.908 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:06.955 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:07.395 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:07.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:07.459 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:07.895 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:07.911 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:07.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:08.399 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:08.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:08.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:08.898 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:08.918 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:08.971 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:09.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:09.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:09.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:09.904 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:09.921 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:09.974 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:10.405 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:10.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:10.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:10.905 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:10.920 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:10.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:11.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:11.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:11.480 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:11.912 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:11.924 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:11.980 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:12.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:12.426 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:12.483 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:12.917 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:12.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:12.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:13.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:13.431 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:13.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:13.923 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:13.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:13.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:14.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:14.433 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:14.495 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:14.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:14.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:14.995 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:15.433 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:15.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:15.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:08:15.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 03:08:15.713 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 77
2026-01-16 03:08:15.713 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 77)
2026-01-16 03:08:15.716 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 77 (position: 0)
2026-01-16 03:08:15.716 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 77)
2026-01-16 03:08:15.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:15.936 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:16.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:16.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:16.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:16.942 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:17.442 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:17.445 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:17.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:17.949 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:18.445 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:18.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:18.949 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:18.952 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:19.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:19.454 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:19.952 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:19.955 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:20.243 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 03:08:20.244 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 77
2026-01-16 03:08:20.244 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 77 (position: 1)
2026-01-16 03:08:20.244 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 77
2026-01-16 03:08:20.454 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:20.455 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:08:20.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:21.458 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:21.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:22.461 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:22.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:23.480 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:23.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:24.483 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:24.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:25.488 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:25.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:08:26.202 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 03:08:26.204 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 77
2026-01-16 03:08:26.204 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 77 (position: 2)
2026-01-16 03:08:26.204 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 77
2026-01-16 03:08:28.489 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 03:08:28.490 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 77...
2026-01-16 03:08:28.493 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 109500
2026-01-16 03:08:28.493 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 68000
2026-01-16 03:08:28.493 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 72500
2026-01-16 03:08:28.493 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 03:08:28.494 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 03:08:28.494 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [QD, 5H]
2026-01-16 03:08:28.494 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [QC, 4D]
2026-01-16 03:08:28.494 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [8P, JD]
2026-01-16 03:08:28.494 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 03:08:28.495 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 77 (POKER)
2026-01-16 03:08:28.495 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 03:08:28.495 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 77 by host 2
2026-01-16 03:08:52.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:08:52.976 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 raises all-in to 67500
2026-01-16 03:08:59.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:08:59.740 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 67500
2026-01-16 03:09:04.850 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:09:04.850 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 66500
2026-01-16 03:09:04.851 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [9P, JH, KP]
2026-01-16 03:09:17.102 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:09:17.102 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:09:21.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:09:21.239 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:09:23.951 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:09:23.952 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:09:23.952 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: AH
2026-01-16 03:09:26.145 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:09:26.145 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:09:27.601 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:09:27.601 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:09:30.660 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:09:30.660 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:09:30.661 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 10P
2026-01-16 03:09:32.995 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:09:32.995 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:09:34.466 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:09:34.467 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:09:35.991 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:09:35.991 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:09:35.997 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has STRAIGHT: [AH, KP, QD, JH, 10P]
2026-01-16 03:09:35.998 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has STRAIGHT: [AH, KP, QC, JH, 10P]
2026-01-16 03:09:35.999 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has ONE_PAIR: [AH, KP, JD, JH, 10P]
2026-01-16 03:09:35.999 [Server] INFO  c.m.server.game.PokerGameSession - Total pots: 1 (main pot value: 202500)
2026-01-16 03:09:35.999 [Server] INFO  c.m.server.game.PokerGameSession - Main pot (202500) won by Player 2 with STRAIGHT
2026-01-16 03:09:35.999 [Server] INFO  c.m.server.game.PokerGameSession - Game finished. Overall winner: Player 2
2026-01-16 03:09:36.001 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 03:09:36.003 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 77
2026-01-16 03:09:36.003 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 77
2026-01-16 03:09:36.003 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 77 thành user 3
2026-01-16 03:09:36.003 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 77 từ 2 sang 3
2026-01-16 03:09:36.003 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 77 (còn lại 2 players)
2026-01-16 03:18:38.107 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 03:18:38.279 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 03:18:38.316 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 03:18:38.318 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 03:18:38.318 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 03:18:38.318 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 03:18:38.320 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 03:18:38.324 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 03:18:38.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 03:18:38.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 03:18:38.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 03:18:38.328 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 03:18:38.328 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 03:18:38.328 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 03:18:38.329 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 03:18:38.335 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 03:18:38.335 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 03:18:38.335 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 03:18:38.335 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 03:18:38.335 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 03:18:38.408 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 03:18:38.419 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 03:18:38.426 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 03:18:38.426 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 03:18:38.426 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 03:18:49.542 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49669 (ID: 1)
2026-01-16 03:18:52.035 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49671 (ID: 2)
2026-01-16 03:18:53.521 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49672 (ID: 3)
2026-01-16 03:18:56.010 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 03:18:56.010 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 03:18:56.093 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 03:18:56.095 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 03:18:56.095 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 03:18:56.441 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 03:18:56.441 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 03:18:56.442 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:18:56.444 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:18:56.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:56.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 03:18:56.450 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 03:18:56.452 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:18:56.453 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 03:18:56.453 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:18:56.455 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:18:56.457 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:18:56.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:57.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:57.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:58.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:58.859 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:59.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:18:59.623 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 03:18:59.623 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 03:18:59.690 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 03:18:59.690 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 03:18:59.690 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 03:18:59.860 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:00.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 03:19:00.047 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 03:19:00.047 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:19:00.047 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:19:00.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:00.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 03:19:00.048 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 03:19:00.050 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:19:00.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 03:19:00.050 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 03:19:00.051 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 03:19:00.051 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 03:19:00.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:00.453 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:00.862 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:00.953 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:01.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:01.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:01.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:01.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:02.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:02.459 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:02.872 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:02.959 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:03.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:03.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:03.532 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 03:19:03.532 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 03:19:03.601 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 03:19:03.602 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 03:19:03.602 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 03:19:03.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:03.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 03:19:03.946 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 03:19:03.946 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:19:03.946 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:19:03.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:03.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 03:19:03.946 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 03:19:03.946 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:19:03.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 03:19:03.946 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 03:19:03.949 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 03:19:03.949 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 03:19:03.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:04.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:04.378 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:04.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:04.859 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:04.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:04.968 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:05.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:05.384 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:05.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:05.862 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:05.884 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:05.972 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:06.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:06.390 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:06.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:06.869 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:06.890 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:06.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:07.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:07.394 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:07.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:07.872 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:07.894 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:07.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:08.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:08.398 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:08.480 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:08.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:08.900 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:08.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:09.381 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:09.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:09.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:09.884 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:09.903 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:09.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:10.387 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:10.403 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:19:10.487 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:10.601 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 03:19:10.605 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 78
2026-01-16 03:19:10.605 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 12 (ID: 78)
2026-01-16 03:19:10.607 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 78 (position: 0)
2026-01-16 03:19:10.607 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 12 (ID: 78)
2026-01-16 03:19:10.888 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:10.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:11.390 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:11.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:11.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:11.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:12.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:12.493 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:12.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:12.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:13.397 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:13.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:13.897 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:13.925 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 03:19:13.926 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 78
2026-01-16 03:19:13.926 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 78 (position: 1)
2026-01-16 03:19:13.926 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 78
2026-01-16 03:19:14.002 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:19:14.397 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:14.900 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:15.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:15.903 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:19:16.131 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 03:19:16.133 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 78
2026-01-16 03:19:16.133 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 78 (position: 2)
2026-01-16 03:19:16.133 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 78
2026-01-16 03:19:18.397 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 03:19:18.398 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 78...
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 109500
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 68000
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 72500
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [KP, 3H]
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [9P, 5P]
2026-01-16 03:19:18.400 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [4H, KH]
2026-01-16 03:19:18.401 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 03:19:18.401 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 78 (POKER)
2026-01-16 03:19:18.401 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 03:19:18.401 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 78 by host 2
2026-01-16 03:19:33.070 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:19:33.070 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 raises all-in to 67500
2026-01-16 03:19:39.361 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:19:39.361 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 67500
2026-01-16 03:19:41.404 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:19:41.404 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 calls 66500
2026-01-16 03:19:41.406 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [9C, 7P, AH]
2026-01-16 03:19:44.653 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:19:44.653 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:19:46.297 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:19:46.297 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:19:48.225 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:19:48.225 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:19:48.225 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: AP
2026-01-16 03:19:50.193 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:19:50.193 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:19:51.337 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:19:51.337 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:19:52.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:19:52.865 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:19:52.866 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 10H
2026-01-16 03:19:56.268 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:19:56.269 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:19:57.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:19:57.569 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:19:58.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:19:58.943 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:19:58.949 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has ONE_PAIR: [AH, AP, KP, 10H, 9C]
2026-01-16 03:19:58.950 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has TWO_PAIR: [AH, AP, 10H, 9P, 9C]
2026-01-16 03:19:58.951 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has ONE_PAIR: [AH, AP, KH, 10H, 9C]
2026-01-16 03:19:58.951 [Server] INFO  c.m.server.game.PokerGameSession - Total pots: 1 (main pot value: 202500)
2026-01-16 03:19:58.951 [Server] INFO  c.m.server.game.PokerGameSession - Main pot (202500) won by Player 3 with TWO_PAIR
2026-01-16 03:19:58.951 [Server] INFO  c.m.server.game.PokerGameSession - Game finished. Overall winner: Player 3
2026-01-16 03:19:58.951 [Server] DEBUG c.m.server.game.PokerGameSession - Player 2 credit change: 42000 - 109500 = -67500
2026-01-16 03:19:58.951 [Server] DEBUG c.m.server.game.PokerGameSession - Player 3 credit change: 203000 - 68000 = 135000
2026-01-16 03:19:58.951 [Server] DEBUG c.m.server.game.PokerGameSession - Player 4 credit change: 5000 - 72500 = -67500
2026-01-16 03:19:58.954 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: -67500
2026-01-16 03:19:58.954 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 2: -67500
2026-01-16 03:19:58.954 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: 135000
2026-01-16 03:19:58.954 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 3: 135000
2026-01-16 03:19:58.954 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: -67500
2026-01-16 03:19:58.954 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 4: -67500
2026-01-16 03:19:58.955 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 78, winner: 3
2026-01-16 03:20:11.143 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 03:20:11.144 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 78
2026-01-16 03:20:11.144 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 78
2026-01-16 03:20:11.145 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 78 thành user 3
2026-01-16 03:20:11.145 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 78 từ 2 sang 3
2026-01-16 03:20:11.145 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 78 (còn lại 2 players)
2026-01-16 03:20:14.270 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 03:20:14.272 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 78
2026-01-16 03:20:14.272 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 78
2026-01-16 03:20:14.273 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 78 thành user 4
2026-01-16 03:20:14.273 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 78 từ 3 sang 4
2026-01-16 03:20:14.273 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 78 (còn lại 1 players)
2026-01-16 03:20:15.319 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 03:20:15.320 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 78
2026-01-16 03:20:15.320 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 78
2026-01-16 03:20:15.321 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 78
2026-01-16 03:20:15.322 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 78
2026-01-16 03:20:15.322 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 78 (còn lại 0 players)
2026-01-16 03:20:21.189 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50282 (ID: 4)
2026-01-16 03:20:26.133 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 03:20:26.134 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=123
2026-01-16 03:20:26.182 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 03:20:26.183 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 4
2026-01-16 03:20:26.183 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 03:20:26.529 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 03:20:26.529 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 03:20:26.530 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:20:26.530 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:20:26.530 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:26.530 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 03:20:26.530 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=2, limit=5
2026-01-16 03:20:26.530 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:20:26.531 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 03:20:26.531 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:20:26.531 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:20:26.532 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:20:26.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:27.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:27.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:28.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:28.952 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:29.454 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:29.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:30.461 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:30.964 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:31.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:31.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:32.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:32.973 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:33.473 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:33.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:34.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:34.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:35.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:35.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:36.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:36.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:37.489 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:37.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:38.492 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:38.995 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 03:20:39.608 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 03:27:34.311 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 03:27:34.499 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 03:27:34.525 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 03:27:34.525 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 03:27:34.525 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 03:27:34.525 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 03:27:34.534 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 03:27:34.535 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 03:27:34.536 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 03:27:34.546 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 03:27:34.548 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 03:27:34.548 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 03:27:34.548 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 03:27:34.548 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 03:27:34.616 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 03:27:34.626 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 03:27:34.630 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 03:27:34.630 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 03:27:34.630 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 03:27:46.943 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49947 (ID: 1)
2026-01-16 03:27:49.484 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49948 (ID: 2)
2026-01-16 03:27:50.592 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 03:27:50.592 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 03:27:50.673 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 03:27:50.677 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 03:27:50.677 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 03:27:50.711 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49949 (ID: 3)
2026-01-16 03:27:51.028 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 03:27:51.030 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 03:27:51.030 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:27:51.030 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:27:51.030 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:51.035 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 03:27:51.035 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 03:27:51.038 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:27:51.038 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 03:27:51.038 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:27:51.038 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:27:51.044 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:27:51.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:51.941 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:52.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:52.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:53.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:53.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:54.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:54.952 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:55.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:55.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:56.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:56.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:57.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:57.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:58.468 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:58.473 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 03:27:58.473 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123123
2026-01-16 03:27:58.541 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 03:27:58.541 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 2
2026-01-16 03:27:58.541 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 03:27:58.887 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 03:27:58.887 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 03:27:58.887 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:27:58.889 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:27:58.889 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:27:58.889 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 03:27:58.889 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=4, limit=5
2026-01-16 03:27:58.890 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:27:58.890 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 03:27:58.890 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 03:27:58.891 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 03:27:58.891 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 03:27:58.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:59.300 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:27:59.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:27:59.803 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:27:59.971 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:00.306 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:00.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:00.809 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:00.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:01.310 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:01.475 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:01.812 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:01.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:02.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:02.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:02.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:02.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:03.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:03.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:03.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:03.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:04.321 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:04.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:04.541 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 03:28:04.541 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123
2026-01-16 03:28:04.611 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 03:28:04.611 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 3
2026-01-16 03:28:04.611 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 03:28:04.825 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:04.961 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 03:28:04.961 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 03:28:04.961 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:28:04.962 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:28:04.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:04.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 03:28:04.962 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=3, limit=5
2026-01-16 03:28:04.962 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:28:04.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 03:28:04.963 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 03:28:04.963 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 03:28:04.963 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 03:28:04.984 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:05.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:05.372 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:05.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:05.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:05.875 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:05.987 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:06.334 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:06.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:06.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:06.837 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:06.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:06.993 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:07.340 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:07.381 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:07.493 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:07.843 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:07.884 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:07.996 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:08.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:08.387 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:08.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:08.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:08.887 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:08.999 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:09.350 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:09.390 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:09.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:09.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:09.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:10.000 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:10.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:10.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:10.503 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:10.859 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:10.896 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:11.005 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:11.160 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 03:28:11.165 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 79
2026-01-16 03:28:11.165 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 79)
2026-01-16 03:28:11.169 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 79 (position: 0)
2026-01-16 03:28:11.169 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 79)
2026-01-16 03:28:11.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:11.396 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:11.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:11.896 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:12.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:12.400 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:12.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:12.903 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:13.385 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:13.403 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:13.635 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 03:28:13.636 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 79
2026-01-16 03:28:13.636 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 79 (position: 1)
2026-01-16 03:28:13.636 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 79
2026-01-16 03:28:13.887 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:13.906 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:14.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:14.909 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:15.284 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 03:28:15.286 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 79
2026-01-16 03:28:15.287 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 79 (position: 2)
2026-01-16 03:28:15.287 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 79
2026-01-16 03:28:15.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:16.916 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 03:28:16.916 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 79...
2026-01-16 03:28:16.920 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 42000
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 5000
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 203000
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 posts SB: 500
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [4H, 2C]
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [AH, 8H]
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [5H, 10H]
2026-01-16 03:28:16.921 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 4
2026-01-16 03:28:16.922 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 79 (POKER)
2026-01-16 03:28:16.922 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 03:28:16.922 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 79 by host 2
2026-01-16 03:28:20.192 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:28:20.192 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 500
2026-01-16 03:28:21.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:28:21.796 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 calls 1000
2026-01-16 03:28:23.423 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:28:23.423 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:28:23.425 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [6P, KH, 2P]
2026-01-16 03:28:25.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:28:25.056 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:28:26.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:28:26.344 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:28:27.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:28:27.978 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:28:27.978 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: JH
2026-01-16 03:28:30.888 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:28:30.888 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:28:32.491 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:28:32.491 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:28:34.109 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:28:34.109 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:28:34.110 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 3P
2026-01-16 03:28:35.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:28:35.846 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:28:37.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:28:37.540 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:28:39.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:28:39.827 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:28:39.834 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has ONE_PAIR: [KH, JH, 6P, 2C, 2P]
2026-01-16 03:28:39.835 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has HIGH_CARD: [AH, KH, JH, 8H, 6P]
2026-01-16 03:28:39.836 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has HIGH_CARD: [KH, JH, 10H, 6P, 5H]
2026-01-16 03:28:39.836 [Server] INFO  c.m.server.game.PokerGameSession - Total pots: 1 (main pot value: 3000)
2026-01-16 03:28:39.836 [Server] INFO  c.m.server.game.PokerGameSession - Main pot (3000) won by Player 2 with ONE_PAIR
2026-01-16 03:28:39.836 [Server] INFO  c.m.server.game.PokerGameSession - Game finished. Overall winner: Player 2
2026-01-16 03:28:39.836 [Server] DEBUG c.m.server.game.PokerGameSession - Player 2 credit change: 44000 - 42000 = 2000
2026-01-16 03:28:39.836 [Server] DEBUG c.m.server.game.PokerGameSession - Player 4 credit change: 4000 - 5000 = -1000
2026-01-16 03:28:39.836 [Server] DEBUG c.m.server.game.PokerGameSession - Player 3 credit change: 202000 - 203000 = -1000
2026-01-16 03:28:39.838 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: 2000
2026-01-16 03:28:39.838 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 2: 2000
2026-01-16 03:28:39.838 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: -1000
2026-01-16 03:28:39.838 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 4: -1000
2026-01-16 03:28:39.839 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: -1000
2026-01-16 03:28:39.839 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 3: -1000
2026-01-16 03:28:39.839 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 79, winner: 2
2026-01-16 03:28:42.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:42.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:43.321 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:43.825 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:44.327 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:44.830 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:45.221 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:45.330 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:45.346 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:45.724 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:45.833 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:45.849 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:46.224 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:46.337 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:46.353 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:46.727 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:46.836 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:46.855 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:47.230 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:47.340 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:47.355 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:47.733 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:47.839 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:47.858 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:48.237 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:48.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:48.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:48.736 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:48.841 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:48.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:49.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:49.345 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:49.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:49.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:49.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:49.868 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:50.243 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:50.349 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:50.371 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:50.746 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:50.852 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:50.874 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:51.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:51.355 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:51.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:51.752 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:51.855 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:51.873 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:52.251 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:52.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:52.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:52.755 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:52.861 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:52.876 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:53.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:53.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:53.380 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:53.758 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:53.868 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:53.883 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:54.258 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:54.371 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:54.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:54.761 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:54.871 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:54.890 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:55.264 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:55.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:55.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:55.768 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:55.877 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:55.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:56.271 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:56.380 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:56.396 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:56.771 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:56.880 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:56.898 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:57.269 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:57.380 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:57.398 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:57.774 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:57.883 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:57.898 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:58.249 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ClaimQuestRequest
2026-01-16 03:28:58.251 [Server] INFO  com.mygame.server.database.QuestDAO - User 2 claimed quest 1 reward: 20000 credits
2026-01-16 03:28:58.252 [Server] INFO  c.m.server.handlers.QuestHandler - User 2 claimed quest 1 reward: 20000 credits
2026-01-16 03:28:58.255 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 03:28:58.255 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:28:58.256 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:28:58.258 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:28:58.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:58.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:58.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:58.777 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:58.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:58.905 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:59.280 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:59.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:59.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:28:59.781 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:28:59.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:28:59.911 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:00.283 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:00.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:00.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:00.783 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:00.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ClaimQuestRequest
2026-01-16 03:29:00.889 [Server] INFO  com.mygame.server.database.QuestDAO - User 4 claimed quest 1 reward: 20000 credits
2026-01-16 03:29:00.889 [Server] INFO  c.m.server.handlers.QuestHandler - User 4 claimed quest 1 reward: 20000 credits
2026-01-16 03:29:00.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:00.894 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 03:29:00.894 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 03:29:00.895 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 03:29:00.895 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 03:29:00.914 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:01.286 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:01.395 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:01.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:01.789 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:01.898 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:01.917 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:02.289 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:02.399 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:02.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:02.793 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:02.884 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ClaimQuestRequest
2026-01-16 03:29:02.886 [Server] INFO  com.mygame.server.database.QuestDAO - User 3 claimed quest 1 reward: 20000 credits
2026-01-16 03:29:02.886 [Server] INFO  c.m.server.handlers.QuestHandler - User 3 claimed quest 1 reward: 20000 credits
2026-01-16 03:29:02.889 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 03:29:02.889 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 03:29:02.890 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 03:29:02.890 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 03:29:02.901 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:02.921 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:03.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:03.402 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:03.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:03.793 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:03.905 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:03.921 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:04.295 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:04.409 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:04.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:04.799 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:04.908 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:04.926 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:05.301 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:05.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:29:05.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:05.805 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:05.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:06.029 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 03:29:06.029 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 79
2026-01-16 03:29:06.029 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 79
2026-01-16 03:29:06.030 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 79 thành user 4
2026-01-16 03:29:06.030 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 79 từ 2 sang 4
2026-01-16 03:29:06.030 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 79 (còn lại 2 players)
2026-01-16 03:29:06.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:06.433 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:06.808 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:06.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:29:07.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:07.328 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 03:29:07.328 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 79
2026-01-16 03:29:07.328 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 79
2026-01-16 03:29:07.328 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 79 thành user 3
2026-01-16 03:29:07.328 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 79 từ 4 sang 3
2026-01-16 03:29:07.328 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 79 (còn lại 1 players)
2026-01-16 03:29:07.811 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:29:08.422 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 03:29:08.423 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 79
2026-01-16 03:29:08.423 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 79
2026-01-16 03:29:08.423 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 79
2026-01-16 03:29:08.423 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 79
2026-01-16 03:29:08.423 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 79 (còn lại 0 players)
2026-01-16 03:33:11.921 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 03:33:12.205 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 03:33:12.235 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 03:33:12.235 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 03:33:12.235 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 03:33:12.235 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 03:33:12.239 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 03:33:12.244 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 03:33:12.244 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 03:33:12.244 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 03:33:12.245 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 03:33:12.245 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 03:33:12.245 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 03:33:12.246 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 03:33:12.246 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 03:33:12.246 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 03:33:12.254 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 03:33:12.254 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 03:33:12.254 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 03:33:12.254 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 03:33:12.328 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 03:33:12.338 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 03:33:12.345 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 03:33:12.345 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 03:33:12.345 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 03:33:23.954 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:65239 (ID: 1)
2026-01-16 03:33:27.606 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:65240 (ID: 2)
2026-01-16 03:33:28.489 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:65241 (ID: 3)
2026-01-16 03:33:37.189 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 03:33:37.189 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 03:33:37.270 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 03:33:37.273 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 03:33:37.273 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 03:33:37.618 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 03:33:37.618 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 03:33:37.621 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:33:37.621 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:33:37.622 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:37.625 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 03:33:37.625 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 03:33:37.628 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:33:37.628 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 03:33:37.629 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:33:37.630 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:33:37.632 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:33:38.031 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:38.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:39.034 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:39.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:40.041 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:40.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:41.001 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 03:33:41.001 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 03:33:41.067 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 03:33:41.067 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 03:33:41.068 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 03:33:41.068 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:41.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 03:33:41.412 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 03:33:41.412 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:33:41.412 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:33:41.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:41.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 03:33:41.414 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 03:33:41.414 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:33:41.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 03:33:41.414 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 03:33:41.415 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 03:33:41.416 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 03:33:41.547 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:41.826 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:42.052 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:42.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:42.553 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:42.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:43.056 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:43.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:43.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:43.834 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:44.063 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:44.334 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:44.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:44.838 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:44.854 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 03:33:44.854 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 03:33:44.926 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 03:33:44.927 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 03:33:44.927 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 03:33:45.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:45.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 03:33:45.275 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 03:33:45.276 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:33:45.276 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:33:45.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:45.277 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 03:33:45.277 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 03:33:45.277 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:33:45.277 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 03:33:45.277 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 03:33:45.278 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 03:33:45.279 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 03:33:45.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:45.572 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:45.687 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:45.841 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:46.072 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:46.191 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:46.346 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:46.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:46.691 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:46.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:47.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:47.194 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:47.346 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:47.579 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:47.696 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:47.849 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:48.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:48.199 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:48.350 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:48.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:48.703 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:48.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:48.857 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 03:33:48.862 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 80
2026-01-16 03:33:48.862 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 80)
2026-01-16 03:33:48.865 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 80 (position: 0)
2026-01-16 03:33:48.866 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 80)
2026-01-16 03:33:49.081 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:33:49.203 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:49.353 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:49.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:49.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:50.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:50.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:50.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:50.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:51.209 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:51.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:51.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:51.785 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 03:33:51.787 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 80
2026-01-16 03:33:51.787 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 80 (position: 1)
2026-01-16 03:33:51.787 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 80
2026-01-16 03:33:51.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:33:52.212 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:52.712 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:53.216 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:53.607 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 03:33:53.609 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 80
2026-01-16 03:33:53.609 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 80 (position: 2)
2026-01-16 03:33:53.609 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 80
2026-01-16 03:33:53.719 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:33:55.945 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 03:33:55.945 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 80...
2026-01-16 03:33:55.949 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 64000
2026-01-16 03:33:55.949 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 222000
2026-01-16 03:33:55.949 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 24000
2026-01-16 03:33:55.950 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 03:33:55.950 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 03:33:55.950 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [QC, 2H]
2026-01-16 03:33:55.951 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [QP, 3D]
2026-01-16 03:33:55.951 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [5D, JD]
2026-01-16 03:33:55.951 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 03:33:55.951 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 80 (POKER)
2026-01-16 03:33:55.951 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 03:33:55.951 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 80 by host 2
2026-01-16 03:33:58.711 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:33:58.711 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 calls 500
2026-01-16 03:34:00.170 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:34:00.170 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 1000
2026-01-16 03:34:01.883 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:34:01.883 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:34:01.885 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [6P, 10C, 10D]
2026-01-16 03:34:03.385 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:34:03.385 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:34:05.407 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:34:05.407 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:34:06.794 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:34:06.794 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:34:06.794 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: 6C
2026-01-16 03:34:08.385 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:34:08.385 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:34:09.797 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:34:09.797 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:34:11.410 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:34:11.410 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:34:11.410 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 6D
2026-01-16 03:34:16.353 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:34:16.354 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:34:17.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:34:17.979 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:34:19.934 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:34:19.934 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:34:19.943 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has FULL_HOUSE: [10C, 10D, 6P, 6C, 6D]
2026-01-16 03:34:19.943 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has FULL_HOUSE: [10C, 10D, 6P, 6C, 6D]
2026-01-16 03:34:19.945 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has FULL_HOUSE: [10C, 10D, 6P, 6C, 6D]
2026-01-16 03:34:19.945 [Server] INFO  c.m.server.game.PokerGameSession - Total pots: 1 (main pot value: 3000)
2026-01-16 03:34:19.945 [Server] INFO  c.m.server.game.PokerGameSession - Main pot (3000) won by Player 2 with FULL_HOUSE
2026-01-16 03:34:19.945 [Server] INFO  c.m.server.game.PokerGameSession - Game finished. Overall winner: Player 2
2026-01-16 03:34:19.945 [Server] DEBUG c.m.server.game.PokerGameSession - Player 2 credit change: 66000 - 64000 = 2000
2026-01-16 03:34:19.945 [Server] DEBUG c.m.server.game.PokerGameSession - Player 3 credit change: 221000 - 222000 = -1000
2026-01-16 03:34:19.945 [Server] DEBUG c.m.server.game.PokerGameSession - Player 4 credit change: 23000 - 24000 = -1000
2026-01-16 03:34:19.947 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: 2000
2026-01-16 03:34:19.947 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 2: 2000
2026-01-16 03:34:19.947 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: -1000
2026-01-16 03:34:19.947 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 3: -1000
2026-01-16 03:34:19.949 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: -1000
2026-01-16 03:34:19.949 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 4: -1000
2026-01-16 03:34:19.950 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 80, winner: 2
2026-01-16 03:34:21.496 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 03:34:21.499 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 80
2026-01-16 03:34:21.499 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 80
2026-01-16 03:34:21.499 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 80 thành user 3
2026-01-16 03:34:21.499 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 80 từ 2 sang 3
2026-01-16 03:34:21.499 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 80 (còn lại 2 players)
2026-01-16 03:34:21.962 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:22.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:22.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:23.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:23.972 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:24.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:24.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaveRoomRequest
2026-01-16 03:34:24.564 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 80
2026-01-16 03:34:24.564 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 80
2026-01-16 03:34:24.564 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 80 thành user 4
2026-01-16 03:34:24.564 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 80 từ 3 sang 4
2026-01-16 03:34:24.564 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 80 (còn lại 1 players)
2026-01-16 03:34:24.879 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:24.959 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaveRoomRequest
2026-01-16 03:34:24.961 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 80
2026-01-16 03:34:24.961 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 80
2026-01-16 03:34:24.961 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 80
2026-01-16 03:34:24.962 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 80
2026-01-16 03:34:24.962 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 80 (còn lại 0 players)
2026-01-16 03:34:24.972 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:25.312 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:25.380 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:25.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:25.810 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:25.875 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:25.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:26.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:26.384 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:26.478 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:26.816 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:26.887 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:26.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:27.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:27.390 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:27.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:27.818 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:27.893 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:27.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:28.317 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:28.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:28.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:28.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:28.896 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:28.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:29.324 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:29.400 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:29.493 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:29.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:29.903 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:29.994 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:30.327 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:30.407 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:30.496 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:30.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:30.909 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:30.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:31.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:31.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:31.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:31.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:31.912 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:32.003 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:32.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:32.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:32.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:32.833 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:32.915 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:33.009 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:33.333 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:33.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:33.509 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:34:33.837 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:33.869 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 03:34:33.918 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:34.340 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:34.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:34:34.843 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:35.057 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 03:34:35.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:35.843 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:36.346 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:34:36.954 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 03:52:43.240 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 03:52:43.419 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 03:52:43.450 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 03:52:43.450 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 03:52:43.450 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 03:52:43.450 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 03:52:43.456 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 03:52:43.456 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 03:52:43.456 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 03:52:43.456 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 03:52:43.456 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 03:52:43.456 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 03:52:43.461 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 03:52:43.464 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 03:52:43.469 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 03:52:43.469 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 03:52:43.469 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 03:52:43.469 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 03:52:43.469 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 03:52:43.535 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 03:52:43.545 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 03:52:43.549 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 03:52:43.549 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 03:52:43.549 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 03:52:48.235 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:55458 (ID: 1)
2026-01-16 03:52:54.425 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 03:52:54.425 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 03:52:54.498 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 03:52:54.502 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 03:52:54.503 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 03:52:54.855 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 03:52:54.855 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 03:52:54.857 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:52:54.857 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:52:54.858 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:54.860 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 03:52:54.861 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 03:52:54.863 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:52:54.863 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 03:52:54.863 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 03:52:54.865 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 03:52:54.867 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 03:52:55.111 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50032 (ID: 2)
2026-01-16 03:52:55.265 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:55.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:56.268 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:56.704 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50033 (ID: 3)
2026-01-16 03:52:56.767 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:57.271 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:57.774 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:58.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:58.774 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:59.115 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 03:52:59.115 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 03:52:59.183 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 03:52:59.184 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 03:52:59.184 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 03:52:59.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:59.532 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 03:52:59.533 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 03:52:59.533 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:52:59.534 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:52:59.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:52:59.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 03:52:59.535 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 03:52:59.535 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:52:59.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 03:52:59.535 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 03:52:59.535 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 03:52:59.537 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 03:52:59.777 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:52:59.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:00.279 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:00.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:00.779 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:00.946 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:01.283 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:01.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:01.786 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:01.948 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:02.289 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:02.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:02.617 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 03:53:02.619 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 03:53:02.684 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 03:53:02.686 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 03:53:02.686 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 03:53:02.792 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:02.952 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:03.032 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 03:53:03.032 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 03:53:03.032 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 03:53:03.032 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 03:53:03.033 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:03.033 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 03:53:03.033 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 03:53:03.034 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 03:53:03.034 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 03:53:03.034 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 03:53:03.035 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 03:53:03.035 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 03:53:03.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:03.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:03.455 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:03.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:03.949 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:03.958 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:04.296 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:04.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:04.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:04.799 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:04.955 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:04.964 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:05.302 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:05.458 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:05.464 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:05.802 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:05.963 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:05.968 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:06.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:06.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 03:53:06.458 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 81
2026-01-16 03:53:06.458 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 81)
2026-01-16 03:53:06.463 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 81 (position: 0)
2026-01-16 03:53:06.463 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 81)
2026-01-16 03:53:06.464 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:06.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:06.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:06.974 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:07.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:07.473 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:07.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:07.973 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:08.469 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:08.475 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:08.977 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:08.978 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:09.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 03:53:09.176 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 81
2026-01-16 03:53:09.176 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 81 (position: 1)
2026-01-16 03:53:09.176 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 81
2026-01-16 03:53:09.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:09.980 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:10.483 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:10.736 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 03:53:10.739 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 81
2026-01-16 03:53:10.739 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 81 (position: 2)
2026-01-16 03:53:10.739 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 81
2026-01-16 03:53:10.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:13.186 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 03:53:13.186 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 81...
2026-01-16 03:53:13.191 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 66000
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 221000
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 23000
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [9P, KD]
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [2P, 5C]
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [QD, AC]
2026-01-16 03:53:13.192 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 03:53:13.193 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 81 (POKER)
2026-01-16 03:53:13.193 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 03:53:13.193 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 81 by host 2
2026-01-16 03:53:16.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:53:16.132 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 calls 500
2026-01-16 03:53:17.615 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:53:17.615 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 calls 1000
2026-01-16 03:53:19.297 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:53:19.297 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:53:19.299 [Server] INFO  c.m.server.game.PokerGameSession - Dealt FLOP: [4H, 2D, JP]
2026-01-16 03:53:21.043 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:53:21.043 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:53:23.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:53:23.050 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:53:25.115 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:53:25.115 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:53:25.115 [Server] INFO  c.m.server.game.PokerGameSession - Dealt TURN: 3H
2026-01-16 03:53:27.393 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:53:27.393 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:53:28.849 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:53:28.849 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:53:30.665 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:53:30.665 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:53:30.665 [Server] INFO  c.m.server.game.PokerGameSession - Dealt RIVER: 7P
2026-01-16 03:53:32.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 03:53:32.358 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 checks
2026-01-16 03:53:33.796 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 03:53:33.796 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 checks
2026-01-16 03:53:35.639 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 03:53:35.640 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 checks
2026-01-16 03:53:35.646 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 has HIGH_CARD: [KD, JP, 9P, 7P, 4H]
2026-01-16 03:53:35.648 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 has ONE_PAIR: [JP, 7P, 5C, 2P, 2D]
2026-01-16 03:53:35.648 [Server] INFO  c.m.server.game.PokerGameSession - Player 4 has HIGH_CARD: [AC, QD, JP, 7P, 4H]
2026-01-16 03:53:35.649 [Server] INFO  c.m.server.game.PokerGameSession - Total pots: 1 (main pot value: 3000)
2026-01-16 03:53:35.649 [Server] INFO  c.m.server.game.PokerGameSession - Main pot (3000) won by Player 3 with ONE_PAIR
2026-01-16 03:53:35.649 [Server] INFO  c.m.server.game.PokerGameSession - Game finished. Overall winner: Player 3
2026-01-16 03:53:35.649 [Server] DEBUG c.m.server.game.PokerGameSession - Player 2 credit change: 65000 - 66000 = -1000
2026-01-16 03:53:35.649 [Server] DEBUG c.m.server.game.PokerGameSession - Player 3 credit change: 223000 - 221000 = 2000
2026-01-16 03:53:35.649 [Server] DEBUG c.m.server.game.PokerGameSession - Player 4 credit change: 22000 - 23000 = -1000
2026-01-16 03:53:35.651 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 2: -1000
2026-01-16 03:53:35.651 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 2: -1000
2026-01-16 03:53:35.653 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 3: 2000
2026-01-16 03:53:35.653 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 3: 2000
2026-01-16 03:53:35.653 [Server] DEBUG com.mygame.server.database.UserDAO - Đã cập nhật credits cho user 4: -1000
2026-01-16 03:53:35.653 [Server] DEBUG c.m.server.game.GameSessionManager - Updated credits for player 4: -1000
2026-01-16 03:53:35.653 [Server] INFO  c.m.server.game.GameSessionManager - Đã kết thúc ván POKER ở room 81, winner: 3
2026-01-16 03:53:38.342 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 03:53:38.343 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 81
2026-01-16 03:53:38.343 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 81
2026-01-16 03:53:38.349 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 81 thành user 3
2026-01-16 03:53:38.349 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 81 từ 2 sang 3
2026-01-16 03:53:38.349 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 81 (còn lại 2 players)
2026-01-16 03:53:38.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:38.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:39.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:39.939 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:40.442 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:40.661 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaveRoomRequest
2026-01-16 03:53:40.662 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 81
2026-01-16 03:53:40.662 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 81
2026-01-16 03:53:40.662 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 81 (còn lại 1 players)
2026-01-16 03:53:40.664 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaveRoomRequest
2026-01-16 03:53:40.665 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 81
2026-01-16 03:53:40.665 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 81
2026-01-16 03:53:40.666 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 81
2026-01-16 03:53:40.666 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 81
2026-01-16 03:53:40.666 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 81 (còn lại 0 players)
2026-01-16 03:53:40.704 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:40.942 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:41.157 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:41.204 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:41.442 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:41.658 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:41.707 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:41.944 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:42.161 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:42.211 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:42.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:42.664 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:42.714 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:42.947 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:43.167 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:43.216 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:43.451 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:43.666 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:43.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:43.951 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:44.170 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:44.222 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:44.454 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:44.673 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:44.723 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:44.954 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:45.173 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:45.226 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:45.457 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:45.676 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:45.729 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:45.961 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:46.176 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:46.229 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:46.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:46.676 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:46.730 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:46.964 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:47.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:47.238 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:47.466 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:47.679 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:47.739 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:47.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:48.182 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:48.242 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:48.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:48.682 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:48.745 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:48.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:49.021 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: CreateRoomRequest
2026-01-16 03:53:49.023 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 82
2026-01-16 03:53:49.023 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: Room 9020 (ID: 82)
2026-01-16 03:53:49.024 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 82 (position: 0)
2026-01-16 03:53:49.024 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: Room 9020 (ID: 82)
2026-01-16 03:53:49.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:49.245 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:49.473 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:49.748 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:49.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:50.250 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:50.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:50.754 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:50.982 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:51.257 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:51.373 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaveRoomRequest
2026-01-16 03:53:51.373 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 81 không tồn tại trong memory
2026-01-16 03:53:51.482 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:51.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:51.985 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:52.036 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:52.261 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:52.488 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:52.538 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:52.763 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:52.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:53.039 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:53.263 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:53.492 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:53.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:53.767 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:53.994 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:54.042 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:54.267 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:54.498 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:54.545 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:54.770 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:54.998 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:55.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:55.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:55.501 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:55.548 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:55.775 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:56.004 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:56.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:56.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:56.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:56.551 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:56.779 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:57.008 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:57.049 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:57.279 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:57.513 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:57.554 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:57.782 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:58.017 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:58.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:58.285 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:58.516 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:58.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:58.788 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:59.020 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:59.066 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:59.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:53:59.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:53:59.573 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:53:59.792 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:00.022 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:00.076 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:00.295 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:00.526 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:00.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:00.798 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:01.029 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:01.079 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:01.301 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:01.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:01.582 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:01.804 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:02.029 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:02.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: CreateRoomRequest
2026-01-16 03:54:02.049 [Server] INFO  c.mygame.server.room.GameRoomManager - User 4 is already in room 82, leaving before creating new room
2026-01-16 03:54:02.050 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 82
2026-01-16 03:54:02.050 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 82
2026-01-16 03:54:02.051 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 82
2026-01-16 03:54:02.051 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 82
2026-01-16 03:54:02.051 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 82 (còn lại 0 players)
2026-01-16 03:54:02.051 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 83
2026-01-16 03:54:02.052 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 83)
2026-01-16 03:54:02.052 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 83 (position: 0)
2026-01-16 03:54:02.052 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 83)
2026-01-16 03:54:02.085 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:02.304 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:02.532 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:02.806 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:03.032 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:03.310 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:03.535 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:03.813 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:04.038 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:04.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:04.541 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:04.816 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:05.041 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:05.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:05.544 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:05.820 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:06.061 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:06.323 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:06.432 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 03:54:06.433 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 83
2026-01-16 03:54:06.433 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 83 (position: 1)
2026-01-16 03:54:06.433 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 83
2026-01-16 03:54:06.563 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:07.062 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:07.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:08.067 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:08.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:08.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: JoinRoomRequest
2026-01-16 03:54:08.859 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 83
2026-01-16 03:54:08.859 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 83 (position: 2)
2026-01-16 03:54:08.859 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã tham gia room 83
2026-01-16 03:54:09.073 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:12.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaveRoomRequest
2026-01-16 03:54:12.760 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 81 không tồn tại trong memory
2026-01-16 03:54:13.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:13.791 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:14.294 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:14.797 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:14.964 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaveRoomRequest
2026-01-16 03:54:14.964 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 81 không tồn tại trong memory
2026-01-16 03:54:15.301 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:15.354 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:15.798 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:15.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:16.304 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:16.360 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:16.782 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 03:54:16.783 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 81 không tồn tại trong memory
2026-01-16 03:54:16.807 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:16.860 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:17.310 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:17.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:17.495 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:17.813 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:17.863 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:17.997 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:18.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:18.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:18.501 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:18.816 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:18.866 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:19.004 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:19.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:19.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:19.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:19.822 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:19.869 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:20.007 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:20.326 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:20.372 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:20.510 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 03:54:20.829 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:20.875 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:21.150 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 03:54:21.151 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 83
2026-01-16 03:54:21.151 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 83
2026-01-16 03:54:21.151 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 83 (còn lại 2 players)
2026-01-16 03:54:21.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:21.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:21.835 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:21.879 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 03:54:22.245 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 03:54:22.246 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 83
2026-01-16 03:54:22.246 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 83
2026-01-16 03:54:22.246 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 83 (còn lại 1 players)
2026-01-16 03:54:22.335 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:22.835 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:23.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:23.838 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:24.341 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:24.844 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 03:54:25.454 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 03:54:25.454 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 83
2026-01-16 03:54:25.454 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 83
2026-01-16 03:54:25.455 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 83
2026-01-16 03:54:25.455 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 83
2026-01-16 03:54:25.455 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 83 (còn lại 0 players)
2026-01-16 04:05:00.240 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:05:00.467 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:05:00.498 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:05:00.499 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:05:00.499 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:05:00.499 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:05:00.505 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:05:00.506 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:05:00.507 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:05:00.508 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:05:00.508 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:05:00.508 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:05:00.509 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:05:00.509 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:05:00.509 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:05:00.510 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:05:00.510 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:05:00.510 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:05:00.510 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:05:00.510 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:05:00.514 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:05:00.523 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:05:00.523 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:05:00.525 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:05:00.525 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:05:00.525 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:05:00.607 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:05:00.621 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:05:00.631 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:05:00.632 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:05:00.632 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:05:14.103 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50927 (ID: 1)
2026-01-16 04:05:16.628 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50928 (ID: 2)
2026-01-16 04:05:18.018 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50929 (ID: 3)
2026-01-16 04:05:24.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 04:05:24.569 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 04:05:24.630 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 04:05:24.630 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 04:05:24.630 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 04:05:25.006 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 04:05:25.006 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 04:05:25.009 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:05:25.009 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:05:25.010 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:25.013 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 04:05:25.013 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 04:05:25.016 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:05:25.016 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 04:05:25.016 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 04:05:25.019 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 04:05:25.022 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 04:05:25.400 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:25.904 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:26.406 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:26.911 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:27.410 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:27.910 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:28.259 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50937 (ID: 4)
2026-01-16 04:05:28.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 04:05:28.343 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 04:05:28.395 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 04:05:28.395 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 04:05:28.395 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 04:05:28.413 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:28.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 04:05:28.749 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 04:05:28.749 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:05:28.749 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:05:28.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:28.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 04:05:28.749 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 04:05:28.749 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:05:28.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 04:05:28.749 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 04:05:28.749 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 04:05:28.749 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 04:05:28.917 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:29.156 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:29.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:29.658 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:29.921 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:30.160 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:30.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:30.660 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:30.925 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:31.162 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:31.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:31.663 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:31.926 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:32.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:32.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:32.670 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:32.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:33.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:33.433 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:33.670 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:33.939 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:34.177 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:34.441 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:34.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 04:05:34.580 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 04:05:34.630 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 04:05:34.630 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 04:05:34.630 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 04:05:34.680 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:34.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:34.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 04:05:34.990 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 04:05:34.990 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:05:34.990 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:05:34.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:34.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 04:05:34.990 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 04:05:34.990 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:05:34.990 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 04:05:34.990 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 04:05:34.990 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 04:05:34.990 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 04:05:35.182 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:35.394 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:35.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:35.686 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:35.891 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:35.951 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:36.186 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:36.400 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:36.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:36.689 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:36.901 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:36.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:37.189 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:37.400 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:37.461 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:37.689 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:37.906 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:37.961 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:38.194 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:38.410 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:38.462 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:38.698 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:38.909 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:38.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:39.198 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:39.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:39.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:39.697 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:39.915 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:39.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:40.086 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 04:05:40.086 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 04:05:40.133 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 04:05:40.133 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 04:05:40.133 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 04:05:40.201 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:40.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:40.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:40.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 04:05:40.490 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 04:05:40.490 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:05:40.490 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:05:40.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:40.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 04:05:40.490 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 04:05:40.490 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:05:40.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 04:05:40.490 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 04:05:40.490 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 0 quests for user 1 on date 2026-01-16
2026-01-16 04:05:40.490 [Server] INFO  com.mygame.server.database.QuestDAO - Found 5 quests in daily_quest_config
2026-01-16 04:05:40.490 [Server] INFO  com.mygame.server.database.QuestDAO - Assigned 5 daily quests to user 1 (expected: 5)
2026-01-16 04:05:40.499 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 04:05:40.500 [Server] INFO  com.mygame.server.database.QuestDAO - Auto-completed login quest for user 1
2026-01-16 04:05:40.500 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 04:05:40.700 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:40.899 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:40.920 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:40.973 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:41.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:41.398 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:41.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:41.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:41.700 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:41.901 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:41.926 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:41.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:42.206 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:42.403 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:42.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:42.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:42.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:42.906 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:42.929 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:42.981 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:43.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:43.410 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:43.429 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:43.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:43.709 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:43.910 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:43.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:43.989 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:44.210 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:44.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:44.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:44.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:44.714 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:44.920 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:44.939 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:44.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:45.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:45.420 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:45.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:45.493 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:45.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:45.920 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:45.940 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:45.994 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:46.220 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:46.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:46.444 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:46.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:46.722 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:46.924 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:46.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:47.001 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:05:47.177 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 04:05:47.181 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 84
2026-01-16 04:05:47.181 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: Room 7176 (ID: 84)
2026-01-16 04:05:47.181 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 84 (position: 0)
2026-01-16 04:05:47.181 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: Room 7176 (ID: 84)
2026-01-16 04:05:47.221 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:47.429 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:47.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:47.729 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:47.930 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:47.949 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:48.229 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:48.431 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:48.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:48.729 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:48.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:48.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:49.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:49.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:49.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:49.730 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:49.939 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:49.959 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:50.233 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:50.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:50.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:50.739 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:50.944 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:50.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:51.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:51.441 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:51.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:51.738 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:51.943 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:51.970 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:52.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:52.447 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:52.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:52.741 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:52.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:52.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:53.241 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:53.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:53.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:53.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:53.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:53.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:54.090 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 04:05:54.094 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 84
2026-01-16 04:05:54.094 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 84 (position: 1)
2026-01-16 04:05:54.094 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 84
2026-01-16 04:05:54.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:05:54.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:54.480 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:54.961 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:54.983 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:55.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:55.489 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:55.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:55.989 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:56.370 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 04:05:56.371 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 84
2026-01-16 04:05:56.371 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 84 (position: 2)
2026-01-16 04:05:56.371 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 84
2026-01-16 04:05:56.470 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:56.489 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:05:56.969 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:57.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:57.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:58.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:58.982 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:05:59.235 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 04:05:59.237 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 84
2026-01-16 04:05:59.237 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 84 (position: 3)
2026-01-16 04:05:59.237 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 84
2026-01-16 04:05:59.480 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:06:01.496 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:06:01.496 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 84...
2026-01-16 04:06:01.502 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 84 (TIENLEN)
2026-01-16 04:06:01.502 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 04:06:01.502 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 84 by host 2
2026-01-16 04:06:03.008 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:06:07.995 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:06:10.390 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 04:06:10.391 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 84
2026-01-16 04:06:10.391 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 84
2026-01-16 04:06:10.391 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 84 thành user 3
2026-01-16 04:06:10.391 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 84 từ 2 sang 3
2026-01-16 04:06:10.391 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 84 (còn lại 3 players)
2026-01-16 04:06:11.550 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 04:06:11.553 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 84
2026-01-16 04:06:11.553 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 84
2026-01-16 04:06:11.556 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 84 thành user 4
2026-01-16 04:06:11.556 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 84 từ 3 sang 4
2026-01-16 04:06:11.556 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 84 (còn lại 2 players)
2026-01-16 04:06:15.473 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 04:06:15.474 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 84
2026-01-16 04:06:15.474 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 84
2026-01-16 04:06:15.474 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 84 (còn lại 1 players)
2026-01-16 04:06:15.479 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 04:06:15.480 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 84
2026-01-16 04:06:15.480 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 84
2026-01-16 04:06:15.481 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 84
2026-01-16 04:06:15.481 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 84
2026-01-16 04:06:15.481 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 84 (còn lại 0 players)
2026-01-16 04:17:38.190 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:17:38.512 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:17:38.648 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:17:38.648 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:17:38.648 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:17:38.649 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:17:38.662 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:17:38.663 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:17:38.663 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:17:38.664 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:17:38.664 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:17:38.665 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:17:38.665 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:17:38.665 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:17:38.665 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:17:38.668 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:17:38.668 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:17:38.669 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:17:38.669 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:17:38.669 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:17:38.681 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:17:38.686 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:17:38.687 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:17:38.688 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:17:38.688 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:17:38.688 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:17:38.755 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:17:38.766 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:17:38.775 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:17:38.775 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:17:38.775 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:17:51.375 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:62321 (ID: 1)
2026-01-16 04:17:56.709 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:55354 (ID: 2)
2026-01-16 04:17:58.309 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51295 (ID: 3)
2026-01-16 04:17:59.090 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51296 (ID: 4)
2026-01-16 04:18:11.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 04:18:11.389 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 04:18:11.472 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 04:18:11.476 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 04:18:11.476 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 04:18:11.821 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 04:18:11.822 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 04:18:11.825 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:18:11.827 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:18:11.827 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:11.832 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 04:18:11.832 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 04:18:11.836 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:18:11.837 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 04:18:11.837 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 04:18:11.842 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 04:18:11.843 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 04:18:13.734 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:15.423 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 04:18:15.423 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 04:18:15.490 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 04:18:15.491 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 04:18:15.491 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 04:18:15.734 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:15.838 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 04:18:15.838 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 04:18:15.839 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:18:15.839 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:18:15.839 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:15.839 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 04:18:15.840 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 04:18:15.840 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:18:15.841 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 04:18:15.841 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 04:18:15.842 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 04:18:15.843 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 04:18:17.740 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:17.750 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:19.743 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:19.752 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:20.511 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 04:18:20.511 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 04:18:20.584 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 04:18:20.584 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 04:18:20.584 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 04:18:20.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 04:18:20.932 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 04:18:20.932 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:18:20.932 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:18:20.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:20.933 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 04:18:20.933 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 04:18:20.934 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:18:20.934 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 04:18:20.934 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 04:18:20.935 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 04:18:20.935 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 04:18:21.746 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:21.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:22.842 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:23.750 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:23.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:24.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:25.753 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:25.759 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:26.850 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:27.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:27.762 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:28.763 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 04:18:28.763 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 04:18:28.830 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 04:18:28.831 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 04:18:28.831 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 04:18:28.853 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:29.182 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 04:18:29.182 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 04:18:29.183 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:18:29.183 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:18:29.183 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:29.183 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 04:18:29.185 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 04:18:29.185 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:18:29.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 04:18:29.185 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 04:18:29.186 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 04:18:29.186 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 04:18:29.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:29.762 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:30.856 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:31.093 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:31.758 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:31.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:32.859 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:33.097 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:33.760 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:33.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:34.862 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:35.100 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:35.762 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:18:35.768 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:36.845 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 04:18:36.859 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 85
2026-01-16 04:18:36.859 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: Room 6843 (ID: 85)
2026-01-16 04:18:36.864 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 85 (position: 0)
2026-01-16 04:18:36.864 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: Room 6843 (ID: 85)
2026-01-16 04:18:36.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:37.103 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:37.771 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:38.862 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:39.101 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:39.772 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:40.871 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:41.101 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:41.697 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 04:18:41.703 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 85
2026-01-16 04:18:41.704 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 85 (position: 1)
2026-01-16 04:18:41.704 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 85
2026-01-16 04:18:41.775 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:18:42.873 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:18:43.111 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:44.218 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 04:18:44.220 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 85
2026-01-16 04:18:44.220 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 85 (position: 2)
2026-01-16 04:18:44.220 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 85
2026-01-16 04:18:45.111 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:18:46.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 04:18:46.576 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 85
2026-01-16 04:18:46.576 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 85 (position: 3)
2026-01-16 04:18:46.576 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 85
2026-01-16 04:18:49.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:18:49.184 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 85...
2026-01-16 04:18:49.191 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 04:18:49.194 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 85
2026-01-16 04:18:49.194 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 85
2026-01-16 04:18:49.194 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 85 thành user 3
2026-01-16 04:18:49.194 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 85 từ 2 sang 3
2026-01-16 04:18:49.194 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 85 (còn lại 3 players)
2026-01-16 04:18:49.194 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 04:18:49.194 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 85
2026-01-16 04:18:49.194 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 85
2026-01-16 04:18:49.194 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 85 thành user 4
2026-01-16 04:18:49.194 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 85 từ 3 sang 4
2026-01-16 04:18:49.194 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 85 (còn lại 2 players)
2026-01-16 04:18:49.197 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 04:18:49.197 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 85
2026-01-16 04:18:49.197 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 85
2026-01-16 04:18:49.197 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 85 thành user 1
2026-01-16 04:18:49.197 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 85 từ 4 sang 1
2026-01-16 04:18:49.197 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 85 (còn lại 1 players)
2026-01-16 04:18:49.197 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 04:18:49.200 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 85
2026-01-16 04:18:49.200 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 85
2026-01-16 04:18:49.201 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 85
2026-01-16 04:18:49.201 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 85
2026-01-16 04:18:49.201 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 85 (còn lại 0 players)
2026-01-16 04:18:49.202 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 85 (TIENLEN)
2026-01-16 04:18:49.202 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 04:18:49.202 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 85 by host 2
2026-01-16 04:18:52.195 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51311 (ID: 5)
2026-01-16 04:18:52.198 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51312 (ID: 6)
2026-01-16 04:18:52.201 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51313 (ID: 7)
2026-01-16 04:18:52.204 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51314 (ID: 8)
2026-01-16 04:19:12.840 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 04:19:14.121 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 04:19:15.158 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 04:19:16.408 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 04:22:06.747 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:22:06.937 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:22:06.975 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:22:06.975 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:22:06.975 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:22:06.975 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:22:06.984 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:22:06.984 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:22:06.985 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:22:06.987 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:22:06.987 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:22:06.988 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:22:06.988 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:22:06.988 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:22:06.995 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:22:06.995 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:22:06.995 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:22:06.995 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:22:06.995 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:22:07.066 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:22:07.078 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:22:07.085 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:22:07.085 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:22:07.085 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:22:12.149 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57195 (ID: 1)
2026-01-16 04:22:19.218 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57202 (ID: 2)
2026-01-16 04:22:22.639 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57203 (ID: 3)
2026-01-16 04:22:24.452 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:57204 (ID: 4)
2026-01-16 04:22:27.063 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 04:22:27.063 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 04:22:27.141 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 04:22:27.144 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 04:22:27.144 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 04:22:27.491 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 04:22:27.491 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 04:22:27.496 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:22:27.496 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:22:27.496 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:27.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 04:22:27.500 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 04:22:27.502 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:22:27.502 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 04:22:27.502 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 04:22:27.507 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 04:22:27.508 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 04:22:29.405 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:30.020 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 04:22:30.020 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 04:22:30.097 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 04:22:30.098 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 04:22:30.098 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 04:22:30.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 04:22:30.447 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 04:22:30.447 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:22:30.448 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:22:30.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:30.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 04:22:30.448 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 04:22:30.449 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:22:30.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 04:22:30.449 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 04:22:30.449 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 04:22:30.451 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 04:22:31.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:32.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:33.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:33.778 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 04:22:33.778 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 04:22:33.847 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 04:22:33.848 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 04:22:33.848 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 04:22:34.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 04:22:34.198 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 04:22:34.198 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:22:34.198 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:22:34.198 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:34.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 04:22:34.200 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 04:22:34.201 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:22:34.201 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 04:22:34.201 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 04:22:34.202 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 04:22:34.202 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 04:22:34.362 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:35.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:36.111 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:36.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:37.417 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:38.114 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:38.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:39.417 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:39.925 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 04:22:39.925 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 04:22:39.993 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 04:22:39.995 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 04:22:39.995 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 04:22:40.118 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:40.341 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 04:22:40.342 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 04:22:40.342 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:22:40.342 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:22:40.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:40.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 04:22:40.343 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 04:22:40.343 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:22:40.343 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 04:22:40.343 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 04:22:40.345 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 04:22:40.345 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 04:22:40.371 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:41.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:42.121 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:42.252 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:42.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:43.022 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ClaimQuestRequest
2026-01-16 04:22:43.025 [Server] INFO  com.mygame.server.database.QuestDAO - User 1 claimed quest 1 reward: 20000 credits
2026-01-16 04:22:43.026 [Server] INFO  c.m.server.handlers.QuestHandler - User 1 claimed quest 1 reward: 20000 credits
2026-01-16 04:22:43.031 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 04:22:43.031 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 04:22:43.032 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 04:22:43.032 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 04:22:43.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:44.124 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:44.255 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:44.376 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:45.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:46.124 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:46.258 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:46.385 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:47.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:48.127 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:48.261 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:48.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:49.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:50.130 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:50.264 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:50.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:51.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:22:51.672 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 04:22:51.678 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 86
2026-01-16 04:22:51.678 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: Room 1670 (ID: 86)
2026-01-16 04:22:51.683 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 86 (position: 0)
2026-01-16 04:22:51.683 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: Room 1670 (ID: 86)
2026-01-16 04:22:52.133 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:52.267 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:52.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:54.133 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:54.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:54.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:56.136 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:56.270 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:56.392 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:22:56.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 04:22:56.520 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 86
2026-01-16 04:22:56.520 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 86 (position: 1)
2026-01-16 04:22:56.520 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 86
2026-01-16 04:22:58.136 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:22:58.274 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:22:58.667 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 04:22:58.669 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 86
2026-01-16 04:22:58.669 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 86 (position: 2)
2026-01-16 04:22:58.669 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 86
2026-01-16 04:23:00.273 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:23:01.276 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 04:23:01.279 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 86
2026-01-16 04:23:01.279 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 86 (position: 3)
2026-01-16 04:23:01.279 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 86
2026-01-16 04:23:03.048 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:23:03.048 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 86...
2026-01-16 04:23:03.057 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 86 (TIENLEN)
2026-01-16 04:23:03.057 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 04:23:03.057 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 86 by host 2
2026-01-16 04:34:40.514 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:34:40.697 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:34:40.842 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:34:40.842 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:34:40.842 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:34:40.842 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:34:40.844 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:34:40.854 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:34:40.854 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:34:40.854 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:34:40.854 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:34:40.854 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:34:40.854 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:34:40.931 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:34:40.934 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:34:40.945 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:34:40.945 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:34:40.945 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:34:54.705 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49977 (ID: 1)
2026-01-16 04:34:55.289 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49978 (ID: 2)
2026-01-16 04:35:00.991 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49980 (ID: 3)
2026-01-16 04:35:04.069 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 04:35:04.069 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 04:35:04.149 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 04:35:04.151 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 04:35:04.151 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 04:35:04.500 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 04:35:04.500 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 04:35:04.503 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:35:04.503 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:35:04.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:04.507 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 04:35:04.508 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 04:35:04.510 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:35:04.511 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 04:35:04.511 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 04:35:04.515 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 04:35:04.516 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 04:35:06.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:07.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 04:35:07.347 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 04:35:07.419 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 04:35:07.420 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 04:35:07.420 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 04:35:07.764 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 04:35:07.764 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 04:35:07.764 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:35:07.765 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:35:07.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:07.765 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 04:35:07.766 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 04:35:07.766 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:35:07.766 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 04:35:07.766 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 04:35:07.767 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 04:35:07.767 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 04:35:08.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:09.677 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:10.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:11.681 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:12.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:13.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:14.090 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49985 (ID: 4)
2026-01-16 04:35:14.421 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:15.687 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:16.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:17.687 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:17.950 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 04:35:17.950 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 04:35:18.019 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 04:35:18.019 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 04:35:18.019 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 04:35:18.368 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 04:35:18.369 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 04:35:18.369 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:35:18.369 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:35:18.369 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:18.370 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 04:35:18.370 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 04:35:18.370 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:35:18.370 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 04:35:18.370 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 04:35:18.371 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 04:35:18.372 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 04:35:18.424 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:19.690 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:20.280 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:20.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:21.693 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:22.284 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:22.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:23.696 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:24.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 04:35:24.200 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 04:35:24.271 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 04:35:24.272 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 04:35:24.272 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 04:35:24.287 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:24.434 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:24.625 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 04:35:24.626 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 04:35:24.626 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:35:24.626 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:35:24.627 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:24.627 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 04:35:24.627 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 04:35:24.627 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:35:24.627 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 04:35:24.627 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 04:35:24.629 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 04:35:24.629 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 04:35:25.699 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:26.290 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:26.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:26.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:27.699 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:28.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:28.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:28.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:29.702 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:30.299 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:30.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:35:30.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:31.704 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:32.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 04:35:32.085 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 87
2026-01-16 04:35:32.085 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 87)
2026-01-16 04:35:32.088 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 87 (position: 0)
2026-01-16 04:35:32.088 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 87)
2026-01-16 04:35:32.303 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:32.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:33.708 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:34.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:34.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:35.711 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:36.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:36.549 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:37.714 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:38.311 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:38.552 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:39.718 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:35:40.314 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:40.555 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:41.036 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 04:35:41.039 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 87
2026-01-16 04:35:41.039 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 87 (position: 1)
2026-01-16 04:35:41.039 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 87
2026-01-16 04:35:42.317 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:35:42.558 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:43.089 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 04:35:43.091 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 87
2026-01-16 04:35:43.091 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 87 (position: 2)
2026-01-16 04:35:43.091 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 87
2026-01-16 04:35:44.558 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:35:44.924 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 04:35:44.926 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 87
2026-01-16 04:35:44.926 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 87 (position: 3)
2026-01-16 04:35:44.926 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 87
2026-01-16 04:35:47.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:35:47.440 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 87...
2026-01-16 04:35:47.448 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 87 (TIENLEN)
2026-01-16 04:35:47.448 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 04:35:47.448 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 87 by host 2
2026-01-16 04:36:09.351 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 04:36:09.352 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 87
2026-01-16 04:36:09.352 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 87
2026-01-16 04:36:09.354 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 87 thành user 3
2026-01-16 04:36:09.354 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 87 từ 2 sang 3
2026-01-16 04:36:09.354 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 87 (còn lại 3 players)
2026-01-16 04:36:10.648 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 04:36:10.649 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 87
2026-01-16 04:36:10.649 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 87
2026-01-16 04:36:10.649 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 87 (còn lại 2 players)
2026-01-16 04:36:12.710 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 04:36:12.711 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 87
2026-01-16 04:36:12.711 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 87
2026-01-16 04:36:12.713 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 87 thành user 1
2026-01-16 04:36:12.713 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 87 từ 3 sang 1
2026-01-16 04:36:12.713 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 87 (còn lại 1 players)
2026-01-16 04:36:14.516 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 04:36:14.518 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 87
2026-01-16 04:36:14.518 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 87
2026-01-16 04:36:14.519 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 87
2026-01-16 04:36:14.519 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 87
2026-01-16 04:36:14.519 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 87 (còn lại 0 players)
2026-01-16 04:44:15.850 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:44:16.034 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:44:16.059 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:44:16.059 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:44:16.059 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:44:16.059 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:44:16.070 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:44:16.075 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:44:16.080 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:44:16.080 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:44:16.080 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:44:16.080 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:44:16.080 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:44:16.149 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:44:16.150 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:44:16.159 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:44:16.159 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:44:16.159 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:46:41.090 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:46:41.280 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:46:41.419 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:46:41.420 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:46:41.420 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:46:41.420 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:46:41.426 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:46:41.428 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:46:41.428 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:46:41.428 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:46:41.429 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:46:41.429 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:46:41.430 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:46:41.431 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:46:41.434 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:46:41.439 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:46:41.440 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:46:41.440 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:46:41.440 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:46:41.440 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:46:41.510 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:46:41.518 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:46:41.525 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:46:41.525 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:46:41.525 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:48:29.336 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 04:48:29.513 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 04:48:29.545 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 04:48:29.545 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 04:48:29.545 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 04:48:29.545 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 04:48:29.550 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 04:48:29.550 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 04:48:29.551 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 04:48:29.551 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 04:48:29.552 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 04:48:29.552 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 04:48:29.552 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 04:48:29.553 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 04:48:29.553 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 04:48:29.553 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 04:48:29.553 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 04:48:29.554 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 04:48:29.554 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 04:48:29.554 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 04:48:29.557 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 04:48:29.562 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 04:48:29.563 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 04:48:29.563 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 04:48:29.564 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 04:48:29.564 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 04:48:29.630 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 04:48:29.637 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 04:48:29.643 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 04:48:29.643 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 04:48:29.643 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 04:48:39.636 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51273 (ID: 1)
2026-01-16 04:48:47.216 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 04:48:47.216 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 04:48:47.288 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 04:48:47.292 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 04:48:47.292 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 04:48:47.643 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 04:48:47.643 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 04:48:47.644 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:48:47.646 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:48:47.646 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:48:47.649 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 04:48:47.649 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 04:48:47.651 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:48:47.652 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 04:48:47.652 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 04:48:47.654 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 04:48:47.655 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 04:48:49.552 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:48:51.555 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:48:52.263 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51287 (ID: 2)
2026-01-16 04:48:53.558 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:48:54.840 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51291 (ID: 3)
2026-01-16 04:48:55.359 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:51292 (ID: 4)
2026-01-16 04:48:55.561 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:48:57.564 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:48:59.112 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 04:48:59.115 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 04:48:59.164 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 04:48:59.165 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 04:48:59.165 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 04:48:59.519 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 04:48:59.519 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 04:48:59.519 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:48:59.520 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:48:59.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:48:59.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 04:48:59.520 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 04:48:59.520 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:48:59.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 04:48:59.520 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 04:48:59.522 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 04:48:59.522 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 04:48:59.567 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:01.422 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:01.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:03.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 04:49:03.208 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 04:49:03.257 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 04:49:03.257 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 04:49:03.257 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 04:49:03.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:03.573 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:03.606 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 04:49:03.606 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 04:49:03.612 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:49:03.612 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:49:03.612 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:03.613 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 04:49:03.613 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 04:49:03.613 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:49:03.613 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 04:49:03.613 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 04:49:03.613 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 04:49:03.613 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 04:49:05.426 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:05.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:05.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:07.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:07.516 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:07.576 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:08.887 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 04:49:08.887 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 04:49:08.941 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 04:49:08.941 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 04:49:08.941 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 04:49:09.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 04:49:09.288 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 04:49:09.288 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 04:49:09.288 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 04:49:09.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:09.288 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 04:49:09.288 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 04:49:09.290 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 04:49:09.291 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 04:49:09.291 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 04:49:09.291 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 04:49:09.291 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 04:49:09.435 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:09.520 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:09.580 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:11.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:11.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:11.521 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:11.583 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:13.198 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:13.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:13.526 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:13.583 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 04:49:14.648 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 04:49:14.655 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 88
2026-01-16 04:49:14.655 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 88)
2026-01-16 04:49:14.659 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 88 (position: 0)
2026-01-16 04:49:14.659 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 88)
2026-01-16 04:49:15.207 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:15.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:15.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:17.210 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:17.436 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 04:49:17.539 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:17.864 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 04:49:17.866 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 88
2026-01-16 04:49:17.866 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 88 (position: 1)
2026-01-16 04:49:17.866 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 88
2026-01-16 04:49:19.207 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:19.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 04:49:19.667 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 04:49:19.669 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 88
2026-01-16 04:49:19.669 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 88 (position: 2)
2026-01-16 04:49:19.669 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 88
2026-01-16 04:49:21.209 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 04:49:21.379 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 04:49:21.381 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 88
2026-01-16 04:49:21.381 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 88 (position: 3)
2026-01-16 04:49:21.381 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 88
2026-01-16 04:49:31.883 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 04:49:31.884 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 88...
2026-01-16 04:49:31.887 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 88 (TIENLEN)
2026-01-16 04:49:31.887 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 04:49:31.891 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 88 by host 2
2026-01-16 04:50:18.167 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 04:50:18.167 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 88
2026-01-16 04:50:18.167 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 88
2026-01-16 04:50:18.167 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 88 (còn lại 3 players)
2026-01-16 04:50:18.196 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 04:50:18.200 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 88
2026-01-16 04:50:18.200 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 88
2026-01-16 04:50:18.200 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 88 thành user 4
2026-01-16 04:50:18.200 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 88 từ 2 sang 4
2026-01-16 04:50:18.200 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 88 (còn lại 2 players)
2026-01-16 05:00:29.045 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:00:29.225 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:00:29.371 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:00:29.371 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:00:29.371 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:00:29.371 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:00:29.377 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:00:29.378 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:00:29.378 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:00:29.378 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:00:29.379 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:00:29.379 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:00:29.380 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:00:29.380 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:00:29.381 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:00:29.381 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:00:29.381 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:00:29.382 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:00:29.382 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:00:29.382 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:00:29.384 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:00:29.386 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:00:29.386 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:00:29.386 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:00:29.386 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:00:29.386 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:00:29.450 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:00:29.463 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:00:29.466 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:00:29.466 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:00:29.466 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:02:29.246 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50894 (ID: 1)
2026-01-16 05:02:33.736 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 05:02:33.736 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 05:02:33.796 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:02:33.796 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 05:02:33.796 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:02:34.146 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 05:02:34.146 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 05:02:34.150 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:02:34.150 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:02:34.150 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:34.156 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 05:02:34.156 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 05:02:34.158 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:02:34.159 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 05:02:34.159 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:02:34.160 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:02:34.160 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:02:36.061 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:38.066 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:39.202 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: JoinRoomRequest
2026-01-16 05:02:39.209 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 88
2026-01-16 05:02:39.209 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 88 (position: 0)
2026-01-16 05:02:39.209 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã tham gia room 88
2026-01-16 05:02:40.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 05:02:40.466 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 88
2026-01-16 05:02:40.466 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 88
2026-01-16 05:02:40.467 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 88
2026-01-16 05:02:40.467 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 88
2026-01-16 05:02:40.467 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 88 (còn lại 0 players)
2026-01-16 05:02:41.316 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:43.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:45.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:47.323 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:49.326 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:51.327 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:53.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:55.265 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50908 (ID: 2)
2026-01-16 05:02:55.329 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:57.333 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:58.248 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50911 (ID: 3)
2026-01-16 05:02:59.336 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:02:59.500 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50912 (ID: 4)
2026-01-16 05:03:01.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:01.811 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 05:03:01.811 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 05:03:01.879 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:03:01.880 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 05:03:01.880 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:03:02.229 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 05:03:02.229 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 05:03:02.230 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:03:02.230 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:03:02.230 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:02.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 05:03:02.231 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 05:03:02.231 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:03:02.231 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 05:03:02.231 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:03:02.233 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:03:02.234 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:03:03.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:04.139 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:05.341 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:06.114 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 05:03:06.114 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 05:03:06.187 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:03:06.188 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 05:03:06.188 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:03:06.188 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:06.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 05:03:06.565 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 05:03:06.566 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:03:06.566 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:03:06.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:06.567 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 05:03:06.567 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 05:03:06.568 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:03:06.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 05:03:06.568 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:03:06.569 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:03:06.570 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:03:07.340 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:08.143 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:08.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:09.345 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:10.145 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:10.447 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:10.648 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:03:10.648 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 05:03:10.716 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:03:10.717 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 05:03:10.717 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:03:11.064 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 05:03:11.064 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 05:03:11.065 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:03:11.065 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:03:11.065 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:11.066 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 05:03:11.066 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 05:03:11.066 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:03:11.066 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 05:03:11.066 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:03:11.067 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:03:11.067 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:03:11.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:12.147 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:12.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:12.976 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:13.348 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:14.150 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:14.454 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:14.975 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:15.350 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:16.153 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:16.457 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:16.979 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:17.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:03:17.127 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 89
2026-01-16 05:03:17.127 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 89)
2026-01-16 05:03:17.130 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 89 (position: 0)
2026-01-16 05:03:17.130 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 89)
2026-01-16 05:03:17.351 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:18.157 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:18.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:18.926 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 05:03:18.927 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 88 không tồn tại trong memory
2026-01-16 05:03:18.982 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:20.157 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:20.460 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:20.985 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:21.082 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: JoinRoomRequest
2026-01-16 05:03:21.084 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 89
2026-01-16 05:03:21.084 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 89 (position: 1)
2026-01-16 05:03:21.084 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã tham gia room 89
2026-01-16 05:03:21.147 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:21.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 05:03:21.935 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 88 không tồn tại trong memory
2026-01-16 05:03:22.160 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:22.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:22.988 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:24.003 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:24.167 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:24.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:24.991 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:26.003 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:26.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:26.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:26.991 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:28.006 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:28.172 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:28.463 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:28.992 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:30.010 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:30.171 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:30.466 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:30.994 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:32.009 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:32.175 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:32.468 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:32.995 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:34.012 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:34.178 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:34.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:35.000 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:35.016 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:03:35.017 [Server] INFO  c.mygame.server.room.GameRoomManager - User 2 is already in room 89, leaving before creating new room
2026-01-16 05:03:35.017 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 89
2026-01-16 05:03:35.017 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 89
2026-01-16 05:03:35.018 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 89
2026-01-16 05:03:35.019 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 89
2026-01-16 05:03:35.019 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 89 (còn lại 0 players)
2026-01-16 05:03:35.020 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 90
2026-01-16 05:03:35.020 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 12 (ID: 90)
2026-01-16 05:03:35.020 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 90 (position: 0)
2026-01-16 05:03:35.020 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 12 (ID: 90)
2026-01-16 05:03:36.181 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:36.472 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:37.000 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:37.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 05:03:37.240 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 88 không tồn tại trong memory
2026-01-16 05:03:38.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:38.234 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:38.475 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:39.002 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:39.991 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 05:03:39.992 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 90
2026-01-16 05:03:39.992 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 90 (position: 1)
2026-01-16 05:03:39.992 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 90
2026-01-16 05:03:40.188 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:40.237 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:40.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:41.304 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaveRoomRequest
2026-01-16 05:03:41.305 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 90
2026-01-16 05:03:41.305 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 90
2026-01-16 05:03:41.305 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 90 (còn lại 1 players)
2026-01-16 05:03:42.188 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:42.238 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:42.313 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:42.477 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:44.190 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:44.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:44.316 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:44.482 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:46.193 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:46.243 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:46.316 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:46.485 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:48.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:48.243 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:48.318 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:48.487 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:50.199 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:50.244 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:03:50.320 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:50.490 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:50.999 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: JoinRoomRequest
2026-01-16 05:03:51.002 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 90
2026-01-16 05:03:51.002 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 90 (position: 1)
2026-01-16 05:03:51.002 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã tham gia room 90
2026-01-16 05:03:52.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:52.325 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:52.494 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:53.163 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:03:53.164 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 90
2026-01-16 05:03:53.164 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 90 (position: 1)
2026-01-16 05:03:53.164 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 90
2026-01-16 05:03:54.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:54.497 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:56.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:56.382 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaveRoomRequest
2026-01-16 05:03:56.383 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 90
2026-01-16 05:03:56.383 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 90
2026-01-16 05:03:56.383 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 90 (còn lại 1 players)
2026-01-16 05:03:56.499 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:57.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:03:58.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:03:58.503 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:03:59.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:00.334 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:00.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:01.418 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:02.266 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 05:04:02.266 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 88 không tồn tại trong memory
2026-01-16 05:04:02.336 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:02.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:03.419 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:03.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:04.339 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:04.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:05.417 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:05.509 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:06.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:06.507 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:07.425 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:07.507 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:08.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:08.516 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:09.427 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:09.515 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:10.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:10.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:11.431 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:11.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:12.346 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:12.516 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:13.431 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:13.519 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:14.349 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:14.522 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:15.434 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:15.522 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:16.353 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:16.525 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:17.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:17.525 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:18.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:18.525 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:19.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:19.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:20.359 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:20.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:21.437 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:21.528 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:22.363 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:22.531 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:23.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:23.531 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:24.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:24.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:25.440 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:25.531 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:26.365 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:26.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:27.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:27.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:28.368 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:28.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:29.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:29.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:30.372 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:30.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:31.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:31.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:32.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:32.540 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:33.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:33.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:34.376 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:34.537 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:35.448 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:35.542 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:36.378 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:36.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:37.452 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:37.541 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:38.381 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:38.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:39.455 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:39.546 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:40.383 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:40.549 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:41.458 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:41.549 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:04:42.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:04:42.169 [Server] INFO  c.mygame.server.room.GameRoomManager - User 2 is already in room 90, leaving before creating new room
2026-01-16 05:04:42.169 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 90
2026-01-16 05:04:42.169 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 90
2026-01-16 05:04:42.169 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 90
2026-01-16 05:04:42.169 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 90
2026-01-16 05:04:42.169 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 90 (còn lại 0 players)
2026-01-16 05:04:42.176 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 91
2026-01-16 05:04:42.176 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 91)
2026-01-16 05:04:42.176 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 91 (position: 0)
2026-01-16 05:04:42.176 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 91)
2026-01-16 05:04:42.387 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:42.550 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:43.458 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:44.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:44.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:45.457 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:46.392 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:46.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:47.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:04:48.396 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:48.562 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:48.986 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:04:48.988 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 91
2026-01-16 05:04:48.988 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 91 (position: 1)
2026-01-16 05:04:48.988 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 91
2026-01-16 05:04:50.396 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:50.565 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:04:51.297 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 05:04:51.297 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 91
2026-01-16 05:04:51.297 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 91 (position: 2)
2026-01-16 05:04:51.297 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 91
2026-01-16 05:04:52.401 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:04:52.927 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 05:04:52.928 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 91
2026-01-16 05:04:52.928 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 91 (position: 3)
2026-01-16 05:04:52.928 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 91
2026-01-16 05:05:02.186 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaveRoomRequest
2026-01-16 05:05:02.186 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 88 không tồn tại trong memory
2026-01-16 05:05:03.556 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:04.906 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaveRoomRequest
2026-01-16 05:05:04.906 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 90 không tồn tại trong memory
2026-01-16 05:05:05.381 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:05:05.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:07.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:05:07.567 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:08.146 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaveRoomRequest
2026-01-16 05:05:08.146 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 91
2026-01-16 05:05:08.146 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 91
2026-01-16 05:05:08.146 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 91 (còn lại 3 players)
2026-01-16 05:05:09.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:05:09.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:05:09.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:09.855 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaveRoomRequest
2026-01-16 05:05:09.855 [Server] WARN  c.mygame.server.room.GameRoomManager - Room 90 không tồn tại trong memory
2026-01-16 05:05:11.326 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:05:11.387 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:05:11.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:05:11.574 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:12.535 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 05:05:12.536 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 91
2026-01-16 05:05:12.536 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 91
2026-01-16 05:05:12.536 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 91 (còn lại 2 players)
2026-01-16 05:05:13.332 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:05:13.416 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:05:13.571 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:14.028 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 05:05:15.336 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:05:15.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:05:15.937 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 05:05:15.937 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 91
2026-01-16 05:05:15.937 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 91
2026-01-16 05:05:15.937 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 91 thành user 1
2026-01-16 05:05:15.937 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 91 từ 2 sang 1
2026-01-16 05:05:15.937 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 91 (còn lại 1 players)
2026-01-16 05:05:17.032 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 05:05:17.033 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 91
2026-01-16 05:05:17.034 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 91
2026-01-16 05:05:17.034 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 91
2026-01-16 05:05:17.034 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 91
2026-01-16 05:05:17.034 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 91 (còn lại 0 players)
2026-01-16 05:08:11.137 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:08:11.349 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:08:11.384 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:08:11.384 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:08:11.384 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:08:11.384 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:08:11.388 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:08:11.388 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:08:11.388 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:08:11.393 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:08:11.395 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:08:11.396 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:08:11.396 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:08:11.397 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:08:11.397 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:08:11.406 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:08:11.407 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:08:11.407 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:08:11.407 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:08:11.497 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:08:11.507 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:08:11.507 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:08:11.507 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:08:11.507 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:08:22.523 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50129 (ID: 1)
2026-01-16 05:08:27.004 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50130 (ID: 2)
2026-01-16 05:08:27.762 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50132 (ID: 3)
2026-01-16 05:08:33.690 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 05:08:33.690 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 05:08:33.773 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:08:33.776 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 05:08:33.776 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:08:34.125 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 05:08:34.125 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 05:08:34.127 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:08:34.128 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:08:34.129 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:08:34.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 05:08:34.132 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 05:08:34.134 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:08:34.135 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 05:08:34.135 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:08:34.137 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:08:34.138 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:08:36.039 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:08:36.802 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 05:08:36.803 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 05:08:36.868 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:08:36.870 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 05:08:36.870 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:08:37.220 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 05:08:37.220 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 05:08:37.220 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:08:37.225 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:08:37.225 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:08:37.225 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 05:08:37.225 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 05:08:37.226 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:08:37.226 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 05:08:37.226 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:08:37.226 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:08:37.227 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:08:38.042 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:08:39.130 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:08:39.971 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 05:08:39.972 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 05:08:40.040 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:08:40.040 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 05:08:40.040 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:08:40.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:08:40.387 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 05:08:40.387 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 05:08:40.387 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:08:40.388 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:08:40.388 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:08:40.388 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 05:08:40.388 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 05:08:40.389 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:08:40.389 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 05:08:40.389 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:08:40.389 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:08:40.390 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:08:41.130 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:08:42.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:08:42.301 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:08:43.133 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:08:43.543 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:08:43.547 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 92
2026-01-16 05:08:43.547 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 92)
2026-01-16 05:08:43.550 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 92 (position: 0)
2026-01-16 05:08:43.550 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 92)
2026-01-16 05:08:44.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:08:45.136 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:08:46.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:08:46.783 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:08:46.785 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 92
2026-01-16 05:08:46.785 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 92 (position: 1)
2026-01-16 05:08:46.785 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 92
2026-01-16 05:08:48.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 05:08:48.219 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 92
2026-01-16 05:08:48.219 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 92 (position: 2)
2026-01-16 05:08:48.219 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 92
2026-01-16 05:08:48.308 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:08:50.171 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 05:08:50.171 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 92...
2026-01-16 05:08:50.175 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 2: 65000
2026-01-16 05:08:50.175 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 3: 223000
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Loaded credits for player 4: 22000
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Player 3 posts SB: 500
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Player 2 posts BB: 1000
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 2: [4P, 9P]
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 3: [6C, 8P]
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Dealt to 4: [9D, JC]
2026-01-16 05:08:50.176 [Server] INFO  c.m.server.game.PokerGameSession - Pre-flop starts. First actor: Player 3
2026-01-16 05:08:50.177 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session PokerGameSession cho room 92 (POKER)
2026-01-16 05:08:50.177 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 05:08:50.177 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 92 by host 2
2026-01-16 05:08:57.644 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 05:08:57.645 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 92
2026-01-16 05:08:57.646 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 92
2026-01-16 05:08:57.646 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 92 thành user 3
2026-01-16 05:08:57.646 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 92 từ 2 sang 3
2026-01-16 05:08:57.646 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 92 (còn lại 2 players)
2026-01-16 05:08:58.814 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 05:08:58.816 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 92
2026-01-16 05:08:58.816 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 92
2026-01-16 05:08:58.816 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 92 (còn lại 1 players)
2026-01-16 05:08:59.821 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 05:08:59.823 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 92
2026-01-16 05:08:59.823 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 92
2026-01-16 05:08:59.823 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 92
2026-01-16 05:08:59.823 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 92
2026-01-16 05:08:59.823 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 92 (còn lại 0 players)
2026-01-16 05:09:05.726 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50142 (ID: 4)
2026-01-16 05:09:06.734 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50143 (ID: 5)
2026-01-16 05:09:10.133 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50151 (ID: 6)
2026-01-16 05:09:14.692 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:09:14.692 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=123
2026-01-16 05:09:14.745 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:09:14.745 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 4
2026-01-16 05:09:14.745 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:09:15.118 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 05:09:15.119 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 05:09:15.119 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:09:15.119 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:09:15.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:15.120 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 05:09:15.120 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=2, limit=5
2026-01-16 05:09:15.120 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:09:15.120 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 05:09:15.120 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:09:15.120 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:09:15.120 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:09:16.038 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:50153 (ID: 7)
2026-01-16 05:09:17.004 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:18.395 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LoginRequest
2026-01-16 05:09:18.395 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 5: username=123123
2026-01-16 05:09:18.446 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:09:18.447 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 5
2026-01-16 05:09:18.447 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:09:18.799 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaderboardRequest
2026-01-16 05:09:18.801 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 5: limit=50
2026-01-16 05:09:18.801 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:09:18.801 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:09:18.801 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:18.802 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: MatchHistoryRequest
2026-01-16 05:09:18.802 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 5: userId=3, limit=5
2026-01-16 05:09:18.802 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:09:18.802 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: GetQuestsRequest
2026-01-16 05:09:18.802 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:09:18.804 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:09:18.804 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:09:19.007 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:20.710 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:21.007 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:22.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LoginRequest
2026-01-16 05:09:22.465 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 6: username=123123123
2026-01-16 05:09:22.515 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:09:22.515 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 6
2026-01-16 05:09:22.515 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:09:22.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:22.863 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaderboardRequest
2026-01-16 05:09:22.863 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 6: limit=50
2026-01-16 05:09:22.863 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:09:22.863 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:09:22.863 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:22.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: MatchHistoryRequest
2026-01-16 05:09:22.865 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 6: userId=4, limit=5
2026-01-16 05:09:22.865 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:09:22.865 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: GetQuestsRequest
2026-01-16 05:09:22.865 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:09:22.865 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:09:22.866 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:09:23.010 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:24.719 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:24.775 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:25.010 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:26.720 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:26.770 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LoginRequest
2026-01-16 05:09:26.770 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 7: username=manh
2026-01-16 05:09:26.819 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:09:26.819 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 7
2026-01-16 05:09:26.819 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:09:26.819 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:27.013 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:27.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LeaderboardRequest
2026-01-16 05:09:27.166 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 7: limit=50
2026-01-16 05:09:27.166 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:09:27.166 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:09:27.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:09:27.166 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: MatchHistoryRequest
2026-01-16 05:09:27.166 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 7: userId=1, limit=5
2026-01-16 05:09:27.166 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:09:27.167 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: GetQuestsRequest
2026-01-16 05:09:27.167 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:09:27.167 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:09:27.168 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:09:28.726 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:28.779 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:29.013 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:29.079 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:09:30.726 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:30.782 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:31.016 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:09:31.082 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:09:32.614 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: CreateRoomRequest
2026-01-16 05:09:32.615 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 93
2026-01-16 05:09:32.615 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 93)
2026-01-16 05:09:32.617 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 93 (position: 0)
2026-01-16 05:09:32.617 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 93)
2026-01-16 05:09:32.728 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:32.785 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:33.085 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:09:34.727 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:09:34.788 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:35.088 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:09:35.260 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: JoinRoomRequest
2026-01-16 05:09:35.262 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 93
2026-01-16 05:09:35.262 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 93 (position: 1)
2026-01-16 05:09:35.262 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 93
2026-01-16 05:09:36.792 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:09:36.891 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: JoinRoomRequest
2026-01-16 05:09:36.893 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 93
2026-01-16 05:09:36.893 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 93 (position: 2)
2026-01-16 05:09:36.893 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 93
2026-01-16 05:09:37.091 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:09:38.697 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: JoinRoomRequest
2026-01-16 05:09:38.699 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 93
2026-01-16 05:09:38.699 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 93 (position: 3)
2026-01-16 05:09:38.699 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 93
2026-01-16 05:09:38.700 [Server] INFO  c.mygame.server.handlers.RoomHandler - Room 93 is full (4 players). Auto-starting game...
2026-01-16 05:09:38.706 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 93 (TIENLEN)
2026-01-16 05:10:16.484 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LeaveRoomRequest
2026-01-16 05:10:16.486 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 93
2026-01-16 05:10:16.486 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 93
2026-01-16 05:10:16.486 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 93 (còn lại 3 players)
2026-01-16 05:10:16.875 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:10:17.678 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: JoinRoomRequest
2026-01-16 05:10:18.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:10:20.878 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:10:22.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:10:23.449 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 05:10:23.450 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 93
2026-01-16 05:10:23.451 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 93
2026-01-16 05:10:23.451 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 93 thành user 3
2026-01-16 05:10:23.451 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 93 từ 2 sang 3
2026-01-16 05:10:23.451 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 93 (còn lại 2 players)
2026-01-16 05:10:24.494 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 05:10:24.495 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 93
2026-01-16 05:10:24.495 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 93
2026-01-16 05:10:24.495 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 93 thành user 4
2026-01-16 05:10:24.495 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 93 từ 3 sang 4
2026-01-16 05:10:24.495 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 93 (còn lại 1 players)
2026-01-16 05:10:24.884 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:10:25.627 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 05:10:25.629 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 93
2026-01-16 05:10:25.630 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 93
2026-01-16 05:10:25.630 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 93
2026-01-16 05:10:25.630 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 93
2026-01-16 05:10:25.630 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 93 (còn lại 0 players)
2026-01-16 05:10:26.526 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 05:23:03.603 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:23:03.788 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:23:03.822 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:23:03.822 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:23:03.822 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:23:03.822 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:23:03.827 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:23:03.830 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:23:03.836 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:23:03.838 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:23:03.841 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:23:03.842 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:23:03.842 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:23:03.842 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:23:03.905 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:23:03.913 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:23:03.925 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:23:03.925 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:23:03.925 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:23:13.470 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58201 (ID: 1)
2026-01-16 05:23:22.027 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 05:23:22.027 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 05:23:22.101 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:23:22.105 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 05:23:22.105 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:23:22.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 05:23:22.475 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 05:23:22.476 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:23:22.476 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:23:22.476 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:22.481 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 05:23:22.481 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 05:23:22.484 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:23:22.485 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 05:23:22.485 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:23:22.486 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:23:22.486 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:23:24.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:26.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:27.130 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58214 (ID: 2)
2026-01-16 05:23:28.362 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58215 (ID: 3)
2026-01-16 05:23:28.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:30.366 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:30.387 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:58216 (ID: 4)
2026-01-16 05:23:31.347 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 05:23:31.347 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 05:23:31.397 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:23:31.397 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 05:23:31.397 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:23:31.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 05:23:31.749 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 05:23:31.751 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:23:31.751 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:23:31.751 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:31.751 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 05:23:31.751 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 05:23:31.751 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:23:31.751 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 05:23:31.751 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:23:31.751 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:23:31.751 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:23:32.370 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:33.656 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:34.375 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:35.636 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 05:23:35.636 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 05:23:35.695 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:23:35.695 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 05:23:35.696 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:23:35.696 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:36.039 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 05:23:36.039 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 05:23:36.044 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:23:36.044 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:23:36.044 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:36.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 05:23:36.045 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 05:23:36.045 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:23:36.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 05:23:36.045 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:23:36.046 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:23:36.047 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:23:36.377 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:37.666 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:37.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:38.380 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:39.667 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:39.956 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:40.384 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:40.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:23:40.438 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 05:23:40.486 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:23:40.486 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 05:23:40.486 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:23:40.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 05:23:40.831 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 05:23:40.831 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:23:40.831 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:23:40.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:40.831 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 05:23:40.831 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 05:23:40.834 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:23:40.834 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 05:23:40.834 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:23:40.834 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:23:40.835 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:23:41.668 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:41.957 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:42.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:42.747 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:43.675 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:43.960 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:44.386 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:44.747 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:45.678 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:45.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:46.390 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:23:46.749 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:46.785 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:23:46.789 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 94
2026-01-16 05:23:46.789 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 94)
2026-01-16 05:23:46.791 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 94 (position: 0)
2026-01-16 05:23:46.791 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 94)
2026-01-16 05:23:47.680 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:47.965 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:48.752 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:49.684 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:23:49.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:23:49.889 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 94
2026-01-16 05:23:49.889 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 94 (position: 1)
2026-01-16 05:23:49.889 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 94
2026-01-16 05:23:49.967 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:50.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:51.966 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:23:52.134 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 05:23:52.136 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 94
2026-01-16 05:23:52.136 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 94 (position: 2)
2026-01-16 05:23:52.136 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 94
2026-01-16 05:23:52.756 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:23:54.360 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 05:23:54.361 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 94
2026-01-16 05:23:54.362 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 94 (position: 3)
2026-01-16 05:23:54.362 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 94
2026-01-16 05:23:57.706 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 05:23:57.706 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 94...
2026-01-16 05:23:57.706 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 94 (TIENLEN)
2026-01-16 05:23:57.706 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 05:23:57.706 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 94 by host 2
2026-01-16 05:24:43.667 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 05:24:43.667 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 94
2026-01-16 05:24:43.667 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 94
2026-01-16 05:24:43.667 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 94 thành user 3
2026-01-16 05:24:43.667 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 94 từ 2 sang 3
2026-01-16 05:24:43.667 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 94 (còn lại 3 players)
2026-01-16 05:24:44.719 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 05:24:44.719 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 94
2026-01-16 05:24:44.719 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 94
2026-01-16 05:24:44.719 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 94 thành user 4
2026-01-16 05:24:44.719 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 94 từ 3 sang 4
2026-01-16 05:24:44.719 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 94 (còn lại 2 players)
2026-01-16 05:24:45.746 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 05:24:45.754 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 94
2026-01-16 05:24:45.754 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 94
2026-01-16 05:24:45.759 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 94 thành user 1
2026-01-16 05:24:45.759 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 94 từ 4 sang 1
2026-01-16 05:24:45.759 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 94 (còn lại 1 players)
2026-01-16 05:24:46.875 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 05:24:46.880 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 94
2026-01-16 05:24:46.880 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 94
2026-01-16 05:24:46.881 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 94
2026-01-16 05:24:46.881 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 94
2026-01-16 05:24:46.881 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 94 (còn lại 0 players)
2026-01-16 05:28:48.985 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:28:49.316 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:28:49.347 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:28:49.347 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:28:49.347 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:28:49.347 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:28:49.356 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:28:49.367 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:28:49.367 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:28:49.367 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:28:49.367 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:28:49.367 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:28:49.450 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:28:49.460 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:28:49.466 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:28:49.466 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:28:49.466 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:30:31.696 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:30:31.877 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:30:31.909 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:30:31.909 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:30:31.909 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:30:31.909 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:30:31.915 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:30:31.916 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:30:31.916 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:30:31.916 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:30:31.916 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:30:31.917 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:30:31.917 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:30:31.917 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:30:31.918 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:30:31.918 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:30:31.918 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:30:31.919 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:30:31.919 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:30:31.919 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:30:31.920 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:30:31.926 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:30:31.927 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:30:31.928 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:30:31.928 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:30:31.928 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:30:31.992 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:30:31.999 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:30:32.006 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:30:32.006 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:30:32.006 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:30:43.228 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:52801 (ID: 1)
2026-01-16 05:30:53.022 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 05:30:53.022 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 05:30:53.088 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:30:53.091 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 05:30:53.092 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:30:53.467 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 05:30:53.468 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 05:30:53.470 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:30:53.471 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:30:53.471 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:30:53.474 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 05:30:53.475 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 05:30:53.478 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:30:53.479 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 05:30:53.479 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:30:53.482 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:30:53.483 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:30:55.349 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:30:55.424 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:52814 (ID: 2)
2026-01-16 05:30:57.349 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:30:57.679 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:52816 (ID: 3)
2026-01-16 05:30:59.352 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:30:59.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 05:30:59.506 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 05:30:59.583 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:30:59.583 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 05:30:59.583 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:30:59.683 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:52817 (ID: 4)
2026-01-16 05:30:59.932 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 05:30:59.932 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 05:30:59.933 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:30:59.934 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:30:59.934 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:30:59.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 05:30:59.935 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 05:30:59.935 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:30:59.935 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 05:30:59.935 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:30:59.936 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:30:59.936 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:31:01.355 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:01.843 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:03.358 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:03.834 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 05:31:03.835 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 05:31:03.896 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:31:03.896 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 05:31:03.905 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:31:03.905 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:04.255 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 05:31:04.255 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 05:31:04.256 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:31:04.256 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:31:04.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:04.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 05:31:04.256 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 05:31:04.256 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:31:04.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 05:31:04.256 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:31:04.259 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:31:04.259 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:31:05.361 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:05.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:06.165 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:07.364 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:07.846 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:08.046 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:31:08.046 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 05:31:08.115 [Server] WARN  com.mygame.server.database.UserDAO - Incorrect password for user: manh
2026-01-16 05:31:08.116 [Server] WARN  c.m.server.handlers.LoginHandler - Login thất bại: Incorrect username or password
2026-01-16 05:31:08.168 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:09.367 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:09.849 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:10.169 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:10.877 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:31:10.877 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 05:31:10.945 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:31:10.946 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 05:31:10.946 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:31:11.291 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 05:31:11.291 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 05:31:11.292 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:31:11.292 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:31:11.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:31:11.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 05:31:11.293 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 05:31:11.293 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:31:11.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 05:31:11.293 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:31:11.295 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:31:11.295 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:31:11.371 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:11.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:12.174 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:13.205 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:31:13.370 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:13.852 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:14.177 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:15.205 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:31:15.374 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:31:15.555 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:31:15.560 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 95
2026-01-16 05:31:15.560 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 95)
2026-01-16 05:31:15.563 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 95 (position: 0)
2026-01-16 05:31:15.564 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 95)
2026-01-16 05:31:15.855 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:16.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:17.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:31:17.855 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:31:18.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:31:18.051 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 95
2026-01-16 05:31:18.053 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 95 (position: 1)
2026-01-16 05:31:18.053 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 95
2026-01-16 05:31:18.182 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:19.211 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:31:20.042 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 05:31:20.044 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 95
2026-01-16 05:31:20.044 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 95 (position: 2)
2026-01-16 05:31:20.044 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 95
2026-01-16 05:31:20.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:31:21.209 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:31:22.334 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 05:31:22.335 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 95
2026-01-16 05:31:22.336 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 95 (position: 3)
2026-01-16 05:31:22.336 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 95
2026-01-16 05:31:24.615 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 05:31:24.615 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 95...
2026-01-16 05:31:24.623 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 95 (TIENLEN)
2026-01-16 05:31:24.623 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 05:31:24.623 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 95 by host 2
2026-01-16 05:31:38.312 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 05:31:38.313 [Server] DEBUG c.m.server.game.TienLenGameSession - Ignore action from 2 (not turn)
2026-01-16 05:31:50.630 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 05:31:50.630 [Server] DEBUG c.m.server.game.TienLenGameSession - First turn must contain 3 Spades
2026-01-16 05:31:53.316 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 05:31:53.317 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 95
2026-01-16 05:31:53.317 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 95
2026-01-16 05:31:53.318 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 95 thành user 3
2026-01-16 05:31:53.318 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 95 từ 2 sang 3
2026-01-16 05:31:53.318 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 95 (còn lại 3 players)
2026-01-16 05:31:54.639 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 05:31:54.641 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 95
2026-01-16 05:31:54.642 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 95
2026-01-16 05:31:54.642 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 95 thành user 4
2026-01-16 05:31:54.643 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 95 từ 3 sang 4
2026-01-16 05:31:54.643 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 95 (còn lại 2 players)
2026-01-16 05:31:55.700 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 05:31:55.701 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 95
2026-01-16 05:31:55.701 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 95
2026-01-16 05:31:55.702 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 95 thành user 1
2026-01-16 05:31:55.702 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 95 từ 4 sang 1
2026-01-16 05:31:55.702 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 95 (còn lại 1 players)
2026-01-16 05:31:56.739 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 05:31:56.739 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 95
2026-01-16 05:31:56.739 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 95
2026-01-16 05:31:56.739 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 95
2026-01-16 05:31:56.744 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 95
2026-01-16 05:31:56.744 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 95 (còn lại 0 players)
2026-01-16 05:42:28.419 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:42:28.594 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:42:28.728 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:42:28.728 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:42:28.728 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:42:28.728 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:42:28.734 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:42:28.738 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:42:28.738 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:42:28.738 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:42:28.739 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:42:28.742 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:42:28.742 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:42:28.742 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:42:28.742 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:42:28.742 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:42:28.810 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:42:28.820 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:42:28.825 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:42:28.825 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:42:28.825 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:42:43.005 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49734 (ID: 1)
2026-01-16 05:42:46.481 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49735 (ID: 2)
2026-01-16 05:42:47.239 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 05:42:47.242 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 05:42:47.299 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:42:47.309 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 05:42:47.309 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:42:47.659 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 05:42:47.664 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 05:42:47.664 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:42:47.664 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:42:47.668 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:47.669 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 05:42:47.669 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 05:42:47.673 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:42:47.674 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 05:42:47.674 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:42:47.675 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:42:47.678 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:42:48.212 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49736 (ID: 3)
2026-01-16 05:42:49.569 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:49.831 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49737 (ID: 4)
2026-01-16 05:42:51.414 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 05:42:51.414 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 05:42:51.465 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:42:51.466 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 05:42:51.466 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:42:51.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:51.809 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 05:42:51.809 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 05:42:51.812 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:42:51.812 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:42:51.812 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:42:51.812 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 05:42:51.812 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 05:42:51.812 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:42:51.812 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 05:42:51.812 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:42:51.812 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:42:51.812 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:42:53.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:53.725 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:42:55.577 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:55.728 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:42:56.130 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 05:42:56.130 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 05:42:56.181 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:42:56.184 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 05:42:56.184 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:42:56.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 05:42:56.534 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 05:42:56.534 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:42:56.534 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:42:56.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:42:56.534 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 05:42:56.536 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 05:42:56.536 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:42:56.536 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 05:42:56.536 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:42:56.536 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:42:56.538 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:42:57.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:57.728 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:42:58.439 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:42:59.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:42:59.731 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:00.443 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:01.584 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:43:01.734 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:02.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:03.584 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:43:03.734 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:04.011 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:43:04.011 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 05:43:04.059 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:43:04.059 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 05:43:04.059 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:43:04.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 05:43:04.411 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 05:43:04.412 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:43:04.412 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:43:04.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:43:04.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 05:43:04.412 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 05:43:04.412 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:43:04.412 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 05:43:04.412 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:43:04.413 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:43:04.413 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:43:04.450 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:05.589 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:43:05.738 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:06.324 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:43:06.449 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:07.589 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:43:07.743 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:08.328 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:43:08.456 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:08.594 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:43:08.599 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 96
2026-01-16 05:43:08.599 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 96)
2026-01-16 05:43:08.601 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 96 (position: 0)
2026-01-16 05:43:08.601 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 96)
2026-01-16 05:43:09.741 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:10.331 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:43:10.454 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:11.744 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:43:12.148 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:43:12.149 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 96
2026-01-16 05:43:12.149 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 96 (position: 1)
2026-01-16 05:43:12.149 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 96
2026-01-16 05:43:12.334 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:43:12.459 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:43:13.888 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 05:43:13.889 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 96
2026-01-16 05:43:13.890 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 96 (position: 2)
2026-01-16 05:43:13.890 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 96
2026-01-16 05:43:14.338 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:43:15.356 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 05:43:15.358 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 96
2026-01-16 05:43:15.358 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 96 (position: 3)
2026-01-16 05:43:15.358 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 96
2026-01-16 05:43:19.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 05:43:19.320 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 96...
2026-01-16 05:43:19.325 [Server] INFO  c.m.server.game.TienLenGameSession - Player 2 has the 3 of Spades
2026-01-16 05:43:19.325 [Server] INFO  c.m.server.game.TienLenGameSession - First player determined: 2 (Index 0)
2026-01-16 05:43:19.327 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 96 (TIENLEN)
2026-01-16 05:43:19.327 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 05:43:19.327 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 96 by host 2
2026-01-16 05:43:24.033 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 05:43:24.033 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 2 (Current Turn: 2)
2026-01-16 05:43:24.033 [Server] INFO  c.m.server.game.TienLenGameSession - Player 2 played valid move: [3P, 3C] (PAIR)
2026-01-16 05:43:33.799 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 05:43:33.799 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 3 (Current Turn: 3)
2026-01-16 05:43:33.799 [Server] INFO  c.m.server.game.TienLenGameSession - Player 3 played valid move: [4D, 4H] (PAIR)
2026-01-16 05:43:41.042 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 05:43:41.042 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 4 (Current Turn: 4)
2026-01-16 05:43:41.042 [Server] INFO  c.m.server.game.TienLenGameSession - Player 4 played valid move: [9P, 9C] (PAIR)
2026-01-16 05:43:45.938 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 05:43:45.939 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 1 (Current Turn: 1)
2026-01-16 05:43:45.939 [Server] WARN  c.m.server.game.TienLenGameSession - REJECTED: Cannot beat current cards. Board: [9P, 9C], Played: [3D, 3H]
2026-01-16 05:44:03.464 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 05:44:03.464 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 1 (Current Turn: 1)
2026-01-16 05:44:03.464 [Server] INFO  c.m.server.game.TienLenGameSession - Player 1 played valid move: [QC, QH] (PAIR)
2026-01-16 05:44:15.319 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 05:44:15.325 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 2 (Current Turn: 2)
2026-01-16 05:44:15.325 [Server] INFO  c.m.server.game.TienLenGameSession - Player 2 played valid move: [2P, 2H] (PAIR)
2026-01-16 05:44:36.638 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 05:44:36.639 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 96
2026-01-16 05:44:36.639 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 96
2026-01-16 05:44:36.640 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 96 thành user 3
2026-01-16 05:44:36.640 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 96 từ 2 sang 3
2026-01-16 05:44:36.640 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 96 (còn lại 3 players)
2026-01-16 05:44:39.181 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 05:44:39.183 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 96
2026-01-16 05:44:39.184 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 96
2026-01-16 05:44:39.184 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 96 thành user 4
2026-01-16 05:44:39.184 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 96 từ 3 sang 4
2026-01-16 05:44:39.184 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 96 (còn lại 2 players)
2026-01-16 05:44:40.074 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 05:44:40.076 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 96
2026-01-16 05:44:40.076 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 96
2026-01-16 05:44:40.077 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 96 thành user 1
2026-01-16 05:44:40.077 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 96 từ 4 sang 1
2026-01-16 05:44:40.077 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 96 (còn lại 1 players)
2026-01-16 05:44:41.829 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 05:44:41.830 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 96
2026-01-16 05:44:41.830 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 96
2026-01-16 05:44:41.831 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 96
2026-01-16 05:44:41.831 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 96
2026-01-16 05:44:41.831 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 96 (còn lại 0 players)
2026-01-16 05:51:23.998 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 05:51:24.282 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 05:51:24.316 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 05:51:24.317 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 05:51:24.317 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 05:51:24.317 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 05:51:24.321 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 05:51:24.322 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 05:51:24.322 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 05:51:24.322 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 05:51:24.324 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 05:51:24.324 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 05:51:24.325 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 05:51:24.326 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 05:51:24.329 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 05:51:24.334 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 05:51:24.334 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 05:51:24.335 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 05:51:24.335 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 05:51:24.335 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 05:51:24.407 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 05:51:24.415 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 05:51:24.422 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 05:51:24.423 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 05:51:24.423 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 05:51:36.426 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64112 (ID: 1)
2026-01-16 05:51:37.967 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64114 (ID: 2)
2026-01-16 05:51:44.737 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 05:51:44.737 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 05:51:44.811 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:51:44.814 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 05:51:44.814 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:51:45.179 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 05:51:45.179 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 05:51:45.180 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:51:45.180 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:51:45.180 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:45.184 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 05:51:45.184 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 05:51:45.190 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:51:45.190 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 05:51:45.190 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:51:45.194 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:51:45.196 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:51:47.071 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:47.670 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64124 (ID: 3)
2026-01-16 05:51:48.702 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64125 (ID: 4)
2026-01-16 05:51:48.805 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 05:51:48.805 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 05:51:48.859 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:51:48.859 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 05:51:48.859 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:51:49.075 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:49.205 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 05:51:49.205 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 05:51:49.208 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:51:49.208 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:51:49.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:51:49.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 05:51:49.208 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 05:51:49.208 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:51:49.208 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 05:51:49.208 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:51:49.211 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:51:49.211 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:51:51.078 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:51.119 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:51:53.080 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:53.115 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:51:53.185 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 05:51:53.185 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 05:51:53.238 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:51:53.238 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 05:51:53.238 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:51:53.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 05:51:53.586 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 05:51:53.586 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:51:53.586 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:51:53.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:51:53.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 05:51:53.586 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 05:51:53.586 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:51:53.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 05:51:53.586 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:51:53.590 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:51:53.590 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:51:55.085 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:55.121 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:51:55.495 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:51:57.085 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:57.118 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:51:57.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:51:57.998 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 05:51:57.998 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 05:51:58.046 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:51:58.046 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 05:51:58.046 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:51:58.395 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 05:51:58.395 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 05:51:58.397 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:51:58.397 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:51:58.397 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:51:58.397 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 05:51:58.397 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 05:51:58.398 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:51:58.398 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 05:51:58.398 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:51:58.398 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:51:58.398 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:51:59.085 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:51:59.126 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:51:59.504 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:52:00.306 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:52:01.087 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:52:01.125 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:52:01.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:52:02.305 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:52:03.095 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 05:52:03.128 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:52:03.498 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 05:52:03.502 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 97
2026-01-16 05:52:03.502 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 97)
2026-01-16 05:52:03.505 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 97 (position: 0)
2026-01-16 05:52:03.505 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 97)
2026-01-16 05:52:03.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:52:04.311 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:52:05.125 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 05:52:05.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:52:06.111 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 05:52:06.112 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 97
2026-01-16 05:52:06.112 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 97 (position: 1)
2026-01-16 05:52:06.112 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 97
2026-01-16 05:52:06.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:52:07.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 05:52:08.045 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 05:52:08.045 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 97
2026-01-16 05:52:08.047 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 97 (position: 2)
2026-01-16 05:52:08.047 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 97
2026-01-16 05:52:08.315 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 05:52:09.735 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 05:52:09.737 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 97
2026-01-16 05:52:09.737 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 97 (position: 3)
2026-01-16 05:52:09.737 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 97
2026-01-16 05:52:12.117 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 05:52:12.120 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 97...
2026-01-16 05:52:12.127 [Server] INFO  c.m.server.game.TienLenGameSession - Player 2 has the 3 of Spades
2026-01-16 05:52:12.127 [Server] INFO  c.m.server.game.TienLenGameSession - First player determined: 2 (Index 0)
2026-01-16 05:52:12.127 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 97 (TIENLEN)
2026-01-16 05:52:12.127 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 05:52:12.127 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 97 by host 2
2026-01-16 05:52:27.057 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 05:52:27.057 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: SKIP from Player 2 (Current Turn: 2)
2026-01-16 05:52:30.132 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 05:52:30.132 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 2 (Current Turn: 2)
2026-01-16 05:52:30.132 [Server] INFO  c.m.server.game.TienLenGameSession - Player 2 played valid move: [3P] (SINGLE)
2026-01-16 05:52:41.847 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 05:52:41.847 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 3 (Current Turn: 3)
2026-01-16 05:52:41.847 [Server] WARN  c.m.server.game.TienLenGameSession - REJECTED: Cannot beat current cards. Board: [3P], Played: [5P, 5C]
2026-01-16 05:52:44.405 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 05:52:44.405 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 3 (Current Turn: 3)
2026-01-16 05:52:44.405 [Server] WARN  c.m.server.game.TienLenGameSession - REJECTED: Cannot beat current cards. Board: [3P], Played: [5P, 5C]
2026-01-16 05:52:47.957 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 05:52:47.957 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 3 (Current Turn: 3)
2026-01-16 05:52:47.957 [Server] INFO  c.m.server.game.TienLenGameSession - Player 3 played valid move: [5P] (SINGLE)
2026-01-16 05:52:52.491 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 05:52:52.491 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 4 (Current Turn: 4)
2026-01-16 05:52:52.491 [Server] INFO  c.m.server.game.TienLenGameSession - Player 4 played valid move: [7P] (SINGLE)
2026-01-16 05:52:56.917 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: PlayerActionPacket
2026-01-16 05:52:56.924 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 1 (Current Turn: 1)
2026-01-16 05:52:56.924 [Server] INFO  c.m.server.game.TienLenGameSession - Player 1 played valid move: [9P] (SINGLE)
2026-01-16 05:53:46.585 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 05:53:46.590 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 2 (Current Turn: 2)
2026-01-16 05:53:46.590 [Server] INFO  c.m.server.game.TienLenGameSession - Player 2 played valid move: [2C] (SINGLE)
2026-01-16 05:54:02.934 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 05:54:02.936 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 97
2026-01-16 05:54:02.936 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 97
2026-01-16 05:54:02.936 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 97 thành user 3
2026-01-16 05:54:02.936 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 97 từ 2 sang 3
2026-01-16 05:54:02.936 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 97 (còn lại 3 players)
2026-01-16 05:54:04.489 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 05:54:04.489 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 97
2026-01-16 05:54:04.489 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 97
2026-01-16 05:54:04.489 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 97 thành user 4
2026-01-16 05:54:04.489 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 97 từ 3 sang 4
2026-01-16 05:54:04.489 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 97 (còn lại 2 players)
2026-01-16 05:54:05.273 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 05:54:05.275 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 97
2026-01-16 05:54:05.275 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 97
2026-01-16 05:54:05.276 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 97 thành user 1
2026-01-16 05:54:05.276 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 97 từ 4 sang 1
2026-01-16 05:54:05.276 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 97 (còn lại 1 players)
2026-01-16 05:54:06.535 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 05:54:06.541 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 97
2026-01-16 05:54:06.541 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 97
2026-01-16 05:54:06.542 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 97
2026-01-16 05:54:06.542 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 97
2026-01-16 05:54:06.542 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 97 (còn lại 0 players)
2026-01-16 05:58:38.782 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:49686 (ID: 5)
2026-01-16 05:58:49.494 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64884 (ID: 6)
2026-01-16 05:58:55.585 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64885 (ID: 7)
2026-01-16 05:58:57.864 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LoginRequest
2026-01-16 05:58:57.864 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 5: username=123
2026-01-16 05:58:57.934 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 05:58:57.934 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 5
2026-01-16 05:58:57.934 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 05:58:58.292 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: LeaderboardRequest
2026-01-16 05:58:58.292 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 5: limit=50
2026-01-16 05:58:58.293 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:58:58.293 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:58:58.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:58:58.293 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: MatchHistoryRequest
2026-01-16 05:58:58.293 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 5: userId=2, limit=5
2026-01-16 05:58:58.294 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:58:58.294 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: GetQuestsRequest
2026-01-16 05:58:58.294 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 05:58:58.295 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 05:58:58.295 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 05:59:00.197 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:02.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:02.229 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LoginRequest
2026-01-16 05:59:02.230 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 6: username=123123
2026-01-16 05:59:02.299 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 05:59:02.300 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 6
2026-01-16 05:59:02.300 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 05:59:02.646 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: LeaderboardRequest
2026-01-16 05:59:02.646 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 6: limit=50
2026-01-16 05:59:02.647 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:59:02.647 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:59:02.647 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:02.647 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: MatchHistoryRequest
2026-01-16 05:59:02.647 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 6: userId=3, limit=5
2026-01-16 05:59:02.647 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:59:02.647 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: GetQuestsRequest
2026-01-16 05:59:02.647 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 05:59:02.649 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 05:59:02.649 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 05:59:04.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:04.559 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:06.200 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:06.294 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LoginRequest
2026-01-16 05:59:06.295 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 7: username=123123123
2026-01-16 05:59:06.362 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 05:59:06.363 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 7
2026-01-16 05:59:06.363 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 05:59:06.560 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:06.714 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: LeaderboardRequest
2026-01-16 05:59:06.715 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 7: limit=50
2026-01-16 05:59:06.715 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:59:06.715 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:59:06.715 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:06.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: MatchHistoryRequest
2026-01-16 05:59:06.716 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 7: userId=4, limit=5
2026-01-16 05:59:06.716 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:59:06.716 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: GetQuestsRequest
2026-01-16 05:59:06.716 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 05:59:06.717 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 05:59:06.717 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 05:59:08.199 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:08.564 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:08.625 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:10.199 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:10.566 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:10.625 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:12.210 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:12.568 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:12.628 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:13.269 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:64892 (ID: 8)
2026-01-16 05:59:14.212 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:14.570 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:14.631 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:16.215 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:16.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:16.634 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:16.732 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LoginRequest
2026-01-16 05:59:16.732 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 8: username=manh
2026-01-16 05:59:16.781 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 05:59:16.781 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 8
2026-01-16 05:59:16.781 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 05:59:17.131 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: LeaderboardRequest
2026-01-16 05:59:17.131 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 8: limit=50
2026-01-16 05:59:17.131 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 05:59:17.131 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 05:59:17.131 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 05:59:17.131 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: MatchHistoryRequest
2026-01-16 05:59:17.131 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 8: userId=1, limit=5
2026-01-16 05:59:17.131 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 05:59:17.131 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: GetQuestsRequest
2026-01-16 05:59:17.131 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 05:59:17.134 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 05:59:17.134 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 05:59:18.219 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:18.575 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:18.635 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:19.043 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 05:59:20.220 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: ListRoomsRequest
2026-01-16 05:59:20.581 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:20.634 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:21.047 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 05:59:21.747 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: CreateRoomRequest
2026-01-16 05:59:21.748 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 98
2026-01-16 05:59:21.748 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: 1 (ID: 98)
2026-01-16 05:59:21.749 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 98 (position: 0)
2026-01-16 05:59:21.749 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: 1 (ID: 98)
2026-01-16 05:59:22.584 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: ListRoomsRequest
2026-01-16 05:59:22.637 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:23.050 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 05:59:23.900 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: JoinRoomRequest
2026-01-16 05:59:23.900 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 98
2026-01-16 05:59:23.900 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 98 (position: 1)
2026-01-16 05:59:23.900 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 98
2026-01-16 05:59:24.640 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: ListRoomsRequest
2026-01-16 05:59:25.053 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 05:59:25.403 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 7: JoinRoomRequest
2026-01-16 05:59:25.404 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 98
2026-01-16 05:59:25.404 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 98 (position: 2)
2026-01-16 05:59:25.404 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 98
2026-01-16 05:59:26.928 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: JoinRoomRequest
2026-01-16 05:59:26.930 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 98
2026-01-16 05:59:26.930 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 98 (position: 3)
2026-01-16 05:59:26.930 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 98
2026-01-16 05:59:27.052 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 8: ListRoomsRequest
2026-01-16 05:59:29.240 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: StartGameRequest
2026-01-16 05:59:29.241 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 98...
2026-01-16 05:59:29.241 [Server] INFO  c.m.server.game.TienLenGameSession - Player 3 has the 3 of Spades
2026-01-16 05:59:29.241 [Server] INFO  c.m.server.game.TienLenGameSession - First player determined: 3 (Index 1)
2026-01-16 05:59:29.241 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 98 (TIENLEN)
2026-01-16 05:59:29.241 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 05:59:29.241 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 98 by host 2
2026-01-16 05:59:41.529 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 5: PlayerActionPacket
2026-01-16 05:59:41.529 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 2 (Current Turn: 3)
2026-01-16 05:59:41.529 [Server] WARN  c.m.server.game.TienLenGameSession - Ignore action from 2 (not turn, expected 3)
2026-01-16 05:59:49.256 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 6: PlayerActionPacket
2026-01-16 05:59:49.256 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 3 (Current Turn: 3)
2026-01-16 05:59:49.256 [Server] INFO  c.m.server.game.TienLenGameSession - Player 3 played valid move: [3P, 3C] (PAIR)
2026-01-16 06:00:32.249 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 5)
2026-01-16 06:00:32.251 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 98
2026-01-16 06:00:32.252 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 98
2026-01-16 06:00:32.252 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 98 thành user 3
2026-01-16 06:00:32.252 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 98 từ 2 sang 3
2026-01-16 06:00:32.252 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 98 (còn lại 3 players)
2026-01-16 06:00:33.246 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 6)
2026-01-16 06:00:33.247 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 98
2026-01-16 06:00:33.247 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 98
2026-01-16 06:00:33.247 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 98 thành user 4
2026-01-16 06:00:33.247 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 98 từ 3 sang 4
2026-01-16 06:00:33.247 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 98 (còn lại 2 players)
2026-01-16 06:00:34.256 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 7)
2026-01-16 06:00:34.257 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 98
2026-01-16 06:00:34.257 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 98
2026-01-16 06:00:34.258 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 98 thành user 1
2026-01-16 06:00:34.258 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 98 từ 4 sang 1
2026-01-16 06:00:34.258 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 98 (còn lại 1 players)
2026-01-16 06:00:35.269 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 8)
2026-01-16 06:00:35.270 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 98
2026-01-16 06:00:35.270 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 98
2026-01-16 06:00:35.272 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 98
2026-01-16 06:00:35.272 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 98
2026-01-16 06:00:35.272 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 98 (còn lại 0 players)
2026-01-16 06:05:40.421 [main] INFO  com.mygame.server.ServerLauncher - Step 1/4: Connecting to database...
2026-01-16 06:05:40.595 [main] INFO  c.m.server.database.DatabaseManager - Database 'postgres' đã tồn tại
2026-01-16 06:05:40.745 [main] INFO  c.m.server.database.DatabaseManager - Đã kết nối đến PostgreSQL database: postgres (catalog: postgres)
2026-01-16 06:05:40.745 [main] INFO  com.mygame.server.ServerLauncher - ✓ Database connected
2026-01-16 06:05:40.745 [main] INFO  com.mygame.server.ServerLauncher - Step 2/4: Initializing schema...
2026-01-16 06:05:40.745 [main] INFO  c.m.server.database.DatabaseManager - Đang khởi tạo database schema...
2026-01-16 06:05:40.748 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_users_credits ON us
2026-01-16 06:05:40.753 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_user_quest_progress
2026-01-16 06:05:40.753 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_status
2026-01-16 06:05:40.753 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_active_rooms_game_t
2026-01-16 06:05:40.753 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_game_
2026-01-16 06:05:40.753 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_user_
2026-01-16 06:05:40.753 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_match_history_times
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_room_i
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: CREATE INDEX IF NOT EXISTS idx_room_players_user_i
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE daily_quest_config IS 'Static dai
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE user_quest_progress IS 'User prog
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE active_rooms IS 'Active game room
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE match_history IS 'Completed match
2026-01-16 06:05:40.755 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: COMMENT ON TABLE room_players IS 'Many-to-many rel
2026-01-16 06:05:40.758 [main] DEBUG c.m.server.database.DatabaseManager - Đã thực thi: DELETE FROM daily_quest_config
2026-01-16 06:05:40.758 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: ERROR: syntax error at or near "IF"
  Position: 5
2026-01-16 06:05:40.758 [main] WARN  c.m.server.database.DatabaseManager - Lỗi khi thực thi SQL: Unterminated dollar quote started at position 4 in SQL END $$. Expected terminating $$
2026-01-16 06:05:40.766 [main] INFO  c.m.server.database.DatabaseManager - Đã khởi tạo database schema thành công
2026-01-16 06:05:40.766 [main] INFO  com.mygame.server.ServerLauncher - ✓ Schema initialized
2026-01-16 06:05:40.766 [main] INFO  com.mygame.server.ServerLauncher - Step 3/4: Starting network server...
2026-01-16 06:05:40.834 [main] INFO  com.mygame.server.ServerLauncher - Step 4/4: Setting up listeners...
2026-01-16 06:05:40.849 [main] INFO  c.mygame.server.room.GameRoomManager - Started empty room cleanup scheduler (every 30 seconds)
2026-01-16 06:05:40.849 [main] INFO  com.mygame.server.ServerLauncher - 
========================================
2026-01-16 06:05:40.849 [main] INFO  com.mygame.server.ServerLauncher - ✅ SERVER STARTED SUCCESSFULLY ON PORT 54555
2026-01-16 06:05:40.849 [main] INFO  com.mygame.server.ServerLauncher - ========================================

2026-01-16 06:05:53.790 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53948 (ID: 1)
2026-01-16 06:05:56.906 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53949 (ID: 2)
2026-01-16 06:05:58.935 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53950 (ID: 3)
2026-01-16 06:05:59.465 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LoginRequest
2026-01-16 06:05:59.465 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 1: username=123
2026-01-16 06:05:59.531 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123
2026-01-16 06:05:59.534 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 2 cho connection 1
2026-01-16 06:05:59.534 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123 (ID: 2)
2026-01-16 06:05:59.881 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: LeaderboardRequest
2026-01-16 06:05:59.881 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 1: limit=50
2026-01-16 06:05:59.886 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 06:05:59.886 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 06:05:59.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:05:59.886 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: MatchHistoryRequest
2026-01-16 06:05:59.886 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 1: userId=2, limit=5
2026-01-16 06:05:59.891 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 06:05:59.891 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: GetQuestsRequest
2026-01-16 06:05:59.891 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 2
2026-01-16 06:05:59.894 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 2 on date 2026-01-16
2026-01-16 06:05:59.895 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 2
2026-01-16 06:06:00.834 [Server] INFO  com.mygame.server.ServerListener - Client kết nối: /127.0.0.1:53951 (ID: 4)
2026-01-16 06:06:01.797 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:03.115 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LoginRequest
2026-01-16 06:06:03.117 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 2: username=123123
2026-01-16 06:06:03.167 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123
2026-01-16 06:06:03.167 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 3 cho connection 2
2026-01-16 06:06:03.167 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123 (ID: 3)
2026-01-16 06:06:03.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: LeaderboardRequest
2026-01-16 06:06:03.517 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 2: limit=50
2026-01-16 06:06:03.517 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 06:06:03.517 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 06:06:03.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:03.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: MatchHistoryRequest
2026-01-16 06:06:03.517 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 2: userId=3, limit=5
2026-01-16 06:06:03.517 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 06:06:03.517 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: GetQuestsRequest
2026-01-16 06:06:03.517 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 3
2026-01-16 06:06:03.520 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 3 on date 2026-01-16
2026-01-16 06:06:03.520 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 3
2026-01-16 06:06:03.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:05.430 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:05.803 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:07.194 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LoginRequest
2026-01-16 06:06:07.195 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 3: username=123123123
2026-01-16 06:06:07.245 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: 123123123
2026-01-16 06:06:07.245 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 4 cho connection 3
2026-01-16 06:06:07.245 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: 123123123 (ID: 4)
2026-01-16 06:06:07.431 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:07.586 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: LeaderboardRequest
2026-01-16 06:06:07.586 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 3: limit=50
2026-01-16 06:06:07.586 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 06:06:07.594 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 06:06:07.594 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:07.594 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: MatchHistoryRequest
2026-01-16 06:06:07.594 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 3: userId=4, limit=5
2026-01-16 06:06:07.595 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 06:06:07.595 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: GetQuestsRequest
2026-01-16 06:06:07.595 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 4
2026-01-16 06:06:07.595 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 4 on date 2026-01-16
2026-01-16 06:06:07.596 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 4
2026-01-16 06:06:07.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:09.434 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:09.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:09.805 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:11.435 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:11.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:11.807 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:13.094 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LoginRequest
2026-01-16 06:06:13.094 [Server] INFO  c.m.server.handlers.LoginHandler - Nhận login request từ connection 4: username=manh
2026-01-16 06:06:13.145 [Server] INFO  com.mygame.server.database.UserDAO - User đăng nhập thành công: manh
2026-01-16 06:06:13.145 [Server] INFO  com.mygame.server.ServerListener - Đã lưu userId 1 cho connection 4
2026-01-16 06:06:13.145 [Server] INFO  c.m.server.handlers.LoginHandler - Login thành công cho user: manh (ID: 1)
2026-01-16 06:06:13.438 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:13.494 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: LeaderboardRequest
2026-01-16 06:06:13.494 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Nhận leaderboard request từ connection 4: limit=50
2026-01-16 06:06:13.495 [Server] DEBUG c.m.server.database.LeaderboardDAO - Đã lấy 4 players từ leaderboard
2026-01-16 06:06:13.495 [Server] DEBUG c.m.s.handlers.LeaderboardHandler - Đã gửi 4 entries trong leaderboard
2026-01-16 06:06:13.495 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 06:06:13.495 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: MatchHistoryRequest
2026-01-16 06:06:13.495 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Nhận match history request từ connection 4: userId=1, limit=5
2026-01-16 06:06:13.495 [Server] DEBUG c.m.s.handlers.MatchHistoryHandler - Đã gửi 0 entries trong match history
2026-01-16 06:06:13.495 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: GetQuestsRequest
2026-01-16 06:06:13.495 [Server] INFO  c.m.server.handlers.QuestHandler - Getting daily quests for user 1
2026-01-16 06:06:13.495 [Server] DEBUG com.mygame.server.database.QuestDAO - Retrieved 5 quests for user 1 on date 2026-01-16
2026-01-16 06:06:13.495 [Server] INFO  c.m.server.handlers.QuestHandler - Sent 5 quests to user 1
2026-01-16 06:06:13.506 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:13.810 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:15.405 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 06:06:15.435 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:15.511 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:15.805 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:17.408 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 06:06:17.445 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:17.505 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:17.815 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: ListRoomsRequest
2026-01-16 06:06:19.173 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: CreateRoomRequest
2026-01-16 06:06:19.176 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 2 vào room 99
2026-01-16 06:06:19.176 [Server] INFO  com.mygame.server.database.RoomDAO - Đã tạo room: Room 9172 (ID: 99)
2026-01-16 06:06:19.180 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 2 vào room 99 (position: 0)
2026-01-16 06:06:19.180 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã tạo room: Room 9172 (ID: 99)
2026-01-16 06:06:19.411 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 06:06:19.446 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: ListRoomsRequest
2026-01-16 06:06:19.509 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:20.907 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: JoinRoomRequest
2026-01-16 06:06:20.911 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 3 vào room 99
2026-01-16 06:06:20.911 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 3 vào room 99 (position: 1)
2026-01-16 06:06:20.911 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã tham gia room 99
2026-01-16 06:06:21.415 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 06:06:21.515 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: ListRoomsRequest
2026-01-16 06:06:22.872 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: JoinRoomRequest
2026-01-16 06:06:22.873 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 4 vào room 99
2026-01-16 06:06:22.873 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 4 vào room 99 (position: 2)
2026-01-16 06:06:22.873 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã tham gia room 99
2026-01-16 06:06:23.417 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: ListRoomsRequest
2026-01-16 06:06:24.755 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 4: JoinRoomRequest
2026-01-16 06:06:24.764 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã thêm player 1 vào room 99
2026-01-16 06:06:24.764 [Server] DEBUG com.mygame.server.room.GameRoom - Đã thêm player 1 vào room 99 (position: 3)
2026-01-16 06:06:24.764 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã tham gia room 99
2026-01-16 06:06:27.102 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: StartGameRequest
2026-01-16 06:06:27.104 [Server] INFO  c.mygame.server.handlers.RoomHandler - Starting game session for room 99...
2026-01-16 06:06:27.110 [Server] INFO  c.m.server.game.TienLenGameSession - Player 3 has the 3 of Spades
2026-01-16 06:06:27.110 [Server] INFO  c.m.server.game.TienLenGameSession - First player determined: 3 (Index 1)
2026-01-16 06:06:27.110 [Server] INFO  c.m.server.game.GameSessionManager - Đã start session TienLenGameSession cho room 99 (TIENLEN)
2026-01-16 06:06:27.110 [Server] INFO  c.mygame.server.handlers.RoomHandler - Deck shuffled. Dealing cards... (Session Started)
2026-01-16 06:06:27.110 [Server] INFO  c.mygame.server.handlers.RoomHandler - Game started in room 99 by host 2
2026-01-16 06:06:30.680 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 1: PlayerActionPacket
2026-01-16 06:06:30.680 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 2 (Current Turn: 3)
2026-01-16 06:06:30.680 [Server] WARN  c.m.server.game.TienLenGameSession - Ignore action from 2 (not turn, expected 3)
2026-01-16 06:06:37.355 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 2: PlayerActionPacket
2026-01-16 06:06:37.355 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 3 (Current Turn: 3)
2026-01-16 06:06:37.361 [Server] INFO  c.m.server.game.TienLenGameSession - Player 3 played valid move: [3P, 3H] (PAIR)
2026-01-16 06:06:46.795 [Server] DEBUG com.mygame.server.ServerListener - Nhận packet từ client 3: PlayerActionPacket
2026-01-16 06:06:46.795 [Server] INFO  c.m.server.game.TienLenGameSession - Action received: PLAY from Player 4 (Current Turn: 4)
2026-01-16 06:06:46.795 [Server] INFO  c.m.server.game.TienLenGameSession - Player 4 played valid move: [8C, 8D] (PAIR)
2026-01-16 06:06:50.726 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 1)
2026-01-16 06:06:50.729 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 2 khỏi room 99
2026-01-16 06:06:50.729 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 2 khỏi room 99
2026-01-16 06:06:50.729 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 99 thành user 3
2026-01-16 06:06:50.729 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 99 từ 2 sang 3
2026-01-16 06:06:50.729 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 2 đã rời room 99 (còn lại 3 players)
2026-01-16 06:06:52.785 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 2)
2026-01-16 06:06:52.790 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 3 khỏi room 99
2026-01-16 06:06:52.790 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 3 khỏi room 99
2026-01-16 06:06:52.790 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 99 thành user 4
2026-01-16 06:06:52.790 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 99 từ 3 sang 4
2026-01-16 06:06:52.790 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 3 đã rời room 99 (còn lại 2 players)
2026-01-16 06:06:53.819 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 3)
2026-01-16 06:06:53.822 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 4 khỏi room 99
2026-01-16 06:06:53.822 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 4 khỏi room 99
2026-01-16 06:06:53.822 [Server] INFO  com.mygame.server.database.RoomDAO - Đã cập nhật host của room 99 thành user 1
2026-01-16 06:06:53.822 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã chuyển host của room 99 từ 4 sang 1
2026-01-16 06:06:53.822 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 4 đã rời room 99 (còn lại 1 players)
2026-01-16 06:06:54.853 [Server] INFO  com.mygame.server.ServerListener - Client ngắt kết nối: null (ID: 4)
2026-01-16 06:06:54.860 [Server] DEBUG com.mygame.server.database.RoomDAO - Đã xóa player 1 khỏi room 99
2026-01-16 06:06:54.860 [Server] DEBUG com.mygame.server.room.GameRoom - Đã xóa player 1 khỏi room 99
2026-01-16 06:06:54.862 [Server] INFO  com.mygame.server.database.RoomDAO - Đã xóa room: 99
2026-01-16 06:06:54.862 [Server] INFO  c.mygame.server.room.GameRoomManager - Đã xóa room trống: 99
2026-01-16 06:06:54.862 [Server] INFO  c.mygame.server.room.GameRoomManager - Player 1 đã rời room 99 (còn lại 0 players)
